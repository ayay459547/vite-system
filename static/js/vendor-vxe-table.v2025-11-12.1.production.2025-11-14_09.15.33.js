import{X as i}from"./vendor-xe-utils.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{d as is}from"./vendor-@vue/runtime-dom.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{V as he}from"./vendor-@vxe-ui/core.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{w as pt,h as f,d as mo,i as _t,s as Al,n as oe,ag as dr,t as Ll,P as Le,b as je,T as di,af as ui,ah as fi,an as Tl,ar as us}from"./vendor-@vue/runtime-core.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{u as Zo,x as He}from"./vendor-@vue/reactivity.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{D as ur}from"./vendor-dom-zindex.v2025-11-12.1.production.2025-11-14_09.15.33.js";function gt(e){return e&&e.enabled!==!1}function fr(e){return e==null||e===""}function hr(e){const l=e.name,s=i.lastIndexOf(l,"."),c=l.substring(s+1,l.length).toLowerCase();return{filename:l.substring(0,s),type:c}}function hi(){return ur.getNext()}function pi(){return ur.getCurrent()}function kl(e){return e&&e.children&&e.children.length>0}function $o(e,l){if(e){const s=he.getConfig().translate;return i.toValueString(s?s(""+e,l):e)}return""}function It(e,l){return""+(fr(e)?l?he.getConfig().emptyCell:"":e)}function Vo(e){return e===""||i.eqNull(e)}const pr="4.8.16";he.version=pr;he.tableVersion=pr;he.setConfig({emptyCell:"ã€€",table:{fit:!0,showHeader:!0,animat:!0,delayHover:250,autoResize:!0,padding:!0,minHeight:144,resizeConfig:{refreshDelay:250},radioConfig:{strict:!0},dragConfig:{showRowIcon:!0},checkboxConfig:{strict:!0},tooltipConfig:{enterable:!0},validConfig:{showMessage:!0,autoClear:!0,autoPos:!0,message:"inline",msgMode:"single",theme:"normal"},columnConfig:{maxFixedSize:4},customConfig:{allowVisible:!0,allowResizable:!0,allowFixed:!0,allowSort:!0,showFooter:!0,placement:"top-right",modalOptions:{showMaximize:!0,mask:!0,lockView:!0,resize:!0,escClosable:!0}},sortConfig:{showIcon:!0,iconLayout:"vertical"},filterConfig:{showIcon:!0},treeConfig:{rowField:"id",parentField:"parentId",childrenField:"children",hasChildField:"hasChild",mapChildrenField:"_X_ROW_CHILD",indent:20,showIcon:!0},expandConfig:{showIcon:!0},editConfig:{showIcon:!0,showAsterisk:!0,autoFocus:!0},importConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},exportConfig:{_typeMaps:{csv:1,html:1,xml:1,txt:1}},printConfig:{},mouseConfig:{extension:!0},keyboardConfig:{isEsc:!0},areaConfig:{autoClear:!0,selectCellByHeader:!0},clipConfig:{isCopy:!0,isCut:!0,isPaste:!0},fnrConfig:{isFind:!0,isReplace:!0},scrollX:{gt:60},scrollY:{gt:100}},grid:{formConfig:{enabled:!0},pagerConfig:{enabled:!0},toolbarConfig:{enabled:!0},proxyConfig:{enabled:!0,autoLoad:!0,showResponseMsg:!0,showActiveMsg:!0,props:{list:null,result:"result",total:"page.total",message:"message"}}},toolbar:{}});const st="vxe-table-icon-";he.setIcon({TABLE_SORT_ASC:st+"caret-up",TABLE_SORT_DESC:st+"caret-down",TABLE_FILTER_NONE:st+"funnel",TABLE_FILTER_MATCH:st+"funnel",TABLE_EDIT:st+"edit",TABLE_TITLE_PREFIX:st+"question-circle-fill",TABLE_TITLE_SUFFIX:st+"question-circle-fill",TABLE_TREE_LOADED:st+"spinner roll",TABLE_TREE_OPEN:st+"caret-right rotate90",TABLE_TREE_CLOSE:st+"caret-right",TABLE_EXPAND_LOADED:st+"spinner roll",TABLE_EXPAND_OPEN:st+"arrow-right rotate90",TABLE_EXPAND_CLOSE:st+"arrow-right",TABLE_CHECKBOX_CHECKED:st+"checkbox-checked-fill",TABLE_CHECKBOX_UNCHECKED:st+"checkbox-unchecked",TABLE_CHECKBOX_INDETERMINATE:st+"checkbox-indeterminate-fill",TABLE_RADIO_CHECKED:st+"radio-checked-fill",TABLE_RADIO_UNCHECKED:st+"radio-unchecked",TABLE_CUSTOM_SORT:st+"drag-handle",TABLE_MENU_OPTIONS:st+"arrow-right",TABLE_DRAG_ROW:st+"drag-handle",TOOLBAR_TOOLS_REFRESH:st+"repeat",TOOLBAR_TOOLS_REFRESH_LOADING:st+"repeat roll",TOOLBAR_TOOLS_IMPORT:st+"upload",TOOLBAR_TOOLS_EXPORT:st+"download",TOOLBAR_TOOLS_PRINT:st+"print",TOOLBAR_TOOLS_FULLSCREEN:st+"fullscreen",TOOLBAR_TOOLS_MINIMIZE:st+"minimize",TOOLBAR_TOOLS_CUSTOM:st+"custom-column",TOOLBAR_TOOLS_FIXED_LEFT:st+"fixed-left",TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:st+"fixed-left-fill",TOOLBAR_TOOLS_FIXED_RIGHT:st+"fixed-right",TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:st+"fixed-right-fill"});he.setTheme;he.getTheme;he.setConfig;he.getConfig;he.setIcon;he.getIcon;he.setLanguage;he.setI18n;he.getI18n;he.globalEvents;he.globalResize;he.renderer;he.validators;he.menus;he.formats;he.commands;he.interceptor;he.clipboard;he.log;he.hooks;he.use;const gi=e=>he.setConfig(e);he.setup=gi;const mi=e=>he.setConfig(e);he.config=mi;const bi=(e,l)=>he.getI18n(e,l);he.t=bi;const vi=(e,l)=>$o(e,l);he._t=vi;const Yn={},Qo=i.browse();function Go(e,l){return e?i.isFunction(e)?e(l):e:""}function gr(e){return Yn[e]||(Yn[e]=new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g")),Yn[e]}function mr(e,l,s){if(e){const c=e.parentNode;if(s.top+=e.offsetTop,s.left+=e.offsetLeft,c&&c!==document.documentElement&&c!==document.body&&(s.top-=c.scrollTop,s.left-=c.scrollLeft),!(l&&(e===l||e.offsetParent===l))&&e.offsetParent)return mr(e.offsetParent,l,s)}return s}function as(e){return e&&/^\d+(px)?$/.test(e)}function ql(e){return e&&/^\d+%$/.test(e)}function ml(e,l){return e&&e.className&&e.className.match&&e.className.match(gr(l))}function Kt(e,l){e&&ml(e,l)&&(e.className=e.className.replace(gr(l),""))}function po(e,l){e&&!ml(e,l)&&(Kt(e,l),e.className=`${e.className} ${l}`)}function fs(){const e=document.documentElement,l=document.body;return{scrollTop:e.scrollTop||l.scrollTop,scrollLeft:e.scrollLeft||l.scrollLeft,visibleHeight:e.clientHeight||l.clientHeight,visibleWidth:e.clientWidth||l.clientWidth}}function xi(e){if(e){const l=getComputedStyle(e),s=i.toNumber(l.paddingTop),c=i.toNumber(l.paddingBottom);return s+c}return 0}function yt(e,l){e&&(e.scrollTop=l)}function At(e,l){e&&(e.scrollLeft=l)}function hs(e,l){const s=l.type==="html"?e.innerText:e.textContent;e.getAttribute("title")!==s&&e.setAttribute("title",s)}function rt(e,l,s,c){let C,v=e.target.shadowRoot&&e.composed&&e.composedPath()[0]||e.target;for(;v&&v.nodeType&&v!==document;){if(s&&ml(v,s)&&(!c||c(v)))C=v;else if(v===l)return{flag:s?!!C:!0,container:l,targetElem:C};v=v.parentNode}return{flag:!1}}function Ci(e,l){return mr(e,l,{left:0,top:0})}function vn(e){const l=e.getBoundingClientRect(),s=l.top,c=l.left,{scrollTop:C,scrollLeft:v,visibleHeight:I,visibleWidth:S}=fs();return{boundingTop:s,top:C+s,boundingLeft:c,left:v+c,visibleHeight:I,visibleWidth:S}}const Ls="scrollIntoViewIfNeeded",Hs="scrollIntoView";function wi(e){e&&(e[Ls]?e[Ls]():e[Hs]&&e[Hs]())}function Ei(e,l){e&&e.dispatchEvent(new Event(l))}function qn(e){return e&&e.nodeType===1}const{log:br}=he,vr="table v4.8.16",Bs=br.create("warn",vr),Gt=br.create("error",vr),{getI18n:yi,formats:Ya}=he;class cs{constructor(l,s,{renderHeader:c,renderCell:C,renderFooter:v,renderData:I}={}){const S=l.xegrid,X=s.formatter,u=i.isBoolean(s.visible)?s.visible:!0;if(Object.assign(this,{type:s.type,property:s.field,field:s.field,title:s.title,width:s.width,minWidth:s.minWidth,maxWidth:s.maxWidth,resizable:s.resizable,fixed:s.fixed,align:s.align,headerAlign:s.headerAlign,footerAlign:s.footerAlign,showOverflow:s.showOverflow,showHeaderOverflow:s.showHeaderOverflow,showFooterOverflow:s.showFooterOverflow,className:s.className,headerClassName:s.headerClassName,footerClassName:s.footerClassName,formatter:X,footerFormatter:s.footerFormatter,sortable:s.sortable,sortBy:s.sortBy,sortType:s.sortType,filters:Cr(s.filters),filterMultiple:i.isBoolean(s.filterMultiple)?s.filterMultiple:!0,filterMethod:s.filterMethod,filterResetMethod:s.filterResetMethod,filterRecoverMethod:s.filterRecoverMethod,filterRender:s.filterRender,treeNode:s.treeNode,dragSort:s.dragSort,cellType:s.cellType,cellRender:s.cellRender,editRender:s.editRender,contentRender:s.contentRender,headerExportMethod:s.headerExportMethod,exportMethod:s.exportMethod,footerExportMethod:s.footerExportMethod,titleHelp:s.titleHelp,titlePrefix:s.titlePrefix,titleSuffix:s.titleSuffix,params:s.params,id:s.colId||i.uniqueId("col_"),parentId:null,visible:u,halfVisible:!1,defaultVisible:u,defaultFixed:s.fixed,checked:!1,halfChecked:!1,disabled:!1,level:1,rowSpan:1,colSpan:1,order:null,sortTime:0,sortNumber:0,renderSortNumber:0,renderFixed:"",renderVisible:!1,renderWidth:0,renderHeight:0,renderResizeWidth:0,renderAutoWidth:0,resizeWidth:0,renderLeft:0,renderArgs:[],model:{},renderHeader:c||s.renderHeader,renderCell:C||s.renderCell,renderFooter:v||s.renderFooter,renderData:I,slots:s.slots}),S){const{computeProxyOpts:g}=S.getComputeMaps(),x=g.value;x.beforeColumn&&x.beforeColumn({$grid:S,column:this})}}getTitle(){return $o(this.title||(this.type==="seq"?yi("vxe.table.seqTitle"):""))}getKey(){const{type:l}=this;return this.field||(l?`type=${l}`:null)}update(l,s){l!=="filters"&&(l==="field"&&(this.property=s),this[l]=s)}}const xr=(e,l)=>{const s=[];return e.forEach(c=>{c.parentId=l?l.id:null,c.visible&&(c.children&&c.children.length&&c.children.some(C=>C.visible)?(s.push(c),s.push(...xr(c.children,c))):s.push(c))}),s},Ri=e=>{let l=1;const s=(v,I)=>{if(I&&(v.level=I.level+1,l<v.level&&(l=v.level)),v.children&&v.children.length&&v.children.some(S=>S.visible)){let S=0;v.children.forEach(X=>{X.visible&&(s(X,v),S+=X.colSpan)}),v.colSpan=S}else v.colSpan=1};e.forEach(v=>{v.level=1,s(v)});const c=[];for(let v=0;v<l;v++)c.push([]);return xr(e).forEach(v=>{v.children&&v.children.length&&v.children.some(I=>I.visible)?v.rowSpan=1:v.rowSpan=l-v.level+1,c[v.level-1].push(v)}),c};function Un(e,l,s){const{internalData:c}=e;return e.clearScroll().then(()=>{if(l||s)return c.lastScrollLeft=0,c.lastScrollTop=0,e.scrollTo(l,s)})}function Gn(){return i.uniqueId("row_")}function Bo(e){const{props:l}=e,{computeRowOpts:s}=e.getComputeMaps(),{rowId:c}=l,C=s.value;return c||C.keyField||"_X_ROW_KEY"}function re(e,l){const s=i.get(l,Bo(e));return i.eqNull(s)?"":encodeURIComponent(s)}const kt=(e,l)=>l?i.isString(l)?e.getColumnByField(l):l:null;function Zn(e){if(e){const l=getComputedStyle(e),s=i.toNumber(l.paddingLeft),c=i.toNumber(l.paddingRight);return s+c}return 0}function Rl(e){if(e){const l=getComputedStyle(e),s=i.toNumber(l.marginLeft),c=i.toNumber(l.marginRight);return e.offsetWidth+s+c}return 0}function qo(e,l){return e.querySelector(".vxe-cell"+l)}function Cr(e){return e&&i.isArray(e)?e.map(({label:l,value:s,data:c,resetValue:C,checked:v})=>({label:l,value:s,data:c,resetValue:C,checked:!!v,_checked:!!v})):e}function Si(e){return e.map((l,s)=>s%2===0?Number(l)+1:".").join("")}function Bt(e,l){return i.get(e,l.field)}function So(e,l,s){return i.set(e,l.field,s)}function Oi(e){const{$table:l,column:s,cell:c}=e,{props:C}=l,{computeResizableOpts:v}=l.getComputeMaps(),I=v.value,{minWidth:S}=I;if(S){const p=i.isFunction(S)?S(e):S;if(p!=="auto")return Math.max(1,i.toNumber(p))}const{showHeaderOverflow:X}=C,{showHeaderOverflow:u,minWidth:g}=s,x=i.isUndefined(u)||i.isNull(u)?X:u,T=x==="title"||(x===!0||x==="tooltip")||x==="ellipsis",M=i.floor((i.toNumber(getComputedStyle(c).fontSize)||14)*1.6),k=Zn(c)+Zn(qo(c,""));let b=M+k;if(T){const p=Zn(qo(c,"--title>.vxe-cell--checkbox")),y=Rl(qo(c,">.vxe-cell--required-icon")),O=Rl(qo(c,">.vxe-cell--edit-icon")),R=Rl(qo(c,">.vxe-cell-title-prefix-icon")),H=Rl(qo(c,">.vxe-cell-title-suffix-icon")),W=Rl(qo(c,">.vxe-cell--sort")),q=Rl(qo(c,">.vxe-cell--filter"));b+=p+y+O+R+H+q+W}if(g){const{refTableBody:p}=l.getRefMaps(),y=p.value,O=y?y.$el:null;if(O){if(ql(g)){const H=(O.clientWidth-1)/100;return Math.max(b,Math.floor(i.toInteger(g)*H))}else if(as(g))return Math.max(b,i.toInteger(g))}}return b}function xn(e){return e&&(e.constructor===cs||e instanceof cs)}function Mi(e,l,s){return xn(l)?l:Zo(new cs(e,l,s))}function wr(e,l,s){Object.keys(l).forEach(c=>{pt(()=>l[c],C=>{s.update(c,C),e&&(c==="filters"?(e.setFilter(s,C),e.handleUpdateDataQueue()):["visible","fixed","width","minWidth","maxWidth"].includes(c)&&e.handleRefreshColumnQueue())})})}function Er(e,l,s,c){const{reactData:C}=e,{staticColumns:v}=C,I=l.parentNode,S=c?c.columnConfig:null,X=S?S.children:v;I&&X&&(X.splice(i.arrayIndexOf(I.children,l),0,s),C.staticColumns=v.slice(0))}function yr(e,l){const{reactData:s}=e,{staticColumns:c}=s,C=i.findTree(c,v=>v.id===l.id,{children:"children"});C&&C.items.splice(C.index,1),s.staticColumns=c.slice(0)}function Vs(e,l){const{internalData:s}=e,{fullColumnIdData:c}=s;if(!l)return null;let C=l.parentId;for(;c[C];){const v=c[C].column;if(C=v.parentId,!C)return v}return l}function Rr(e,l,s){for(let c=0;c<e.length;c++){const{row:C,col:v,rowspan:I,colspan:S}=e[c];if(v>-1&&C>-1&&I&&S){if(C===l&&v===s)return{rowspan:I,colspan:S};if(l>=C&&l<C+I&&s>=v&&s<v+S)return{rowspan:0,colspan:0}}}}function Fi(e){const{props:l,internalData:s}=e;return s.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearPendingRow(),e.clearFilter&&e.clearFilter(),e.clearSelected&&(l.keyboardConfig||l.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&l.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}function ki(e){return e.clearFilter&&e.clearFilter(),Fi(e)}function Ns(e,l){const{reactData:s,internalData:c}=e,C=e.props,{showOverflow:v}=C,{refTableBody:I}=e.getRefMaps(),{columnStore:S,scrollYLoad:X}=s,{afterFullData:u,scrollYStore:g,fullAllDataRowIdData:x}=c,B=I.value,{leftList:N,rightList:z}=S,T=B?B.$el:null,M=re(e,l);let k=0;N.forEach(p=>{k+=p.renderWidth});let b=0;if(z.forEach(p=>{b+=p.renderWidth}),T){const p=T.clientHeight,y=T.scrollTop,O=T.querySelector(`[rowid="${M}"]`);if(O){const R=O.offsetParent,H=O.offsetTop+(R?R.offsetTop:0),W=O.clientHeight;if(H<y||H>y+p)return e.scrollTo(null,H);if(H+W>=p+y)return e.scrollTo(null,y+W)}else if(X){if(v)return e.scrollTo(null,(e.findRowIndexOf(u,l)-1)*g.rowHeight);let R=0;const H=x[M],W=H?H.height:0;for(let q=0;q<u.length;q++){const ae=u[q],ce=re(e,ae);if(ae===l||ce===M)break;const $=x[ce];R+=$?$.height:0}return R<y?e.scrollTo(null,R-k-1):e.scrollTo(null,R+W-(p-b-1))}}return Promise.resolve()}function Ii(e,l){const{reactData:s,internalData:c}=e,{refTableBody:C}=e.getRefMaps(),{columnStore:v,scrollXLoad:I}=s,{visibleColumn:S}=c,{leftList:X,rightList:u}=v,g=C.value,x=g?g.$el:null;if(l.fixed)return Promise.resolve();let B=0;X.forEach(z=>{B+=z.renderWidth});let N=0;if(u.forEach(z=>{N+=z.renderWidth}),x){const z=x.clientWidth,T=x.scrollLeft,M=x.querySelector(`.${l.id}`);if(M){const k=M.offsetParent,b=M.offsetLeft+(k?k.offsetLeft:0),p=M.clientWidth;if(b<T+B)return e.scrollTo(b-B-1);if(b+p-T>z-N)return e.scrollTo(b+p-(z-N-1))}else if(I){let k=0;const b=l.renderWidth;for(let p=0;p<S.length;p++){const y=S[p];if(y===l||y.id===l.id)break;k+=y.renderWidth}return k<T?e.scrollTo(k-B-1):e.scrollTo(k+b-(z-N-1))}}return Promise.resolve()}function Il(e){return"on"+e.substring(0,1).toLocaleUpperCase()+e.substring(1)}function Sr(e){switch(e.name){case"input":case"textarea":return"input";case"select":return"change"}return"update:modelValue"}function Or(e){switch(e.name){case"input":case"textarea":case"VxeInput":case"VxeNumberInput":case"VxeTextarea":case"$input":case"$textarea":return"input"}return"change"}function Oo(e){return i.isArray(e)?e:[e]}const{getI18n:cn,getIcon:wt,renderer:Ul,formats:$s,renderEmptyElement:js}=he;function Di(e){const{$table:l,column:s}=e,c=s.titlePrefix||s.titleHelp;return c?[f("i",{class:["vxe-cell-title-prefix-icon",c.icon||wt().TABLE_TITLE_PREFIX],onMouseenter(C){l.triggerHeaderTitleEvent(C,c,e)},onMouseleave(C){l.handleTargetLeaveEvent(C)}})]:[]}function Ti(e){const{$table:l,column:s}=e,c=s.titleSuffix;return c?[f("i",{class:["vxe-cell-title-suffix-icon",c.icon||wt().TABLE_TITLE_SUFFIX],onMouseenter(C){l.triggerHeaderTitleEvent(C,c,e)},onMouseleave(C){l.handleTargetLeaveEvent(C)}})]:[]}function Ai(e){const{$table:l}=e,{computeDragOpts:s}=l.getComputeMaps(),c=s.value,{rowIcon:C,rowDisabledMethod:v}=c,I=v&&v(e);return f("span",{key:"dg",class:["vxe-cell--drag-handle",{"is--disabled":I}],onMousedown(S){I||l.handleCellDragMousedownEvent(S,e)},onMouseup:l.handleCellDragMouseupEvent},[f("i",{class:C||wt().TABLE_DRAG_ROW})])}function $t(e,l){const{$table:s,column:c,level:C}=e,{dragSort:v}=c,I=s.props,{treeConfig:S}=I,{computeRowOpts:X,computeDragOpts:u}=s.getComputeMaps(),g=X.value,x=u.value,{showRowIcon:B,rowVisibleMethod:N}=x,z=i.isArray(l)?l:[l];return v&&g.drag&&B&&(!N||N(e))&&(!S||!C)&&z.unshift(Ai(e)),z}function Uo(e,l){const{$table:s,column:c}=e,{props:C,reactData:v}=s,{computeTooltipOpts:I}=s.getComputeMaps(),{showHeaderOverflow:S}=C,{type:X,showHeaderOverflow:u}=c,x=I.value.showAll,B=i.isUndefined(u)||i.isNull(u)?S:u,N=B==="title",z=B===!0||B==="tooltip",T={};return(N||z||x)&&(T.onMouseenter=M=>{v._isResize||(N?hs(M.currentTarget,c):(z||x)&&s.triggerHeaderTooltipEvent(M,e))}),(z||x)&&(T.onMouseleave=M=>{v._isResize||(z||x)&&s.handleTargetLeaveEvent(M)}),[X==="html"&&i.isString(l)?f("span",Object.assign({class:"vxe-cell--title",innerHTML:l},T)):f("span",Object.assign({class:"vxe-cell--title"},T),Oo(l))]}function _s(e,l){if(i.isFunction(e))return e(l);const s=i.isArray(e),c=s?$s.get(e[0]):$s.get(e),C=c?c.tableFooterCellFormatMethod:null;return C?s?C(l,...e.slice(1)):C(l):""}function Li(e){const{$table:l,column:s,_columnIndex:c,items:C,row:v}=e,{slots:I,editRender:S,cellRender:X,footerFormatter:u}=s,g=S||X,x=I?I.footer:null;if(x)return l.callSlot(x,e);if(g){const N=Ul.get(g.name);if(N){const z=N.renderTableFooter||N.renderFooter;if(z)return Oo(z(g,e))}}let B="";return i.isArray(C)?(B=C[c],[u?_s(u,{itemValue:B,column:s,row:v,items:C,_columnIndex:c}):It(B,1)]):(B=i.get(v,s.field),[u?_s(u,{itemValue:B,column:s,row:v,items:C,_columnIndex:c}):It(B,1)])}function Ws(e){const{$table:l,row:s,column:c}=e;return It(l.getCellLabel(s,c),1)}const Ve={createColumn(e,l){const{type:s,sortable:c,filters:C,editRender:v,treeNode:I}=l,{props:S}=e,{editConfig:X}=S,{computeEditOpts:u,computeCheckboxOpts:g}=e.getComputeMaps(),x=g.value,B=u.value,N={renderHeader:Ve.renderDefaultHeader,renderCell:I?Ve.renderTreeCell:Ve.renderDefaultCell,renderFooter:Ve.renderDefaultFooter};switch(s){case"seq":N.renderHeader=Ve.renderSeqHeader,N.renderCell=I?Ve.renderTreeIndexCell:Ve.renderSeqCell;break;case"radio":N.renderHeader=Ve.renderRadioHeader,N.renderCell=I?Ve.renderTreeRadioCell:Ve.renderRadioCell;break;case"checkbox":N.renderHeader=Ve.renderCheckboxHeader,N.renderCell=x.checkField?I?Ve.renderTreeSelectionCellByProp:Ve.renderCheckboxCellByProp:I?Ve.renderTreeSelectionCell:Ve.renderCheckboxCell;break;case"expand":N.renderCell=Ve.renderExpandCell,N.renderData=Ve.renderExpandData;break;case"html":N.renderCell=I?Ve.renderTreeHTMLCell:Ve.renderHTMLCell,C&&c?N.renderHeader=Ve.renderSortAndFilterHeader:c?N.renderHeader=Ve.renderSortHeader:C&&(N.renderHeader=Ve.renderFilterHeader);break;default:X&&v?(N.renderHeader=Ve.renderEditHeader,N.renderCell=B.mode==="cell"?I?Ve.renderTreeCellEdit:Ve.renderCellEdit:I?Ve.renderTreeRowEdit:Ve.renderRowEdit):C&&c?N.renderHeader=Ve.renderSortAndFilterHeader:c?N.renderHeader=Ve.renderSortHeader:C&&(N.renderHeader=Ve.renderFilterHeader)}return Mi(e,l,N)},renderHeaderTitle(e){const{$table:l,column:s}=e,{slots:c,editRender:C,cellRender:v}=s,I=C||v,S=c?c.header:null;if(S)return Uo(e,l.callSlot(S,e));if(I){const X=Ul.get(I.name);if(X){const u=X.renderTableHeader||X.renderHeader;if(u)return Uo(e,Oo(u(I,e)))}}return Uo(e,It(s.getTitle(),1))},renderDefaultHeader(e){return Di(e).concat(Ve.renderHeaderTitle(e)).concat(Ti(e))},renderDefaultCell(e){const{$table:l,row:s,column:c}=e,{slots:C,editRender:v,cellRender:I}=c,S=v||I,X=C?C.default:null;if(X)return $t(e,l.callSlot(X,e));if(S){const x=Ul.get(S.name);if(x){const B=x.renderTableCell||x.renderCell,N=x.renderTableDefault||x.renderDefault,z=v?B:N;if(z)return $t(e,Oo(z(S,Object.assign({$type:v?"edit":"cell"},e))))}}const u=l.getCellLabel(s,c),g=v?v.placeholder:"";return $t(e,[f("span",{class:"vxe-cell--label"},[v&&Vo(u)?f("span",{class:"vxe-cell--placeholder"},It($o(g),1)):f("span",It(u,1))])])},renderTreeCell(e){return Ve.renderTreeIcon(e,Ve.renderDefaultCell(e))},renderDefaultFooter(e){return[f("span",{class:"vxe-cell--item"},Li(e))]},renderTreeIcon(e,l){const{$table:s,isHidden:c}=e,{reactData:C,internalData:v}=s,{computeTreeOpts:I}=s.getComputeMaps(),{treeExpandedMaps:S,treeExpandLazyLoadedMaps:X}=C,{fullAllDataRowIdData:u}=v,g=I.value,{row:x,column:B,level:N}=e,{slots:z}=B,{indent:T,lazy:M,trigger:k,iconLoaded:b,showIcon:p,iconOpen:y,iconClose:O}=g,R=g.children||g.childrenField,H=g.hasChild||g.hasChildField,W=x[R],q=W&&W.length,ae=z?z.icon:null;let ce=!1,$=!1,Q=!1,ue=!1;const we={};if(ae)return s.callSlot(ae,e);if(!c){const me=re(s,x);if($=!!S[me],M){const Te=u[me];Q=!!X[me],ce=x[H],ue=!!Te.treeLoaded}}return(!k||k==="default")&&(we.onClick=me=>{s.triggerTreeExpandEvent(me,e)}),[f("div",{class:["vxe-cell--tree-node",{"is--active":$}],style:{paddingLeft:`${N*T}px`}},[p&&(M?ue?q:ce:q)?[f("div",Object.assign({class:"vxe-tree--btn-wrapper"},we),[f("i",{class:["vxe-tree--node-btn",Q?b||wt().TABLE_TREE_LOADED:$?y||wt().TABLE_TREE_OPEN:O||wt().TABLE_TREE_CLOSE]})])]:null,f("div",{class:"vxe-tree-cell"},l)])]},renderSeqHeader(e){const{$table:l,column:s}=e,{slots:c}=s,C=c?c.header:null;return Uo(e,C?l.callSlot(C,e):It(s.getTitle(),1))},renderSeqCell(e){const{$table:l,column:s}=e,{props:c}=l,{treeConfig:C}=c,{computeSeqOpts:v}=l.getComputeMaps(),I=v.value,{slots:S}=s,X=S?S.default:null;if(X)return $t(e,l.callSlot(X,e));const{seq:u}=e,g=I.seqMethod;return $t(e,[f("span",`${It(g?g(e):C?u:(I.startIndex||0)+u,1)}`)])},renderTreeIndexCell(e){return Ve.renderTreeIcon(e,Ve.renderSeqCell(e))},renderRadioHeader(e){const{$table:l,column:s}=e,{slots:c}=s,C=c?c.header:null,v=c?c.title:null;return Uo(e,C?l.callSlot(C,e):[f("span",{class:"vxe-radio--label"},v?l.callSlot(v,e):It(s.getTitle(),1))])},renderRadioCell(e){const{$table:l,column:s,isHidden:c}=e,{reactData:C}=l,{computeRadioOpts:v}=l.getComputeMaps(),{selectRadioRow:I}=C,S=v.value,{slots:X}=s,{labelField:u,checkMethod:g,visibleMethod:x}=S,{row:B}=e,N=X?X.default:null,z=X?X.radio:null,T=l.eqRow(B,I),M=!x||x({row:B});let k=!!g,b;c||(b={onClick(O){!k&&M&&l.triggerRadioRowEvent(O,e)}},g&&(k=!g({row:B})));const p=Object.assign(Object.assign({},e),{checked:T,disabled:k,visible:M});if(z)return $t(e,l.callSlot(z,p));const y=[];return M&&y.push(f("span",{class:["vxe-radio--icon",T?wt().TABLE_RADIO_CHECKED:wt().TABLE_RADIO_UNCHECKED]})),(N||u)&&y.push(f("span",{class:"vxe-radio--label"},N?l.callSlot(N,p):i.get(B,u))),$t(e,[f("span",Object.assign({class:["vxe-cell--radio",{"is--checked":T,"is--disabled":k}]},b),y)])},renderTreeRadioCell(e){return Ve.renderTreeIcon(e,Ve.renderRadioCell(e))},renderCheckboxHeader(e){const{$table:l,column:s,isHidden:c}=e,{reactData:C}=l,{computeIsAllCheckboxDisabled:v,computeCheckboxOpts:I}=l.getComputeMaps(),{isAllSelected:S,isIndeterminate:X}=C,u=v.value,{slots:g}=s,x=g?g.header:null,B=g?g.title:null,N=I.value,z=s.getTitle();let T;c||(T={onClick(k){u||l.triggerCheckAllEvent(k,!S)}});const M=Object.assign(Object.assign({},e),{checked:S,disabled:u,indeterminate:X});return x?Uo(M,l.callSlot(x,M)):(N.checkStrictly?!N.showHeader:N.showHeader===!1)?Uo(M,[f("span",{class:"vxe-checkbox--label"},B?l.callSlot(B,M):z)]):Uo(M,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":S,"is--disabled":u,"is--indeterminate":X}],title:cn("vxe.table.allTitle")},T),[f("span",{class:["vxe-checkbox--icon",X?wt().TABLE_CHECKBOX_INDETERMINATE:S?wt().TABLE_CHECKBOX_CHECKED:wt().TABLE_CHECKBOX_UNCHECKED]})].concat(B||z?[f("span",{class:"vxe-checkbox--label"},B?l.callSlot(B,M):z)]:[]))])},renderCheckboxCell(e){const{$table:l,row:s,column:c,isHidden:C}=e,{props:v,reactData:I}=l,{treeConfig:S}=v,{selectCheckboxMaps:X,treeIndeterminateMaps:u}=I,{computeCheckboxOpts:g}=l.getComputeMaps(),x=g.value,{labelField:B,checkMethod:N,visibleMethod:z}=x,{slots:T}=c,M=T?T.default:null,k=T?T.checkbox:null;let b=!1,p=!1;const y=!z||z({row:s});let O=!!N,R;if(!C){const q=re(l,s);p=!!X[q],R={onClick(ae){!O&&y&&l.triggerCheckRowEvent(ae,e,!p)}},N&&(O=!N({row:s})),S&&(b=!!u[q])}const H=Object.assign(Object.assign({},e),{checked:p,disabled:O,visible:y,indeterminate:b});if(k)return $t(e,l.callSlot(k,H));const W=[];return y&&W.push(f("span",{class:["vxe-checkbox--icon",b?wt().TABLE_CHECKBOX_INDETERMINATE:p?wt().TABLE_CHECKBOX_CHECKED:wt().TABLE_CHECKBOX_UNCHECKED]})),(M||B)&&W.push(f("span",{class:"vxe-checkbox--label"},M?l.callSlot(M,H):i.get(s,B))),$t(e,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":p,"is--disabled":O,"is--indeterminate":b,"is--hidden":!y}]},R),W)])},renderTreeSelectionCell(e){return Ve.renderTreeIcon(e,Ve.renderCheckboxCell(e))},renderCheckboxCellByProp(e){const{$table:l,row:s,column:c,isHidden:C}=e,{props:v,reactData:I}=l,{treeConfig:S}=v,{treeIndeterminateMaps:X}=I,{computeCheckboxOpts:u}=l.getComputeMaps(),g=u.value,{labelField:x,checkField:B,checkMethod:N,visibleMethod:z}=g,T=g.indeterminateField||g.halfField,{slots:M}=c,k=M?M.default:null,b=M?M.checkbox:null;let p=!1,y=!1;const O=!z||z({row:s});let R=!!N,H;if(!C){const ae=re(l,s);y=i.get(s,B),H={onClick(ce){!R&&O&&l.triggerCheckRowEvent(ce,e,!y)}},N&&(R=!N({row:s})),S&&(p=!!X[ae])}const W=Object.assign(Object.assign({},e),{checked:y,disabled:R,visible:O,indeterminate:p});if(b)return $t(e,l.callSlot(b,W));const q=[];return O&&(q.push(f("span",{class:["vxe-checkbox--icon",p?wt().TABLE_CHECKBOX_INDETERMINATE:y?wt().TABLE_CHECKBOX_CHECKED:wt().TABLE_CHECKBOX_UNCHECKED]})),(k||x)&&q.push(f("span",{class:"vxe-checkbox--label"},k?l.callSlot(k,W):i.get(s,x)))),$t(e,[f("span",Object.assign({class:["vxe-cell--checkbox",{"is--checked":y,"is--disabled":R,"is--indeterminate":T&&!y?s[T]:p,"is--hidden":!O}]},H),q)])},renderTreeSelectionCellByProp(e){return Ve.renderTreeIcon(e,Ve.renderCheckboxCellByProp(e))},renderExpandCell(e){const{$table:l,isHidden:s,row:c,column:C}=e,{reactData:v}=l,{rowExpandedMaps:I,rowExpandLazyLoadedMaps:S}=v,{computeExpandOpts:X}=l.getComputeMaps(),u=X.value,{lazy:g,labelField:x,iconLoaded:B,showIcon:N,iconOpen:z,iconClose:T,visibleMethod:M}=u,{slots:k}=C,b=k?k.default:null,p=k?k.icon:null;let y=!1,O=!1;if(p)return $t(e,l.callSlot(p,e));if(!s){const R=re(l,c);y=!!I[R],g&&(O=!!S[R])}return $t(e,[N&&(!M||M(e))?f("span",{class:["vxe-table--expanded",{"is--active":y}],onClick(R){l.triggerRowExpandEvent(R,e)}},[f("i",{class:["vxe-table--expand-btn",O?B||wt().TABLE_EXPAND_LOADED:y?z||wt().TABLE_EXPAND_OPEN:T||wt().TABLE_EXPAND_CLOSE]})]):js(l),b||x?f("span",{class:"vxe-table--expand-label"},b?l.callSlot(b,e):i.get(c,x)):js(l)])},renderExpandData(e){const{$table:l,column:s}=e,{slots:c,contentRender:C}=s,v=c?c.content:null;if(v)return l.callSlot(v,e);if(C){const I=Ul.get(C.name);if(I){const S=I.renderTableExpand||I.renderExpand;if(S)return Oo(S(C,e))}}return[]},renderHTMLCell(e){const{$table:l,column:s}=e,{slots:c}=s,C=c?c.default:null;return C?$t(e,l.callSlot(C,e)):$t(e,[f("span",{class:"vxe-cell--html",innerHTML:Ws(e)})])},renderTreeHTMLCell(e){return Ve.renderTreeIcon(e,Ve.renderHTMLCell(e))},renderSortAndFilterHeader(e){return Ve.renderDefaultHeader(e).concat(Ve.renderSortIcon(e)).concat(Ve.renderFilterIcon(e))},renderSortHeader(e){return Ve.renderDefaultHeader(e).concat(Ve.renderSortIcon(e))},renderSortIcon(e){const{$table:l,column:s}=e,{computeSortOpts:c}=l.getComputeMaps(),C=c.value,{showIcon:v,iconLayout:I,iconAsc:S,iconDesc:X}=C,{order:u}=s;return v?[f("span",{class:["vxe-cell--sort",`vxe-cell--sort-${I}-layout`]},[f("i",{class:["vxe-sort--asc-btn",S||wt().TABLE_SORT_ASC,{"sort--active":u==="asc"}],title:cn("vxe.table.sortAsc"),onClick(g){g.stopPropagation(),l.triggerSortEvent(g,s,"asc")}}),f("i",{class:["vxe-sort--desc-btn",X||wt().TABLE_SORT_DESC,{"sort--active":u==="desc"}],title:cn("vxe.table.sortDesc"),onClick(g){g.stopPropagation(),l.triggerSortEvent(g,s,"desc")}})])]:[]},renderFilterHeader(e){return Ve.renderDefaultHeader(e).concat(Ve.renderFilterIcon(e))},renderFilterIcon(e){const{$table:l,column:s,hasFilter:c}=e,{reactData:C}=l,{filterStore:v}=C,{computeFilterOpts:I}=l.getComputeMaps(),S=I.value,{showIcon:X,iconNone:u,iconMatch:g}=S;return X?[f("span",{class:["vxe-cell--filter",{"is--active":v.visible&&v.column===s}]},[f("i",{class:["vxe-filter--btn",c?g||wt().TABLE_FILTER_MATCH:u||wt().TABLE_FILTER_NONE],title:cn("vxe.table.filter"),onClick(x){l.triggerFilterEvent&&l.triggerFilterEvent(x,e.column,e)}})])]:[]},renderEditHeader(e){const{$table:l,column:s}=e,{props:c}=l,{computeEditOpts:C}=l.getComputeMaps(),{editConfig:v,editRules:I}=c,S=C.value,{sortable:X,filters:u,editRender:g}=s;let x=!1;if(I){const B=i.get(I,s.field);B&&(x=B.some(N=>N.required))}return(gt(v)?[x&&S.showAsterisk?f("i",{class:"vxe-cell--required-icon"}):null,gt(g)&&S.showIcon?f("i",{class:["vxe-cell--edit-icon",S.icon||wt().TABLE_EDIT]}):null]:[]).concat(Ve.renderDefaultHeader(e)).concat(X?Ve.renderSortIcon(e):[]).concat(u?Ve.renderFilterIcon(e):[])},renderRowEdit(e){const{$table:l,column:s}=e,{reactData:c}=l,{editStore:C}=c,{actived:v}=C,{editRender:I}=s;return Ve.runRenderer(e,gt(I)&&v&&v.row===e.row)},renderTreeRowEdit(e){return Ve.renderTreeIcon(e,Ve.renderRowEdit(e))},renderCellEdit(e){const{$table:l,column:s}=e,{reactData:c}=l,{editStore:C}=c,{actived:v}=C,{editRender:I}=s;return Ve.runRenderer(e,gt(I)&&v&&v.row===e.row&&v.column===e.column)},renderTreeCellEdit(e){return Ve.renderTreeIcon(e,Ve.renderCellEdit(e))},runRenderer(e,l){const{$table:s,column:c}=e,{slots:C,editRender:v,formatter:I}=c,S=C?C.default:null,X=C?C.edit:null,u=Ul.get(v.name),g=u?u.renderTableEdit||u.renderEdit:null,x=Object.assign({$type:"",isEdit:l},e);return l?(x.$type="edit",X?s.callSlot(X,x):g?Oo(g(v,x)):[]):S?$t(e,s.callSlot(S,x)):I?$t(e,[f("span",{class:"vxe-cell--label"},Ws(x))]):Ve.renderDefaultCell(x)}},{getI18n:Hi,renderer:Ps}=he,hl="body",Bi={mini:3,small:2,medium:1},zs=mo({name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},setup(e){const l=_t("$xeTable",{}),s=_t("xesize",null),{xID:c,props:C,context:v,reactData:I,internalData:S}=l,{refTableBody:X,refTableHeader:u,refTableFooter:g,refTableLeftBody:x,refTableRightBody:B,refScrollXHandleElem:N,refScrollYHandleElem:z}=l.getRefMaps(),{computeEditOpts:T,computeMouseOpts:M,computeSYOpts:k,computeEmptyOpts:b,computeKeyboardOpts:p,computeTooltipOpts:y,computeRadioOpts:O,computeExpandOpts:R,computeTreeOpts:H,computeCheckboxOpts:W,computeCellOpts:q,computeValidOpts:ae,computeRowOpts:ce,computeColumnOpts:$}=l.getComputeMaps(),Q=He(),ue=He(),we=He(),me=He(),Te=He(),A=He(),G=He(),_=()=>{if(s){const de=s.value;if(de)return Bi[de]||0}return 0},U=()=>{const{delayHover:de}=C,{lastScrollTime:ie,_isResize:Se}=I;return!!(Se||ie&&Date.now()<ie+de)},ne=(de,ie)=>{let Se=1;if(!de)return Se;const Ze=H.value,Be=Ze.children||Ze.childrenField,ye=de[Be];if(ye&&l.isTreeExpandByRow(de))for(let Ae=0;Ae<ye.length;Ae++)Se+=ne(ye[Ae]);return Se},j=(de,ie,Se)=>{let Ze=1;return Se&&(Ze=ne(ie[Se-1])),I.rowHeight*Ze-(Se?1:12-_())},K=de=>{const{row:ie,column:Se}=de,{afterFullData:Ze}=S,{treeConfig:Be}=C,ye=H.value,{slots:Ae,treeNode:Ne}=Se,{fullAllDataRowIdData:Ce}=S,le=re(l,ie),Fe=Ce[le];let Ee=0,ke=0,Pe=[];if(Fe&&(Ee=Fe.level,ke=Fe._index,Pe=Fe.items),Ae&&Ae.line)return l.callSlot(Ae.line,de);const Ue=l.eqRow(Ze[0],ie);return Be&&Ne&&(ye.showLine||ye.line)?[f("div",{class:"vxe-tree--line-wrapper"},[f("div",{class:"vxe-tree--line",style:{height:`${Ue?1:j(de,Pe,ke)}px`,left:`${Ee*ye.indent+(Ee?2-_():0)+16}px`}})])]:[]},J=(de,ie,Se,Ze,Be,ye,Ae,Ne,Ce,le,Fe,Ee)=>{const{fullAllDataRowIdData:ke}=S,{columnKey:Pe,height:Ue,showOverflow:ze,cellClassName:Je,cellStyle:We,align:Ge,spanMethod:lt,mouseConfig:Xe,editConfig:it,editRules:Rt,tooltipConfig:bo}=C,{tableData:Zt,overflowX:_o,currentColumn:bt,scrollYLoad:et,mergeList:St,editStore:Qt,isAllOverflow:Wt,validErrorMaps:Yt}=I,{afterFullData:Et}=S,Vt=q.value,Ot=ae.value,Wo=W.value,vo=T.value,tl=y.value,ol=ce.value,ll=k.value,m=$.value,{type:Mo,cellRender:io,editRender:lo,align:Hl,showOverflow:ao,className:Fo,treeNode:nl,slots:sl}=Ce,{verticalAlign:Bl}=Vt,{actived:Vl}=Qt,{rHeight:ko}=ll,{height:Io}=ol,rl=Ce.id,bl=lo||io,co=bl?Ps.get(bl.name):null,Mn=co?co.tableCellClassName||co.cellClassName:null,vl=co?co.tableCellStyle||co.cellStyle:"",il=tl.showAll,Fn=l.getColumnIndex(Ce),Nl=l.getVTColumnIndex(Ce),al=gt(lo);let Do=Se?Ce.fixed!==Se:Ce.fixed&&_o;const Po=i.isUndefined(ao)||i.isNull(ao)?ze:ao,xo=Po==="ellipsis",zo=Po==="title",Mt=Po===!0||Po==="tooltip",uo=zo||Mt||xo;let xl;const Xo={},kn=ke[ie],Zl=Hl||(co?co.tableCellAlign:"")||Ge,cl=Yt[`${ie}:${rl}`],In=Rt&&Ot.showMessage&&(Ot.message==="default"?Ue||Zt.length>1:Ot.message==="inline"),jt={colid:rl},Dt={$table:l,$grid:l.xegrid,isEdit:!1,seq:de,rowid:ie,row:Be,rowIndex:ye,$rowIndex:Ae,_rowIndex:Ne,column:Ce,columnIndex:Fn,$columnIndex:le,_columnIndex:Nl,fixed:Se,type:hl,isHidden:Do,level:Ze,visibleData:Et,data:Zt,items:Ee};if((zo||Mt||il||bo)&&(Xo.onMouseenter=mt=>{U()||(zo?hs(mt.currentTarget,Ce):(Mt||il)&&l.triggerBodyTooltipEvent(mt,Dt),l.dispatchEvent("cell-mouseenter",Object.assign({cell:mt.currentTarget},Dt),mt))}),(Mt||il||bo)&&(Xo.onMouseleave=mt=>{U()||((Mt||il)&&l.handleTargetLeaveEvent(mt),l.dispatchEvent("cell-mouseleave",Object.assign({cell:mt.currentTarget},Dt),mt))}),(Wo.range||Xe)&&(Xo.onMousedown=mt=>{l.triggerCellMousedownEvent(mt,Dt)}),Xo.onClick=mt=>{l.triggerCellClickEvent(mt,Dt)},Xo.onDblclick=mt=>{l.triggerCellDblclickEvent(mt,Dt)},St.length){const mt=Rr(St,Ne,Nl);if(mt){const{rowspan:no,colspan:To}=mt;if(!no||!To)return null;no>1&&(jt.rowspan=no),To>1&&(jt.colspan=To)}}else if(lt){const{rowspan:mt=1,colspan:no=1}=lt(Dt)||{};if(!mt||!no)return null;mt>1&&(jt.rowspan=mt),no>1&&(jt.colspan=no)}Do&&St&&(jt.colspan>1||jt.rowspan>1)&&(Do=!1),!Do&&it&&(lo||io)&&(vo.showStatus||vo.showUpdateStatus)&&(xl=l.isUpdateByRow(Be,Ce.field));const fo=[];if(Do&&ze&&Wt)fo.push(f("div",{class:["vxe-cell",{"c--title":zo,"c--tooltip":Mt,"c--ellipsis":xo}],style:{maxHeight:uo&&(ko||Io)?`${ko||Io}px`:""}}));else if(fo.push(...K(Dt),f("div",{class:["vxe-cell",{"c--title":zo,"c--tooltip":Mt,"c--ellipsis":xo}],style:{maxHeight:uo&&(ko||Io)?`${ko||Io}px`:""},title:zo?l.getCellLabel(Be,Ce):null},Ce.renderCell(Dt))),In&&cl){const mt=cl.rule,no=sl?sl.valid:null,To=Object.assign(Object.assign({},Dt),cl);fo.push(f("div",{class:["vxe-cell--valid-error-tip",Go(Ot.className,To)],style:mt&&mt.maxWidth?{width:`${mt.maxWidth}px`}:null},[f("div",{class:`vxe-cell--valid-error-wrapper vxe-cell--valid-error-theme-${Ot.theme||"normal"}`},[no?l.callSlot(no,To):[f("span",{class:"vxe-cell--valid-error-msg"},cl.content)]])]))}let dl="";return uo&&(ko||Io)?dl=`${ko||Io}px`:et&&(uo||(dl=`${kn.height||24}px`)),f("td",Object.assign(Object.assign(Object.assign({class:["vxe-body--column",rl,{[`col--${Zl}`]:Zl,[`col--vertical-${Bl}`]:Bl,[`col--${Mo}`]:Mo,"col--last":le===Fe.length-1,"col--tree-node":nl,"col--edit":al,"col--ellipsis":uo,"fixed--hidden":Do,"col--dirty":xl,"col--active":it&&al&&Vl.row===Be&&(Vl.column===Ce||vo.mode==="row"),"col--valid-error":!!cl,"col--current":bt===Ce},Go(Mn,Dt),Go(Fo,Dt),Go(Je,Dt)],key:Pe||m.useKey||ol.useKey?rl:le},jt),{style:Object.assign({height:dl},i.isFunction(vl)?vl(Dt):vl,i.isFunction(We)?We(Dt):We)}),Xo),fo)},ee=(de,ie,Se)=>{const{stripe:Ze,rowKey:Be,highlightHoverRow:ye,rowClassName:Ae,rowStyle:Ne,showOverflow:Ce,editConfig:le,treeConfig:Fe}=C,{hasFixedColumn:Ee,treeExpandedMaps:ke,scrollYLoad:Pe,rowExpandedMaps:Ue,expandColumn:ze,selectRadioRow:Je,pendingRowMaps:We,pendingRowList:Ge}=I,{fullAllDataRowIdData:lt}=S,Xe=W.value,it=O.value,Rt=H.value,bo=T.value,Zt=ce.value,{transform:_o}=Rt,bt=Rt.children||Rt.childrenField,et=[];return ie.forEach((St,Qt)=>{const Wt={};let Yt=Qt;Yt=l.getRowIndex(St),(Zt.isHover||ye)&&(Wt.onMouseenter=io=>{U()||l.triggerHoverEvent(io,{row:St,rowIndex:Yt})},Wt.onMouseleave=()=>{U()||l.clearHoverRow()}),Zt.drag&&(Wt.onDragstart=l.handleRowDragDragstartEvent,Wt.onDragend=l.handleRowDragDragendEvent,Wt.onDragover=l.handleRowDragDragoverEvent);const Et=re(l,St),Vt=lt[Et];let Ot=0,Wo=-1,vo=0;Vt&&(Ot=Vt.level,Wo=Vt.seq,vo=Vt._index);const tl={$table:l,seq:Wo,rowid:Et,fixed:de,type:hl,level:Ot,row:St,rowIndex:Yt,$rowIndex:Qt,_rowIndex:vo},ol=ze&&!!Ue[Et];let ll=!1,m=[],Mo=!1;if(le&&(Mo=l.isInsertByRow(St)),Fe&&!Pe&&!_o&&(m=St[bt],ll=m&&m.length>0&&!!ke[Et]),et.push(f("tr",Object.assign({class:["vxe-body--row",Fe?`row--level-${Ot}`:"",{"row--stripe":Ze&&(l.getVTRowIndex(St)+1)%2===0,"is--new":Mo,"is--expand-row":ol,"is--expand-tree":ll,"row--new":Mo&&(bo.showStatus||bo.showInsertStatus),"row--radio":it.highlight&&l.eqRow(Je,St),"row--checked":Xe.highlight&&l.isCheckedByCheckboxRow(St),"row--pending":Ge.length&&!!We[Et]},Go(Ae,tl)],rowid:Et,style:Ne?i.isFunction(Ne)?Ne(tl):Ne:null,key:Be||Zt.useKey||Zt.drag||Fe?Et:Qt},Wt),Se.map((io,lo)=>J(Wo,Et,de,Ot,St,Yt,Qt,vo,io,lo,Se,ie)))),ol){const io=R.value,{height:lo,padding:Hl}=io,ao={};lo&&(ao.height=`${lo}px`),Fe&&(ao.paddingLeft=`${Ot*Rt.indent+30}px`);const{showOverflow:Fo}=ze,nl=i.isUndefined(Fo)||i.isNull(Fo)?Ce:Fo,sl={$table:l,seq:Wo,column:ze,fixed:de,type:hl,level:Ot,row:St,rowIndex:Yt,$rowIndex:Qt,_rowIndex:vo};et.push(f("tr",Object.assign({class:["vxe-body--expanded-row",{"is--padding":Hl}],key:`expand_${Et}`,style:Ne?i.isFunction(Ne)?Ne(sl):Ne:null},Wt),[f("td",{class:{"vxe-body--expanded-column":1,"fixed--hidden":de&&!Ee,"col--ellipsis":nl},colspan:Se.length},[f("div",{class:{"vxe-body--expanded-cell":1,"is--ellipsis":lo},style:ao},[ze.renderData(sl)])])]))}ll&&et.push(...ee(de,m,Se))}),et},be=de=>{const{fixedType:ie}=e,{lastScrollTop:Se,lastScrollLeft:Ze}=S,Be=u.value,ye=X.value,Ae=g.value,Ne=x.value,Ce=B.value,le=Q.value,Fe=Be?Be.$el:null,Ee=Ae?Ae.$el:null,ke=ye.$el,Pe=Ne?Ne.$el:null,Ue=Ce?Ce.$el:null,ze=le.scrollTop,Je=ke.scrollLeft,We=Je!==Ze,Ge=ze!==Se,lt=N.value,Xe=z.value;Xe?Xe.scrollTop=ze:Ge&&(Pe&&ie==="left"?(yt(ke,ze),yt(Ue,ze)):Ue&&ie==="right"?(yt(ke,ze),yt(Pe,ze)):(yt(Pe,ze),yt(Ue,ze)),l.handleScrollEvent(de,Ge,We,ze,Je,{type:hl,fixed:ie})),lt?lt.scrollLeft=Je:We&&(At(Fe,Je),At(Ee,Je),l.handleScrollEvent(de,Ge,We,ze,Je,{type:hl,fixed:ie}))};let pe,Ie=0,Re=0,xe=0,Ye=!1;const ge=(de,ie,Se,Ze,Be)=>{const{elemStore:ye}=S,{scrollXLoad:Ae,scrollYLoad:Ne}=I,Ce=X.value,le=x.value,Fe=B.value,Ee=le?le.$el:null,ke=Fe?Fe.$el:null,Pe=Ce.$el,Ue=ye["main-body-ySpace"],ze=Ue?Ue.value:null,Je=ye["main-body-xSpace"],We=Je?Je.value:null,Ge=Ne&&ze?ze.clientHeight:Pe.clientHeight,lt=Ae&&We?We.clientWidth:Pe.clientWidth,Xe=Ye===ie?Math.max(0,Ie-xe):0;Ye=ie,Ie=Math.abs(ie?Se-Xe:Se+Xe),Re=0,xe=0,clearTimeout(pe);const it=()=>{if(xe<Ie){const{fixedType:Rt}=e;Re=Math.max(5,Math.floor(Re*1.5)),xe=xe+Re,xe>Ie&&(Re=Re-(xe-Ie));const{scrollTop:bo,clientHeight:Zt,scrollHeight:_o}=Pe,bt=bo+Re*(ie?-1:1);Pe.scrollTop=bt,Ee&&(Ee.scrollTop=bt),ke&&(ke.scrollTop=bt),(ie?bt<_o-Zt:bt>=0)&&(pe=setTimeout(it,10)),l.dispatchEvent("scroll",{type:hl,fixed:Rt,scrollTop:Pe.scrollTop,scrollLeft:Pe.scrollLeft,scrollHeight:Pe.scrollHeight,scrollWidth:Pe.scrollWidth,bodyHeight:Ge,bodyWidth:lt,isX:Ze,isY:Be},de)}};it()},Oe=de=>{const{deltaY:ie,deltaX:Se}=de,{highlightHoverRow:Ze}=C,{scrollYLoad:Be}=I,{lastScrollTop:ye,lastScrollLeft:Ae}=S,Ne=ce.value,Ce=X.value,le=Q.value,Fe=Ce.$el,Ee=ie,ke=Se,Pe=Ee<0;if(Pe?le.scrollTop<=0:le.scrollTop>=le.scrollHeight-le.clientHeight)return;const Ue=le.scrollTop+Ee,ze=Fe.scrollLeft+ke,Je=ze!==Ae,We=Ue!==ye;We&&(de.preventDefault(),S.lastScrollTop=Ue,S.lastScrollLeft=ze,I.lastScrollTime=Date.now(),(Ne.isHover||Ze)&&l.clearHoverRow(),ge(de,Pe,Ee,Je,We),Be&&l.triggerScrollYEvent(de))};return Al(()=>{oe(()=>{const{fixedType:de}=e,{elemStore:ie}=S,Se=`${de||"main"}-body-`;ie[`${Se}wrapper`]=Q,ie[`${Se}table`]=ue,ie[`${Se}colgroup`]=we,ie[`${Se}list`]=me,ie[`${Se}xSpace`]=Te,ie[`${Se}ySpace`]=A,ie[`${Se}emptyBlock`]=G})}),dr(()=>{clearTimeout(pe)}),Ll(()=>{const{fixedType:de}=e,{elemStore:ie}=S,Se=`${de||"main"}-body-`;ie[`${Se}wrapper`]=null,ie[`${Se}table`]=null,ie[`${Se}colgroup`]=null,ie[`${Se}list`]=null,ie[`${Se}xSpace`]=null,ie[`${Se}ySpace`]=null,ie[`${Se}emptyBlock`]=null}),()=>{let{fixedColumn:de,fixedType:ie,tableColumn:Se}=e;const{keyboardConfig:Ze,showOverflow:Be,spanMethod:ye,mouseConfig:Ae}=C,{tableData:Ne,mergeList:Ce,scrollYLoad:le,isAllOverflow:Fe,isDragRowMove:Ee}=I,{visibleColumn:ke}=S,{slots:Pe}=v,Ue=ce.value,ze=k.value,Je=b.value,We=p.value,Ge=M.value;ie&&(!I.expandColumn&&(le||Be&&Fe)&&!Ce.length&&!ye&&!(Ze&&We.isMerge)?Se=de:Se=ke);let lt;const Xe=Pe?Pe.empty:null;if(Xe)lt=l.callSlot(Xe,{$table:l,$grid:l.xegrid});else{const it=Je.name?Ps.get(Je.name):null,Rt=it?it.renderTableEmpty||it.renderTableEmptyView||it.renderEmpty:null;Rt?lt=Oo(Rt(Je,{$table:l})):lt=C.emptyText||Hi("vxe.table.emptyText")}return f("div",Object.assign({ref:Q,class:["vxe-table--body-wrapper",ie?`fixed-${ie}--wrapper`:"body--wrapper"],xid:c,onScroll:be},ze.mode==="wheel"?{onWheel:Oe}:{}),[ie?Le():f("div",{ref:Te,class:"vxe-body--x-space"}),f("div",{ref:A,class:"vxe-body--y-space"}),f("table",{ref:ue,class:"vxe-table--body",xid:c,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:we},Se.map((it,Rt)=>f("col",{name:it.id,key:Rt}))),Ue.drag?f(is,{name:`vxe-body--row-list${Ee?"":"-disabled"}`,tag:"tbody"},{default:()=>ee(ie,Ne,Se)}):f("tbody",{ref:me},ee(ie,Ne,Se))]),f("div",{class:"vxe-table--checkbox-range"}),Ae&&Ge.area?f("div",{class:"vxe-table--cell-area"},[f("span",{class:"vxe-table--cell-main-area"},Ge.extension?[f("span",{class:"vxe-table--cell-main-area-btn",onMousedown(it){l.triggerCellExtendMousedownEvent(it,{$table:l,fixed:ie,type:hl})}})]:[]),f("span",{class:"vxe-table--cell-copy-area"}),f("span",{class:"vxe-table--cell-extend-area"}),f("span",{class:"vxe-table--cell-multi-area"}),f("span",{class:"vxe-table--cell-active-area"})]):null,ie?null:f("div",{class:"vxe-table--empty-block",ref:G},[f("div",{class:"vxe-table--empty-content"},lt)])])}}}),{renderer:Vi}=he,Qn="header",Xs=mo({name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,tableGroupColumn:Array,fixedColumn:Array,fixedType:{type:String,default:null}},setup(e){const l=_t("$xeTable",{}),{xID:s,props:c,reactData:C,internalData:v}=l,{refElem:I,refTableBody:S,refLeftContainer:X,refRightContainer:u,refCellResizeBar:g}=l.getRefMaps(),{computeColumnOpts:x}=l.getComputeMaps(),B=He([]),N=He(),z=He(),T=He(),M=He(),k=He(),b=He(),p=()=>{const{isGroup:R}=C;B.value=R?Ri(e.tableGroupColumn):[]},y=(R,H)=>{const{column:W}=H,{fixedType:q}=e,ae=S.value,ce=X.value,$=u.value,Q=g.value,{clientX:ue}=R,we=N.value,me=R.target,Te=H.cell=me.parentNode;let A=0;const G=ae.$el,_=Ci(me,we),U=me.clientWidth,ne=Math.floor(U/2),j=Oi(H)-ne;let K=_.left-Te.clientWidth+U+j,J=_.left+ne;const ee=document.onmousemove,be=document.onmouseup,pe=q==="left",Ie=q==="right",Re=I.value;let xe=0;if(pe||Ie){const ge=pe?"nextElementSibling":"previousElementSibling";let Oe=Te[ge];for(;Oe&&!ml(Oe,"fixed--hidden");)ml(Oe,"col--group")||(xe+=Oe.offsetWidth),Oe=Oe[ge];Ie&&$&&(J=$.offsetLeft+xe)}const Ye=function(ge){ge.stopPropagation(),ge.preventDefault();const Oe=ge.clientX-ue;let _e=J+Oe;const de=q?0:G.scrollLeft;pe?_e=Math.min(_e,($?$.offsetLeft:G.clientWidth)-xe-j):Ie?(K=(ce?ce.clientWidth:0)+xe+j,_e=Math.min(_e,J+Te.clientWidth-j)):K=Math.max(G.scrollLeft,K),A=Math.max(_e,K),Q.style.left=`${A-de}px`};C._isResize=!0,po(Re,"drag--resize"),Q.style.display="block",document.onmousemove=Ye,document.onmouseup=function(ge){document.onmousemove=ee,document.onmouseup=be;const Oe=W.renderWidth+(Ie?J-A:A-J);W.resizeWidth=Oe,Q.style.display="none",C._isResize=!1,v._lastResizeTime=Date.now(),l.analyColumnWidth(),l.recalculate(!0).then(()=>{l.saveCustomStore("update:visible"),l.updateCellAreas(),l.dispatchEvent("resizable-change",Object.assign(Object.assign({},H),{resizeWidth:Oe}),ge),setTimeout(()=>l.recalculate(!0),300)}),Kt(Re,"drag--resize")},Ye(R),l.closeMenu&&l.closeMenu()};return pt(()=>e.tableColumn,p),Al(()=>{oe(()=>{const{fixedType:R}=e,{internalData:H}=l,{elemStore:W}=H,q=`${R||"main"}-header-`;W[`${q}wrapper`]=N,W[`${q}table`]=z,W[`${q}colgroup`]=T,W[`${q}list`]=M,W[`${q}xSpace`]=k,W[`${q}repair`]=b,p()})}),Ll(()=>{const{fixedType:R}=e,{internalData:H}=l,{elemStore:W}=H,q=`${R||"main"}-header-`;W[`${q}wrapper`]=null,W[`${q}table`]=null,W[`${q}colgroup`]=null,W[`${q}list`]=null,W[`${q}xSpace`]=null,W[`${q}repair`]=null}),()=>{const{fixedType:R,fixedColumn:H,tableColumn:W}=e,{resizable:q,border:ae,columnKey:ce,headerRowClassName:$,headerCellClassName:Q,headerRowStyle:ue,headerCellStyle:we,showHeaderOverflow:me,headerAlign:Te,align:A,mouseConfig:G}=c,{isGroup:_,currentColumn:U,scrollXLoad:ne,overflowX:j,scrollbarWidth:K}=C,{visibleColumn:J}=v,ee=x.value;let be=B.value,pe=W;return _?pe=J:(R&&(ne||me)&&(pe=H),be=[pe]),f("div",{ref:N,class:["vxe-table--header-wrapper",R?`fixed-${R}--wrapper`:"body--wrapper"],xid:s},[R?Le():f("div",{ref:k,class:"vxe-body--x-space"}),f("table",{ref:z,class:"vxe-table--header",xid:s,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:T},pe.map((Ie,Re)=>f("col",{name:Ie.id,key:Re})).concat(K?[f("col",{name:"col_gutter"})]:[])),f("thead",{ref:M},be.map((Ie,Re)=>f("tr",{class:["vxe-header--row",$?i.isFunction($)?$({$table:l,$rowIndex:Re,fixed:R,type:Qn}):$:""],style:ue?i.isFunction(ue)?ue({$table:l,$rowIndex:Re,fixed:R,type:Qn}):ue:null},Ie.map((xe,Ye)=>{const{type:ge,showHeaderOverflow:Oe,headerAlign:_e,align:de,headerClassName:ie,editRender:Se,cellRender:Ze}=xe,Be=xe.id,ye=Se||Ze,Ae=ye?Vi.get(ye.name):null,Ne=xe.children&&xe.children.length,Ce=R?xe.fixed!==R&&!Ne:!!xe.fixed&&j,le=i.eqNull(Oe)?me:Oe,Fe=_e||(Ae?Ae.tableHeaderCellAlign:"")||Te||de||(Ae?Ae.tableCellAlign:"")||A;let Ee=le==="ellipsis";const ke=le==="title",Pe=le===!0||le==="tooltip";let Ue=ke||Pe||Ee;const ze=xe.filters&&xe.filters.some(Xe=>Xe.checked),Je=l.getColumnIndex(xe),We=l.getVTColumnIndex(xe),Ge={$table:l,$grid:l.xegrid,$rowIndex:Re,column:xe,columnIndex:Je,$columnIndex:Ye,_columnIndex:We,fixed:R,type:Qn,isHidden:Ce,hasFilter:ze},lt={onClick:Xe=>l.triggerHeaderCellClickEvent(Xe,Ge),onDblclick:Xe=>l.triggerHeaderCellDblclickEvent(Xe,Ge)};return ne&&!Ue&&(Ee=Ue=!0),G&&(lt.onMousedown=Xe=>l.triggerHeaderCellMousedownEvent(Xe,Ge)),f("th",Object.assign(Object.assign({class:["vxe-header--column",Be,{[`col--${Fe}`]:Fe,[`col--${ge}`]:ge,"col--last":Ye===Ie.length-1,"col--fixed":xe.fixed,"col--group":Ne,"col--ellipsis":Ue,"fixed--hidden":Ce,"is--sortable":xe.sortable,"col--filter":!!xe.filters,"is--filter-active":ze,"col--current":U===xe},ie?i.isFunction(ie)?ie(Ge):ie:"",Q?i.isFunction(Q)?Q(Ge):Q:""],colid:Be,colspan:xe.colSpan>1?xe.colSpan:null,rowspan:xe.rowSpan>1?xe.rowSpan:null,style:we?i.isFunction(we)?we(Ge):we:null},lt),{key:ce||ee.useKey||Ne?Be:Ye}),[f("div",{class:["vxe-cell",{"c--title":ke,"c--tooltip":Pe,"c--ellipsis":Ee}]},xe.renderHeader(Ge)),!Ce&&!Ne&&(i.isBoolean(xe.resizable)?xe.resizable:ee.resizable||q)?f("div",{class:["vxe-resizable",{"is--line":!ae||ae==="none"}],onMousedown:Xe=>y(Xe,Ge)}):null])}).concat(K?[f("th",{class:"vxe-header--gutter col--gutter"})]:[]))))]),f("div",{ref:b,class:"vxe-table--header-border-line"})])}}}),{renderer:Ni}=he,Jn="footer";function $i(e,l,s){for(let c=0;c<e.length;c++){const{row:C,col:v,rowspan:I,colspan:S}=e[c];if(v>-1&&C>-1&&I&&S){if(C===l&&v===s)return{rowspan:I,colspan:S};if(l>=C&&l<C+I&&s>=v&&s<v+S)return{rowspan:0,colspan:0}}}}const Ks=mo({name:"VxeTableFooter",props:{footerTableData:{type:Array,default:()=>[]},tableColumn:{type:Array,default:()=>[]},fixedColumn:{type:Array,default:()=>[]},fixedType:{type:String,default:null}},setup(e){const l=_t("$xeTable",{}),{xID:s,props:c,reactData:C,internalData:v}=l,{refTableHeader:I,refTableBody:S,refScrollXHandleElem:X}=l.getRefMaps(),{computeTooltipOpts:u,computeColumnOpts:g}=l.getComputeMaps(),x=He(),B=He(),N=He(),z=He(),T=He(),M=b=>{const{fixedType:p}=e,y=I.value,O=S.value,R=y?y.$el:null,H=x.value,W=O.$el,q=H.scrollLeft,ae=X.value;if(ae)ae.scrollLeft=q;else{const Q=W.scrollTop;At(R,q),At(W,q),l.handleScrollEvent(b,!1,!0,Q,q,{type:Jn,fixed:p})}};return Al(()=>{oe(()=>{const{fixedType:b}=e,{elemStore:p}=v,y=`${b||"main"}-footer-`;p[`${y}wrapper`]=x,p[`${y}table`]=B,p[`${y}colgroup`]=N,p[`${y}list`]=z,p[`${y}xSpace`]=T})}),Ll(()=>{const{fixedType:b}=e,{elemStore:p}=v,y=`${b||"main"}-footer-`;p[`${y}wrapper`]=null,p[`${y}table`]=null,p[`${y}colgroup`]=null,p[`${y}list`]=null,p[`${y}xSpace`]=null}),()=>{let{fixedType:b,fixedColumn:p,tableColumn:y,footerTableData:O}=e;const{footerRowClassName:R,footerCellClassName:H,footerRowStyle:W,footerCellStyle:q,footerAlign:ae,footerSpanMethod:ce,align:$,columnKey:Q,showFooterOverflow:ue}=c,{visibleColumn:we}=v,{scrollXLoad:me,overflowX:Te,scrollbarWidth:A,currentColumn:G,mergeFooterList:_}=C,U=u.value,ne=g.value;return b&&(!C.expandColumn&&(me||ue)&&(!_.length||!ce)?y=p:y=we),f("div",{ref:x,class:["vxe-table--footer-wrapper",b?`fixed-${b}--wrapper`:"body--wrapper"],xid:s,onScroll:M},[b?Le():f("div",{ref:T,class:"vxe-body--x-space"}),f("table",{ref:B,class:"vxe-table--footer",xid:s,cellspacing:0,cellpadding:0,border:0},[f("colgroup",{ref:N},y.map((j,K)=>f("col",{name:j.id,key:K})).concat(A?[f("col",{name:"col_gutter"})]:[])),f("tfoot",{ref:z},O.map((j,K)=>{const J=K,ee={$table:l,row:j,_rowIndex:K,$rowIndex:J,fixed:b,type:Jn};return f("tr",{class:["vxe-footer--row",R?i.isFunction(R)?R(ee):R:""],style:W?i.isFunction(W)?W(ee):W:null},y.map((be,pe)=>{const{type:Ie,showFooterOverflow:Re,footerAlign:xe,align:Ye,footerClassName:ge,editRender:Oe,cellRender:_e}=be,de=Oe||_e,ie=de?Ni.get(de.name):null,Se=U.showAll,Ze=be.children&&be.children.length,Be=b?be.fixed!==b&&!Ze:be.fixed&&Te,ye=i.eqNull(Re)?ue:Re,Ae=xe||(ie?ie.tableFooterCellAlign:"")||ae||Ye||(ie?ie.tableCellAlign:"")||$;let Ne=ye==="ellipsis";const Ce=ye==="title",le=ye===!0||ye==="tooltip";let Fe=Ce||le||Ne;const Ee={colid:be.id},ke={},Pe=l.getColumnIndex(be),Ue=l.getVTColumnIndex(be),ze=Ue,Je={$table:l,$grid:l.xegrid,row:j,rowIndex:K,_rowIndex:K,$rowIndex:J,column:be,columnIndex:Pe,$columnIndex:pe,_columnIndex:Ue,itemIndex:ze,items:j,fixed:b,type:Jn,data:O};if(me&&!Fe&&(Ne=Fe=!0),(Ce||le||Se)&&(ke.onMouseenter=We=>{Ce?hs(We.currentTarget,be):(le||Se)&&l.triggerFooterTooltipEvent(We,Je)}),(le||Se)&&(ke.onMouseleave=We=>{(le||Se)&&l.handleTargetLeaveEvent(We)}),ke.onClick=We=>{l.dispatchEvent("footer-cell-click",Object.assign({cell:We.currentTarget},Je),We)},ke.onDblclick=We=>{l.dispatchEvent("footer-cell-dblclick",Object.assign({cell:We.currentTarget},Je),We)},_.length){const We=$i(_,K,Ue);if(We){const{rowspan:Ge,colspan:lt}=We;if(!Ge||!lt)return null;Ge>1&&(Ee.rowspan=Ge),lt>1&&(Ee.colspan=lt)}}else if(ce){const{rowspan:We=1,colspan:Ge=1}=ce(Je)||{};if(!We||!Ge)return null;We>1&&(Ee.rowspan=We),Ge>1&&(Ee.colspan=Ge)}return f("td",Object.assign(Object.assign(Object.assign(Object.assign({class:["vxe-footer--column",be.id,{[`col--${Ae}`]:Ae,[`col--${Ie}`]:Ie,"col--last":pe===y.length-1,"fixed--hidden":Be,"col--ellipsis":Fe,"col--current":G===be},Go(ge,Je),Go(H,Je)]},Ee),{style:q?i.isFunction(q)?q(Je):q:null}),ke),{key:Q||ne.useKey?be.id:pe}),[f("div",{class:["vxe-cell",{"c--title":Ce,"c--tooltip":le,"c--ellipsis":Ne}]},be.renderFooter(Je))])}).concat(A?[f("td",{class:"vxe-footer--gutter col--gutter"})]:[]))}))])])}}}),{getConfig:xt}=he,ji={id:[String,Function],data:Array,height:[Number,String],minHeight:{type:[Number,String],default:()=>xt().table.minHeight},maxHeight:[Number,String],resizable:{type:Boolean,default:()=>xt().table.resizable},stripe:{type:Boolean,default:()=>xt().table.stripe},border:{type:[Boolean,String],default:()=>xt().table.border},padding:{type:Boolean,default:()=>xt().table.padding},round:{type:Boolean,default:()=>xt().table.round},size:{type:String,default:()=>xt().table.size||xt().size},fit:{type:Boolean,default:()=>xt().table.fit},loading:Boolean,align:{type:String,default:()=>xt().table.align},headerAlign:{type:String,default:()=>xt().table.headerAlign},footerAlign:{type:String,default:()=>xt().table.footerAlign},showHeader:{type:Boolean,default:()=>xt().table.showHeader},highlightCurrentRow:{type:Boolean,default:()=>xt().table.highlightCurrentRow},highlightHoverRow:{type:Boolean,default:()=>xt().table.highlightHoverRow},highlightCurrentColumn:{type:Boolean,default:()=>xt().table.highlightCurrentColumn},highlightHoverColumn:{type:Boolean,default:()=>xt().table.highlightHoverColumn},highlightCell:Boolean,showFooter:Boolean,footerData:Array,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],cellStyle:[Object,Function],headerCellStyle:[Object,Function],footerCellStyle:[Object,Function],rowStyle:[Object,Function],headerRowStyle:[Object,Function],footerRowStyle:[Object,Function],mergeCells:Array,mergeFooterItems:Array,spanMethod:Function,footerSpanMethod:Function,showOverflow:{type:[Boolean,String],default:()=>xt().table.showOverflow},showHeaderOverflow:{type:[Boolean,String],default:()=>xt().table.showHeaderOverflow},showFooterOverflow:{type:[Boolean,String],default:()=>xt().table.showFooterOverflow},columnKey:Boolean,rowKey:Boolean,rowId:{type:String,default:()=>xt().table.rowId},zIndex:Number,emptyText:{type:String,default:()=>xt().table.emptyText},keepSource:{type:Boolean,default:()=>xt().table.keepSource},autoResize:{type:Boolean,default:()=>xt().table.autoResize},syncResize:[Boolean,String,Number],resizeConfig:Object,columnConfig:Object,cellConfig:Object,rowConfig:Object,dragConfig:Object,resizableConfig:Object,seqConfig:Object,sortConfig:Object,filterConfig:Object,radioConfig:Object,checkboxConfig:Object,tooltipConfig:Object,exportConfig:Object,importConfig:Object,printConfig:Object,expandConfig:Object,treeConfig:Object,menuConfig:Object,mouseConfig:Object,areaConfig:Object,keyboardConfig:Object,clipConfig:Object,fnrConfig:Object,editConfig:Object,validConfig:Object,editRules:Object,loadingConfig:Object,emptyRender:Object,customConfig:Object,scrollX:Object,scrollY:Object,animat:{type:Boolean,default:()=>xt().table.animat},delayHover:{type:Number,default:()=>xt().table.delayHover},params:Object},_i=["update:data","keydown-start","keydown","keydown-end","paste","copy","cut","current-change","radio-change","checkbox-change","checkbox-all","checkbox-range-start","checkbox-range-change","checkbox-range-end","checkbox-range-select","cell-click","cell-dblclick","cell-menu","cell-mouseenter","cell-mouseleave","cell-selected","cell-delete-value","cell-backspace-value","header-cell-click","header-cell-dblclick","header-cell-menu","footer-cell-click","footer-cell-dblclick","footer-cell-menu","clear-merge","sort-change","clear-sort","filter-change","filter-visible","clear-filter","resizable-change","toggle-row-expand","toggle-tree-expand","menu-click","edit-closed","row-dragstart","row-dragover","row-dragend","edit-actived","edit-activated","edit-disabled","valid-error","scroll","scroll-boundary","custom","change-fnr","open-fnr","show-fnr","hide-fnr","fnr-change","fnr-find","fnr-find-all","fnr-replace","fnr-replace-all","cell-area-copy","cell-area-cut","cell-area-paste","cell-area-merge","clear-cell-area-selection","clear-cell-area-merge","header-cell-area-selection","cell-area-selection-invalid","cell-area-selection-start","cell-area-selection-drag","cell-area-selection-end","cell-area-extension-start","cell-area-extension-drag","cell-area-extension-end","cell-area-selection-all-start","cell-area-selection-all-end","cell-area-arrows-start","cell-area-arrows-end","active-cell-change-start","active-cell-change-end"],{getI18n:at,getIcon:Ht,renderEmptyElement:dn}=he,Wi=mo({name:"TableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},setup(e){const l=he.getComponent("VxeModal"),s=he.getComponent("VxeDrawer"),c=he.getComponent("VxeButton"),C=he.getComponent("VxeNumberInput"),v=he.getComponent("VxeTooltip"),I=he.getComponent("VxeRadioGroup"),S=_t("$xeTable",{}),{props:X,reactData:u}=S,{computeCustomOpts:g,computeColumnOpts:x,computeIsMaxFixedColumn:B,computeResizableOpts:N}=S.getComputeMaps(),z=He(),T=He(),M=He(),k=He();let b;const p=j=>{const{customStore:K}=e;K.activeWrapper=!0,S.customOpenEvent(j)},y=j=>{const{customStore:K}=e;K.activeWrapper=!1,setTimeout(()=>{!K.activeBtn&&!K.activeWrapper&&S.customCloseEvent(j)},300)},O=({$event:j})=>{S.saveCustom(),S.closeCustom(),S.emitCustomEvent("confirm",j)},R=({$event:j})=>{S.closeCustom(),S.emitCustomEvent("close",j)},H=({$event:j})=>{S.cancelCustom(),S.closeCustom(),S.emitCustomEvent("cancel",j)},W=j=>{S.resetCustom(!0),S.closeCustom(),S.emitCustomEvent("reset",j)},q=({$event:j})=>{he.modal?he.modal.confirm({content:at("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(K=>{K==="confirm"&&W(j)}):W(j)},ae=j=>{const{customColumnList:K}=u,J=i.findTree(K,ee=>ee===j);if(J&&J.parent){const{parent:ee}=J;ee.children&&ee.children.length&&(ee.renderVisible=ee.children.every(be=>be.renderVisible),ee.halfVisible=!ee.renderVisible&&ee.children.some(be=>be.renderVisible||be.halfVisible),ae(ee))}},ce=j=>{const K=!j.renderVisible;g.value.immediate?(i.eachTree([j],ee=>{ee.visible=K,ee.renderVisible=K,ee.halfVisible=!1}),S.handleCustom(),S.saveCustomStore("update:visible")):i.eachTree([j],ee=>{ee.renderVisible=K,ee.halfVisible=!1}),ae(j),S.checkCustomStatus()},$=(j,K)=>{const J=B.value;g.value.immediate?(j.renderFixed===K?i.eachTree([j],be=>{be.fixed="",be.renderFixed=""}):(!J||j.renderFixed)&&i.eachTree([j],be=>{be.fixed=K,be.renderFixed=K}),S.handleCustom(),S.saveCustomStore("update:fixed")):j.renderFixed===K?i.eachTree([j],be=>{be.renderFixed=""}):(!J||j.renderFixed)&&i.eachTree([j],be=>{be.renderFixed=K})},Q=()=>{S.toggleCustomAllCheckbox()},ue=j=>{const ee=j.currentTarget.parentNode.parentNode,be=ee.getAttribute("colid"),pe=S.getColumnById(be);ee.draggable=!0,k.value=pe,po(ee,"active--drag-origin"),G(j)},we=j=>{const ee=j.currentTarget.parentNode.parentNode,be=M.value;ee.draggable=!1,k.value=null,Kt(ee,"active--drag-origin"),be&&(be.style.display="")},me=j=>{const K=new Image;j.dataTransfer&&j.dataTransfer.setDragImage(K,0,0)},Te=j=>{const{customColumnList:K}=u,J=g.value,ee=j.currentTarget,be=M.value;if(b){if(b!==ee){const pe=b.getAttribute("drag-pos"),Ie=ee.getAttribute("colid"),Re=S.getColumnById(Ie);if(!Re)return;const xe=i.findIndexOf(K,_e=>_e.id===Re.id),Ye=b.getAttribute("colid"),ge=S.getColumnById(Ye);if(!ge)return;K.splice(xe,1);const Oe=i.findIndexOf(K,_e=>_e.id===ge.id);K.splice(Oe+(pe==="bottom"?1:0),0,Re)}b.draggable=!1,b.removeAttribute("drag-pos"),Kt(b,"active--drag-target")}k.value=null,ee.draggable=!1,ee.removeAttribute("drag-pos"),be&&(be.style.display=""),Kt(ee,"active--drag-target"),Kt(ee,"active--drag-origin"),J.immediate&&(i.eachTree(K,(pe,Ie,Re,xe,Ye)=>{if(!Ye){const ge=Ie+1;pe.renderSortNumber=ge}}),S.handleCustom(),S.saveCustomStore("update:sort"))},A=j=>{const K=j.currentTarget;b!==K&&Kt(b,"active--drag-target");const J=K.getAttribute("colid"),ee=S.getColumnById(J);if(ee&&ee.level===1){j.preventDefault();const pe=j.clientY-K.getBoundingClientRect().y<K.clientHeight/2?"top":"bottom";po(K,"active--drag-target"),K.setAttribute("drag-pos",pe),b=K}G(j)},G=j=>{const K=M.value,J=T.value;if(J&&K){const ee=J.parentNode,be=ee.getBoundingClientRect();K.style.display="block",K.style.top=`${Math.min(ee.clientHeight-ee.scrollTop-K.clientHeight,j.clientY-be.y)}px`,K.style.left=`${Math.min(ee.clientWidth-ee.scrollLeft-K.clientWidth-16,j.clientX-be.x)}px`}},_=()=>{const{customStore:j}=e,{customColumnList:K}=u,J=g.value,{maxHeight:ee}=j,{checkMethod:be,visibleMethod:pe,allowVisible:Ie,allowSort:Re,allowFixed:xe,trigger:Ye,placement:ge}=J,Oe=B.value,_e=J.slots||{},de=_e.header,ie=_e.top,Se=_e.bottom,Ze=_e.default,Be=_e.footer,ye=[],Ae={},Ne=j.isAll,Ce=j.isIndeterminate,le=k.value;Ye==="hover"&&(Ae.onMouseenter=p,Ae.onMouseleave=y);const Fe={$table:S,$grid:S.xegrid,columns:K,isAllChecked:Ne,isAllIndeterminate:Ce};return i.eachTree(K,(Ee,ke,Pe,Ue,ze)=>{if(pe?pe({column:Ee}):!0){const We=Ee.renderVisible,Ge=Ee.halfVisible,lt=Ee.children&&Ee.children.length,Xe=It(Ee.getTitle(),1),it=be?!be({column:Ee}):!1,Rt=!We;ye.push(f("li",{key:Ee.id,colid:Ee.id,class:["vxe-table-custom--option",`level--${Ee.level}`,{"is--hidden":it||Rt,"is--group":lt}],onDragstart:me,onDragend:Te,onDragover:A},[Ie?f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":We,"is--indeterminate":Ge,"is--disabled":it}],title:at("vxe.custom.setting.colVisible"),onClick:()=>{it||ce(Ee)}},[f("span",{class:["vxe-checkbox--icon",Ge?Ht().TABLE_CHECKBOX_INDETERMINATE:We?Ht().TABLE_CHECKBOX_CHECKED:Ht().TABLE_CHECKBOX_UNCHECKED]})]):Le(),Re&&Ee.level===1?f("div",{class:"vxe-table-custom--sort-option"},[f("span",Object.assign({class:["vxe-table-custom--sort-btn",{"is--disabled":it||Rt}],title:at("vxe.custom.setting.sortHelpTip")},it||Rt?{}:{onMousedown:ue,onMouseup:we}),[f("i",{class:Ht().TABLE_CUSTOM_SORT})])]):Le(),Ee.type==="html"?f("div",{key:"1",class:"vxe-table-custom--checkbox-label",innerHTML:Xe}):f("div",{key:"0",class:"vxe-table-custom--checkbox-label"},Xe),!ze&&xe?f("div",{class:"vxe-table-custom--fixed-option"},[c?f(c,{mode:"text",icon:Ee.renderFixed==="left"?Ht().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:Ht().TOOLBAR_TOOLS_FIXED_LEFT,status:Ee.renderFixed==="left"?"primary":"",disabled:it||Rt||Oe&&!Ee.renderFixed,title:at(Ee.renderFixed==="left"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft"),onClick:()=>{$(Ee,"left")}}):Le(),c?f(c,{mode:"text",icon:Ee.renderFixed==="right"?Ht().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:Ht().TOOLBAR_TOOLS_FIXED_RIGHT,status:Ee.renderFixed==="right"?"primary":"",disabled:it||Rt||Oe&&!Ee.renderFixed,title:at(Ee.renderFixed==="right"?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight"),onClick:()=>{$(Ee,"right")}}):Le()]):Le()]))}}),f("div",{ref:z,key:"simple",class:["vxe-table-custom-wrapper",`placement--${ge}`,{"is--active":j.visible}],style:ee&&!["left","right"].includes(ge)?{maxHeight:`${ee}px`}:{}},j.visible?[f("div",{class:"vxe-table-custom--header"},de?S.callSlot(de,Fe):[f("ul",{class:"vxe-table-custom--panel-list"},[f("li",{class:"vxe-table-custom--option"},[Ie?f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":Ne,"is--indeterminate":Ce}],title:at("vxe.table.allTitle"),onClick:Q},[f("span",{class:["vxe-checkbox--icon",Ce?Ht().TABLE_CHECKBOX_INDETERMINATE:Ne?Ht().TABLE_CHECKBOX_CHECKED:Ht().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},at("vxe.toolbar.customAll"))]):f("span",{class:"vxe-checkbox--label"},at("vxe.table.customTitle"))])])]),f("div",{ref:T,class:"vxe-table-custom--body"},[ie?f("div",{class:"vxe-table-custom--panel-top"},S.callSlot(ie,Fe)):dn(S),Ze?f("div",{class:"vxe-table-custom--panel-body"},S.callSlot(Ze,Fe)):f(is,Object.assign({class:"vxe-table-custom--panel-list",name:"vxe-table-custom--list",tag:"ul"},Ae),{default:()=>ye}),Se?f("div",{class:"vxe-table-custom--panel-bottom"},S.callSlot(Se,Fe)):dn(S),f("div",{ref:M,class:"vxe-table-custom-popup--drag-hint"},at("vxe.custom.cstmDragTarget",[le&&le.type!=="html"?le.getTitle():""]))]),J.showFooter?f("div",{class:"vxe-table-custom--footer"},Be?S.callSlot(Be,Fe):[f("div",{class:"vxe-table-custom--footer-buttons"},[c?f(c,{mode:"text",content:J.resetButtonText||at("vxe.table.customRestore"),onClick:q}):Le(),J.immediate?c?f(c,{mode:"text",content:J.closeButtonText||at("vxe.table.customClose"),onClick:R}):Le():c?f(c,{mode:"text",content:J.cancelButtonText||at("vxe.table.customCancel"),onClick:H}):Le(),J.immediate?Le():c?f(c,{mode:"text",status:"primary",content:J.confirmButtonText||at("vxe.table.customConfirm"),onClick:O}):Le()])]):null]:[])},U=()=>{const{customStore:j}=e,{resizable:K}=X,{customColumnList:J}=u,ee=g.value,{modalOptions:be,drawerOptions:pe,allowVisible:Ie,allowSort:Re,allowFixed:xe,allowResizable:Ye,checkMethod:ge,visibleMethod:Oe}=ee,_e=x.value,{maxFixedSize:de}=_e,ie=N.value,{minWidth:Se,maxWidth:Ze}=ie,{mode:Be}=ee,ye=Object.assign({},be),Ae=Object.assign({},pe),Ne=B.value,Ce=ee.slots||{},le=Ce.header,Fe=Ce.top,Ee=Ce.bottom,ke=Ce.default,Pe=Ce.footer,Ue=[],ze=j.isAll,Je=j.isIndeterminate,We=k.value,Ge={$table:S,$grid:S.xegrid,columns:J,isAllChecked:ze,isAllIndeterminate:Je};i.eachTree(J,(Xe,it,Rt,bo,Zt)=>{if(Oe?Oe({column:Xe}):!0){let bt=0,et=0;if(Ye){const Ot={$table:S,column:Xe,columnIndex:it,$columnIndex:it,$rowIndex:-1};Se&&(bt=i.toNumber(i.isFunction(Se)?Se(Ot):Se)),Ze&&(et=i.toNumber(i.isFunction(Ze)?Ze(Ot):Ze))}const St=Xe.renderVisible,Qt=Xe.halfVisible,Wt=It(Xe.getTitle(),1),Yt=Xe.children&&Xe.children.length,Et=ge?!ge({column:Xe}):!1,Vt=!St;Ue.push(f("tr",{key:Xe.id,colid:Xe.id,class:[`vxe-table-custom-popup--row level--${Xe.level}`,{"is--group":Yt}],onDragstart:me,onDragend:Te,onDragover:A},[Ie?f("td",{class:"vxe-table-custom-popup--column-item col--visible"},[f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":St,"is--indeterminate":Qt,"is--disabled":Et}],title:at("vxe.custom.setting.colVisible"),onClick:()=>{Et||ce(Xe)}},[f("span",{class:["vxe-checkbox--icon",Qt?Ht().TABLE_CHECKBOX_INDETERMINATE:St?Ht().TABLE_CHECKBOX_CHECKED:Ht().TABLE_CHECKBOX_UNCHECKED]})])]):Le(),Re?f("td",{class:"vxe-table-custom-popup--column-item col--sort"},[Xe.level===1?f("span",Object.assign({class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":Et||Vt}],title:at("vxe.custom.setting.sortHelpTip")},Et||Vt?{}:{onMousedown:ue,onMouseup:we}),[f("i",{class:Ht().TABLE_CUSTOM_SORT})]):f("span","-")]):Le(),f("td",{class:"vxe-table-custom-popup--column-item col--name"},[Xe.type==="html"?f("div",{key:"1",class:"vxe-table-custom-popup--name",innerHTML:Wt}):f("div",{key:"0",class:"vxe-table-custom-popup--name",title:Wt},Wt)]),Ye?f("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[Xe.children&&Xe.children.length||!(i.isBoolean(Xe.resizable)?Xe.resizable:_e.resizable||K)?f("span","-"):C?f(C,{type:"integer",disabled:Et||Vt,modelValue:Xe.renderResizeWidth,min:bt||void 0,max:et||void 0,"onUpdate:modelValue"(Ot){Xe.renderResizeWidth=Math.max(0,Number(Ot))}}):Le()]):Le(),xe?f("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[Zt?f("span","-"):I?f(I,{modelValue:Xe.renderFixed||"",type:"button",size:"mini",disabled:Et||Vt,options:[{label:at("vxe.custom.setting.fixedLeft"),value:"left",disabled:Et||Vt||Ne},{label:at("vxe.custom.setting.fixedUnset"),value:"",disabled:Et||Vt},{label:at("vxe.custom.setting.fixedRight"),value:"right",disabled:Et||Vt||Ne}],"onUpdate:modelValue"(Ot){Xe.renderFixed=Ot}}):Le()]):Le()]))}});const lt={default:()=>ke?S.callSlot(ke,Ge):f("div",{ref:T,class:"vxe-table-custom-popup--body"},[Fe?f("div",{class:"vxe-table-custom-popup--table-top"},S.callSlot(Fe,Ge)):dn(S),f("div",{class:"vxe-table-custom-popup--table-wrapper"},[f("table",{},[f("colgroup",{},[Ie?f("col",{class:"vxe-table-custom-popup--table-col-seq"}):Le(),Re?f("col",{class:"vxe-table-custom-popup--table-col-sort"}):Le(),f("col",{class:"vxe-table-custom-popup--table-col-title"}),Ye?f("col",{class:"vxe-table-custom-popup--table-col-width"}):Le(),xe?f("col",{class:"vxe-table-custom-popup--table-col-fixed"}):Le()]),f("thead",{},[f("tr",{},[Ie?f("th",{},[f("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":ze,"is--indeterminate":Je}],title:at("vxe.table.allTitle"),onClick:Q},[f("span",{class:["vxe-checkbox--icon",Je?Ht().TABLE_CHECKBOX_INDETERMINATE:ze?Ht().TABLE_CHECKBOX_CHECKED:Ht().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},at("vxe.toolbar.customAll"))])]):Le(),Re?f("th",{},[f("span",{class:"vxe-table-custom-popup--table-sort-help-title"},at("vxe.custom.setting.colSort")),v?f(v,{enterable:!0,content:at("vxe.custom.setting.sortHelpTip"),popupClassName:"vxe-table--ignore-clear"},{default:()=>f("i",{class:"vxe-table-custom-popup--table-sort-help-icon vxe-icon-question-circle-fill"})}):Le()]):Le(),f("th",{},at("vxe.custom.setting.colTitle")),Ye?f("th",{},at("vxe.custom.setting.colResizable")):Le(),xe?f("th",{},at(`vxe.custom.setting.${de?"colFixedMax":"colFixed"}`,[de])):Le()])]),f(is,{class:"vxe-table-custom--panel-list",tag:"tbody",name:"vxe-table-custom--list"},{default:()=>Ue})])]),Ee?f("div",{class:"vxe-table-custom-popup--table-bottom"},S.callSlot(Ee,Ge)):dn(S),f("div",{ref:M,class:"vxe-table-custom-popup--drag-hint"},at("vxe.custom.cstmDragTarget",[We?We.getTitle():""]))]),footer:()=>Pe?S.callSlot(Pe,Ge):f("div",{class:"vxe-table-custom-popup--footer"},[c?f(c,{content:ee.resetButtonText||at("vxe.custom.cstmRestore"),onClick:q}):Le(),c?f(c,{content:ee.resetButtonText||at("vxe.custom.cstmCancel"),onClick:H}):Le(),c?f(c,{status:"primary",content:ee.confirmButtonText||at("vxe.custom.cstmConfirm"),onClick:O}):Le()])};return le&&(lt.header=()=>S.callSlot(le,Ge)),Be==="drawer"?s?f(s,{key:"drawer",className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",Ae.className||""].join(" "),modelValue:j.visible,title:Ae.title||at("vxe.custom.cstmTitle"),width:Ae.width||Math.min(880,document.documentElement.clientWidth),position:Ae.position,escClosable:!!Ae.escClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(Xe){j.visible=Xe}},lt):Le():l?f(l,{key:"modal",className:["vxe-table-custom-modal-wrapper","vxe-table--ignore-clear",ye.className||""].join(" "),modelValue:j.visible,title:ye.title||at("vxe.custom.cstmTitle"),width:ye.width||Math.min(880,document.documentElement.clientWidth),minWidth:ye.minWidth||700,height:ye.height||Math.min(680,document.documentElement.clientHeight),minHeight:ye.minHeight||400,showZoom:ye.showZoom,showMaximize:ye.showMaximize,showMinimize:ye.showMinimize,mask:ye.mask,lockView:ye.lockView,resize:ye.resize,escClosable:!!ye.escClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(Xe){j.visible=Xe}},lt):Le()};return()=>{const j=g.value;return["modal","drawer","popup"].includes(`${j.mode}`)?U():_()}}}),{getI18n:un,getIcon:Kl,renderer:Ys}=he,Pi=mo({name:"VxeTableFilterPanel",props:{filterStore:Object},setup(e){const l=_t("$xeTable",{}),{reactData:s,internalData:c,getComputeMaps:C}=l,{computeFilterOpts:v}=C(),I=je(()=>{const{filterStore:b}=e;return b&&b.options.some(p=>p.checked)}),S=(b,p)=>{const{filterStore:y}=e;y.options.forEach(O=>{O._checked=p,O.checked=p}),y.isAllSelected=p,y.isIndeterminate=!1},X=b=>{l.handleFilterConfirmFilter(b)},u=(b,p,y)=>{l.handleFilterChangeRadioOption(b,p,y)},g=b=>{l.handleFilterResetFilter(b)},x=(b,p,y)=>{l.handleFilterChangeMultipleOption(b,p,y)},B=(b,p,y)=>{l.handleFilterChangeOption(b,p,y)},N=(b,p)=>{const{filterStore:y}=e;y.multiple?S(b,p):g(b)},z={changeRadioOption:u,changeMultipleOption:x,changeAllOption:N,changeOption:B,confirmFilter:X,resetFilter:g},T=(b,p)=>{const{filterStore:y}=e,{column:O,multiple:R,maxHeight:H}=y,W=O?O.slots:null,q=W?W.filter:null,ae=Object.assign({},c._currFilterParams,{$panel:z,$table:l}),ce=p?p.renderTableFilter||p.renderFilter:null;if(q)return[f("div",{class:"vxe-table--filter-template"},l.callSlot(q,ae))];if(ce)return[f("div",{class:"vxe-table--filter-template"},Oo(ce(b,ae)))];const $=R?y.isAllSelected:!y.options.some(ue=>ue._checked),Q=R&&y.isIndeterminate;return[f("ul",{class:"vxe-table--filter-header"},[f("li",{class:["vxe-table--filter-option",{"is--checked":$,"is--indeterminate":Q}],title:un(R?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:ue=>{N(ue,!y.isAllSelected)}},(R?[f("span",{class:["vxe-checkbox--icon",Q?Kl().TABLE_CHECKBOX_INDETERMINATE:$?Kl().TABLE_CHECKBOX_CHECKED:Kl().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([f("span",{class:"vxe-checkbox--label"},un("vxe.table.allFilter"))]))]),f("ul",{class:"vxe-table--filter-body",style:H?{maxHeight:`${H}px`}:{}},y.options.map(ue=>{const we=ue._checked;return f("li",{class:["vxe-table--filter-option",{"is--checked":ue._checked}],title:ue.label,onClick:me=>{B(me,!ue._checked,ue)}},(R?[f("span",{class:["vxe-checkbox--icon",we?Kl().TABLE_CHECKBOX_CHECKED:Kl().TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([f("span",{class:"vxe-checkbox--label"},It(ue.label,1))]))}))]},M=()=>{const{filterStore:b}=e,{column:p,multiple:y}=b,O=v.value,R=I.value,{filterRender:H}=p,W=gt(H)?Ys.get(H.name):null,q=!R&&!b.isAllSelected&&!b.isIndeterminate;return y&&(!W||!(W.showTableFilterFooter===!1||W.showFilterFooter===!1||W.isFooter===!1))?[f("div",{class:"vxe-table--filter-footer"},[f("button",{class:{"is--disabled":q},disabled:q,onClick:X},O.confirmButtonText||un("vxe.table.confirmFilter")),f("button",{onClick:g},O.resetButtonText||un("vxe.table.resetFilter"))])]:[]};return()=>{const{filterStore:b}=e,{initStore:p}=s,{column:y}=b,O=y?y.filterRender:null,R=gt(O)?Ys.get(O.name):null,H=R?R.tableFilterClassName||R.filterClassName:"",W=Object.assign({},c._currFilterParams,{$panel:z,$table:l});return f("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",Go(H,W),{"is--animat":l.props.animat,"is--multiple":b.multiple,"is--active":b.visible}],style:b.style},p.filter&&y?T(O,R).concat(M()):[])}}}),{getI18n:pl,getIcon:zi}=he,Xi=mo({name:"VxeTableImportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const l=he.getComponent("VxeModal"),s=he.getComponent("VxeButton"),c=he.getComponent("VxeSelect"),C=_t("$xeTable",{}),{computeImportOpts:v}=C.getComputeMaps(),I=Zo({loading:!1}),S=He(),X=je(()=>{const{storeData:k}=e;return`${k.filename}.${k.type}`}),u=je(()=>{const{storeData:k}=e;return k.file&&k.type}),g=je(()=>{const{storeData:k}=e,{type:b,typeList:p}=k;if(b){const y=i.find(p,O=>b===O.value);return y?y.label:"*.*"}return`*.${p.map(y=>y.value).join(", *.")}`}),x=()=>{const{storeData:k}=e;Object.assign(k,{filename:"",sheetName:"",type:""})},B=()=>{const{storeData:k,defaultOptions:b}=e;C.readFile(b).then(p=>{const{file:y}=p;Object.assign(k,hr(y),{file:y})}).catch(p=>p)},N=()=>{oe(()=>{const k=S.value;k&&k.focus()})},z=()=>{const{storeData:k}=e;k.visible=!1},T=()=>{const{storeData:k,defaultOptions:b}=e,p=v.value;I.loading=!0,C.importByFile(k.file,Object.assign({},p,b)).then(()=>{I.loading=!1,k.visible=!1}).catch(()=>{I.loading=!1})};return()=>{const{defaultOptions:k,storeData:b}=e,p=X.value,y=u.value,O=g.value,R=k.slots||{},H=R.top,W=R.bottom,q=R.default,ae=R.footer;return l?f(l,{id:"VXE_IMPORT_MODAL",modelValue:b.visible,title:pl("vxe.import.impTitle"),className:"vxe-table-export-popup-wrapper",width:540,minWidth:360,minHeight:240,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:I.loading,"onUpdate:modelValue"(ce){b.visible=ce},onShow:N},{default:()=>{const ce={$table:C,$grid:C.xegrid,options:k,params:k.params};return f("div",{class:"vxe-table-export--panel"},[H?f("div",{class:"vxe-table-export--panel-top"},C.callSlot(H,ce)):Le(),f("div",{class:"vxe-table-export--panel-body"},q?C.callSlot(q,ce):[f("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[f("tbody",[f("tr",[f("td",pl("vxe.import.impFile")),f("td",[y?f("div",{class:"vxe-table-export--selected--file",title:p},[f("span",p),f("i",{class:zi().INPUT_CLEAR,onClick:x})]):f("button",{ref:S,class:"vxe-table-export--select--file",onClick:B},pl("vxe.import.impSelect"))])]),f("tr",[f("td",pl("vxe.import.impType")),f("td",O)]),f("tr",[f("td",pl("vxe.import.impMode")),f("td",[c?f(c,{modelValue:k.mode,options:b.modeList,"onUpdate:modelValue"($){k.mode=$}}):Le()])])])])]),W?f("div",{class:"vxe-table-export--panel-bottom"},C.callSlot(W,ce)):Le()])},footer(){const ce={$table:C,$grid:C.xegrid,options:k,params:k.params};return f("div",{class:"vxe-table-export--panel-footer"},ae?C.callSlot(ae,ce):[f("div",{class:"vxe-table-export--panel-btns"},[s?f(s,{content:pl("vxe.import.impCancel"),onClick:z}):Le(),s?f(s,{status:"primary",disabled:!y,content:pl("vxe.import.impConfirm"),onClick:T}):Le()])])}}):Le()}}}),{getI18n:ht,getIcon:Sl}=he,Ki=mo({name:"VxeTableExportPanel",props:{defaultOptions:Object,storeData:Object},setup(e){const l=he.getComponent("VxeModal"),s=he.getComponent("VxeButton"),c=he.getComponent("VxeSelect"),C=he.getComponent("VxeInput"),v=he.getComponent("VxeCheckbox"),I=_t("$xeTable",{}),{computeExportOpts:S,computePrintOpts:X}=I.getComputeMaps(),u=Zo({isAll:!1,isIndeterminate:!1,loading:!1}),g=He(),x=He(),B=He(),N=je(()=>{const{storeData:$}=e;return $.columns.every(Q=>Q.checked)}),z=je(()=>{const{defaultOptions:$}=e;return["html","xml","xlsx","pdf"].indexOf($.type)>-1}),T=je(()=>{const{storeData:$,defaultOptions:Q}=e;return!Q.original&&Q.mode==="current"&&($.isPrint||["html","xlsx"].indexOf(Q.type)>-1)}),M=je(()=>{const{defaultOptions:$}=e;return!$.original&&["xlsx"].indexOf($.type)>-1}),k=$=>{const{storeData:Q}=e,ue=i.findTree(Q.columns,we=>we===$);if(ue&&ue.parent){const{parent:we}=ue;we.children&&we.children.length&&(we.checked=we.children.every(me=>me.checked),we.halfChecked=!we.checked&&we.children.some(me=>me.checked||me.halfChecked),k(we))}},b=()=>{const{storeData:$}=e,Q=$.columns;u.isAll=Q.every(ue=>ue.disabled||ue.checked),u.isIndeterminate=!u.isAll&&Q.some(ue=>!ue.disabled&&(ue.checked||ue.halfChecked))},p=$=>{const Q=!$.checked;i.eachTree([$],ue=>{ue.checked=Q,ue.halfChecked=!1}),k($),b()},y=()=>{const{storeData:$}=e,Q=!u.isAll;i.eachTree($.columns,ue=>{ue.disabled||(ue.checked=Q,ue.halfChecked=!1)}),u.isAll=Q,b()},O=()=>{oe(()=>{const $=x.value,Q=B.value,ue=g.value,we=$||Q||ue;we&&we.focus()}),b()},R=()=>{const{storeData:$,defaultOptions:Q}=e,{hasMerge:ue,columns:we}=$,me=N.value,Te=T.value,A=i.searchTree(we,G=>G.checked,{children:"children",mapChildren:"childNodes",original:!0});return Object.assign({},Q,{columns:A,isMerge:ue&&Te&&me?Q.isMerge:!1})},H=()=>{const{storeData:$}=e,Q=X.value;$.visible=!1,I.print(Object.assign({},Q,R()))},W=()=>{const{storeData:$}=e,Q=S.value;u.loading=!0,I.exportData(Object.assign({},Q,R())).then(()=>{u.loading=!1,$.visible=!1}).catch(()=>{u.loading=!1})},q=()=>{const{storeData:$}=e;$.visible=!1},ae=()=>{const{storeData:$}=e;$.isPrint?H():W()};return()=>{const{defaultOptions:$,storeData:Q}=e,{isAll:ue,isIndeterminate:we}=u,{hasTree:me,hasMerge:Te,isPrint:A,hasColgroup:G,columns:_}=Q,{isHeader:U}=$,ne=[],j=N.value,K=z.value,J=T.value,ee=M.value,be=$.slots||{},pe=be.top,Ie=be.bottom,Re=be.default,xe=be.footer,Ye=be.parameter;return i.eachTree(_,ge=>{const Oe=It(ge.getTitle(),1),_e=ge.children&&ge.children.length,de=ge.checked,ie=ge.halfChecked,Se=ge.type==="html";ne.push(f("li",{key:ge.id,class:["vxe-table-export--panel-column-option",`level--${ge.level}`,{"is--group":_e,"is--checked":de,"is--indeterminate":ie,"is--disabled":ge.disabled}],title:Se?"":Oe,onClick:()=>{ge.disabled||p(ge)}},[f("span",{class:["vxe-checkbox--icon",ie?Sl().TABLE_CHECKBOX_INDETERMINATE:de?Sl().TABLE_CHECKBOX_CHECKED:Sl().TABLE_CHECKBOX_UNCHECKED]}),Se?f("span",{key:"1",class:"vxe-checkbox--label",innerHTML:Oe}):f("span",{key:"0",class:"vxe-checkbox--label"},Oe)]))}),l?f(l,{id:"VXE_EXPORT_MODAL",modelValue:Q.visible,title:ht(A?"vxe.export.printTitle":"vxe.export.expTitle"),className:"vxe-table-export-popup-wrapper",width:660,minWidth:500,minHeight:400,mask:!0,lockView:!0,showFooter:!0,escClosable:!0,maskClosable:!0,showMaximize:!0,resize:!0,loading:u.loading,"onUpdate:modelValue"(ge){Q.visible=ge},onShow:O},{default:()=>{const ge={$table:I,$grid:I.xegrid,options:$,columns:_,params:$.params};return f("div",{class:"vxe-table-export--panel"},[pe?f("div",{class:"vxe-table-export--panel-top"},I.callSlot(pe,ge)):Le(),f("div",{class:"vxe-table-export--panel-body"},Re?I.callSlot(Re,ge):[f("table",{class:"vxe-table-export--panel-table",cellspacing:0,cellpadding:0,border:0},[f("tbody",[[A?Le():f("tr",[f("td",ht("vxe.export.expName")),f("td",[C?f(C,{ref:x,modelValue:$.filename,type:"text",clearable:!0,placeholder:ht("vxe.export.expNamePlaceholder"),"onUpdate:modelValue"(Oe){$.filename=Oe}}):Le()])]),A?Le():f("tr",[f("td",ht("vxe.export.expType")),f("td",[c?f(c,{modelValue:$.type,options:Q.typeList,"onUpdate:modelValue"(Oe){$.type=Oe}}):Le()])]),A||K?f("tr",[f("td",ht("vxe.export.expSheetName")),f("td",[C?f(C,{ref:B,modelValue:$.sheetName,type:"text",clearable:!0,placeholder:ht("vxe.export.expSheetNamePlaceholder"),"onUpdate:modelValue"(Oe){$.sheetName=Oe}}):Le()])]):Le(),f("tr",[f("td",ht("vxe.export.expMode")),f("td",[c?f(c,{modelValue:$.mode,options:Q.modeList.map(Oe=>({value:Oe.value,label:ht(Oe.label)})),"onUpdate:modelValue"(Oe){$.mode=Oe}}):Le()])]),f("tr",[f("td",[ht("vxe.export.expColumn")]),f("td",[f("div",{class:"vxe-table-export--panel-column"},[f("ul",{class:"vxe-table-export--panel-column-header"},[f("li",{class:["vxe-table-export--panel-column-option",{"is--checked":ue,"is--indeterminate":we}],title:ht("vxe.table.allTitle"),onClick:y},[f("span",{class:["vxe-checkbox--icon",we?Sl().TABLE_CHECKBOX_INDETERMINATE:ue?Sl().TABLE_CHECKBOX_CHECKED:Sl().TABLE_CHECKBOX_UNCHECKED]}),f("span",{class:"vxe-checkbox--label"},ht("vxe.export.expCurrentColumn"))])]),f("ul",{class:"vxe-table-export--panel-column-body"},ne)])])]),f("tr",[f("td",ht("vxe.export.expOpts")),Ye?f("td",[f("div",{class:"vxe-table-export--panel-option-row"},I.callSlot(Ye,ge))]):f("td",[f("div",{class:"vxe-table-export--panel-option-row"},[v?f(v,{modelValue:$.isHeader,title:ht("vxe.export.expHeaderTitle"),content:ht("vxe.export.expOptHeader"),"onUpdate:modelValue"(Oe){$.isHeader=Oe}}):Le(),v?f(v,{modelValue:$.isFooter,disabled:!Q.hasFooter,title:ht("vxe.export.expFooterTitle"),content:ht("vxe.export.expOptFooter"),"onUpdate:modelValue"(Oe){$.isFooter=Oe}}):Le(),v?f(v,{modelValue:$.original,title:ht("vxe.export.expOriginalTitle"),content:ht("vxe.export.expOptOriginal"),"onUpdate:modelValue"(Oe){$.original=Oe}}):Le()]),f("div",{class:"vxe-table-export--panel-option-row"},[v?f(v,{modelValue:U&&G&&J?$.isColgroup:!1,title:ht("vxe.export.expColgroupTitle"),disabled:!U||!G||!J,content:ht("vxe.export.expOptColgroup"),"onUpdate:modelValue"(Oe){$.isColgroup=Oe}}):Le(),v?f(v,{modelValue:Te&&J&&j?$.isMerge:!1,title:ht("vxe.export.expMergeTitle"),disabled:!Te||!J||!j,content:ht("vxe.export.expOptMerge"),"onUpdate:modelValue"(Oe){$.isMerge=Oe}}):Le(),A||!v?Le():f(v,{modelValue:ee?$.useStyle:!1,disabled:!ee,title:ht("vxe.export.expUseStyleTitle"),content:ht("vxe.export.expOptUseStyle"),"onUpdate:modelValue"(Oe){$.useStyle=Oe}}),v?f(v,{modelValue:me?$.isAllExpand:!1,disabled:!me,title:ht("vxe.export.expAllExpandTitle"),content:ht("vxe.export.expOptAllExpand"),"onUpdate:modelValue"(Oe){$.isAllExpand=Oe}}):Le()])])])]])])]),Ie?f("div",{class:"vxe-table-export--panel-bottom"},I.callSlot(Ie,ge)):Le()])},footer(){const ge={$table:I,$grid:I.xegrid,options:$,columns:_,params:$.params};return f("div",{class:"vxe-table-export--panel-footer"},xe?I.callSlot(xe,ge):[f("div",{class:"vxe-table-export--panel-btns"},[s?f(s,{content:ht("vxe.export.expCancel"),onClick:q}):Le(),s?f(s,{ref:g,status:"primary",content:ht(A?"vxe.export.expPrint":"vxe.export.expConfirm"),onClick:ae}):Le()])])}}):Le()}}}),{getIcon:Yi}=he,qi=mo({name:"VxeTableMenuPanel",setup(e,l){const s=i.uniqueId(),c=_t("$xeTable",{}),{reactData:C}=c,v=He(),I={refElem:v},S={xID:s,props:e,context:l,getRefMaps:()=>I},X=()=>{const{ctxMenuStore:u}=C,{computeMenuOpts:g}=c.getComputeMaps(),x=g.value;return f(di,{to:"body",disabled:!1},[f("div",{ref:v,class:["vxe-table--context-menu-wrapper",x.className,{"is--visible":u.visible}],style:u.style},u.list.map((B,N)=>B.every(z=>z.visible===!1)?Le():f("ul",{class:"vxe-context-menu--option-wrapper",key:N},B.map((z,T)=>{const M=z.children&&z.children.some(p=>p.visible!==!1),k=Object.assign({},z.prefixConfig),b=Object.assign({},z.suffixConfig);return z.visible===!1?null:f("li",{class:[z.className,{"link--disabled":z.disabled,"link--active":z===u.selected}],key:`${N}_${T}`},[f("a",{class:"vxe-context-menu--link",onClick(p){c.ctxMenuLinkEvent(p,z)},onMouseover(p){c.ctxMenuMouseoverEvent(p,z)},onMouseout(p){c.ctxMenuMouseoutEvent(p,z)}},[f("div",{class:["vxe-context-menu--link-prefix",k.className||""]},[f("i",{class:k.icon||z.prefixIcon}),k.content?f("span",{},`${k.content}`):Le()]),f("div",{class:"vxe-context-menu--link-content"},$o(z.name)),f("div",{class:["vxe-context-menu--link-suffix",b.className||""]},[f("i",{class:b.icon||z.suffixIcon||(M?Yi().TABLE_MENU_OPTIONS:"")}),b.content?f("span",`${b.content}`):Le()])]),M?f("ul",{class:["vxe-table--context-menu-clild-wrapper",{"is--show":z===u.selected&&u.showChild}]},z.children.map((p,y)=>{const O=Object.assign({},p.prefixConfig),R=Object.assign({},p.suffixConfig);return p.visible===!1?null:f("li",{class:[p.className,{"link--disabled":p.disabled,"link--active":p===u.selectChild}],key:`${N}_${T}_${y}`},[f("a",{class:"vxe-context-menu--link",onClick(H){c.ctxMenuLinkEvent(H,p)},onMouseover(H){c.ctxMenuMouseoverEvent(H,z,p)},onMouseout(H){c.ctxMenuMouseoutEvent(H,z)}},[f("div",{class:["vxe-context-menu--link-prefix",O.className||""]},[f("i",{class:O.icon||p.prefixIcon}),O.content?f("span",`${O.content}`):Le()]),f("div",{class:"vxe-context-menu--link-content"},$o(p.name)),f("div",{class:["vxe-context-menu--link-suffix",R.className||""]},[f("i",{class:R.icon}),R.content?f("span",`${R.content}`):Le()])])])})):null])}))))])};return S.renderVN=X,S},render(){return this.renderVN()}}),{getConfig:ot,getI18n:es,renderer:qs,formats:Us,createEvent:Ui,globalResize:Gi,interceptor:Gs,hooks:Zi,globalEvents:ct,GLOBAL_EVENT_KEYS:to,useFns:Qi,renderEmptyElement:Tt}=he,Ji=Qo["-webkit"]&&!Qo.edge,Zs="VXE_CUSTOM_STORE",Dl=mo({name:"VxeTable",props:ji,emits:_i,setup(e,l){const{slots:s,emit:c}=l,C=i.uniqueId(),v=he.getComponent("VxeLoading"),I=he.getComponent("VxeTooltip"),S=_t("$xeTabs",null),{computeSize:X}=Qi.useSize(e),u=Zo({isCalcColumn:!1,staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,lastScrollTime:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selectCheckboxMaps:{},currentRow:null,currentColumn:null,selectRadioRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandedMaps:{},rowExpandLazyLoadedMaps:{},treeExpandedMaps:{},treeExpandLazyLoadedMaps:{},treeIndeterminateMaps:{},mergeList:[],mergeFooterList:[],upDataFlag:0,reColumnFlag:0,pendingRowMaps:{},pendingRowList:[],initStore:{filter:!1,import:!1,export:!1,custom:!1},customStore:{btnEl:null,isAll:!1,isIndeterminate:!1,activeBtn:!1,activeWrapper:!1,visible:!1,maxHeight:0,oldSortMaps:{},oldFixedMaps:{},oldVisibleMaps:{}},customColumnList:[],filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],autoMinList:[],scaleList:[],scaleMinList:[],autoList:[],remainList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},focused:{row:null,column:null},insertMaps:{},removeMaps:{}},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:{}},validStore:{visible:!1},validErrorMaps:{},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1},scrollVMLoading:!1,isDragRowMove:!1,dragRow:null,dragTipText:"",_isResize:!1,_isLoading:!1}),g={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMinHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},treeIndeterminateRowMaps:{},tableFullData:[],afterFullData:[],afterTreeFullData:[],afterFullRowMaps:{},tableFullTreeData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},sourceDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},columnStatusMaps:{},rowStatusMaps:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1};let x={},B={};const N=He(),z=He(),T=He(),M=He(),k=He(),b=He(),p=He(),y=He(),O=He(),R=He(),H=He(),W=He(),q=He(),ae=He(),ce=He(),$=He(),Q=He(),ue=He(),we=He(),me=He(),Te=He(),A=He(),G=He(),_=He(),U=He(),ne=He(),j=He(),K=_t("$xeGrid",null);let J;const ee=je(()=>{const{id:t}=e;return t?i.isFunction(t)?`${t({$table:m,$grid:K})||""}`:`${t}`:""}),be=je(()=>Object.assign({},ot().table.validConfig,e.validConfig)),pe=je(()=>Object.assign({},ot().table.scrollX,e.scrollX)),Ie=je(()=>{const t=pe.value,{threshold:o}=t;return o?i.toNumber(o):0}),Re=je(()=>Object.assign({},ot().table.scrollY,e.scrollY)),xe=je(()=>{const t=Re.value,{threshold:o}=t;return o?i.toNumber(o):0}),Ye=je(()=>({default:48,medium:44,small:40,mini:36})),ge=je(()=>Object.assign({},ot().table.columnConfig,e.columnConfig)),Oe=je(()=>Object.assign({},ot().table.cellConfig,e.cellConfig)),_e=je(()=>Object.assign({},ot().table.rowConfig,e.rowConfig)),de=je(()=>Object.assign({},ot().table.dragConfig,e.dragConfig)),ie=je(()=>Object.assign({},ot().table.resizeConfig,e.resizeConfig)),Se=je(()=>Object.assign({},ot().table.resizableConfig,e.resizableConfig)),Ze=je(()=>Object.assign({startIndex:0},ot().table.seqConfig,e.seqConfig)),Be=je(()=>Object.assign({},ot().table.radioConfig,e.radioConfig)),ye=je(()=>Object.assign({},ot().table.checkboxConfig,e.checkboxConfig));let Ae=He();Ae=je(()=>Object.assign({},ot().tooltip,ot().table.tooltipConfig,e.tooltipConfig));const Ne=je(()=>{const t=Ae.value;return Object.assign({},t)}),Ce=je(()=>{const t=Ae.value;return Object.assign({isArrow:!1},t)}),le=je(()=>Object.assign({},ot().table.editConfig,e.editConfig)),Fe=je(()=>Object.assign({orders:["asc","desc",null]},ot().table.sortConfig,e.sortConfig)),Ee=je(()=>Object.assign({},ot().table.filterConfig,e.filterConfig)),ke=je(()=>Object.assign({},ot().table.mouseConfig,e.mouseConfig)),Pe=je(()=>Object.assign({},ot().table.areaConfig,e.areaConfig)),Ue=je(()=>Object.assign({},ot().table.keyboardConfig,e.keyboardConfig)),ze=je(()=>Object.assign({},ot().table.clipConfig,e.clipConfig)),Je=je(()=>Object.assign({},ot().table.fnrConfig,e.fnrConfig)),We=je(()=>Object.assign({},ot().table.menuConfig,e.menuConfig)),Ge=je(()=>{const o=We.value.header;return o&&o.options?o.options:[]}),lt=je(()=>{const o=We.value.body;return o&&o.options?o.options:[]}),Xe=je(()=>{const o=We.value.footer;return o&&o.options?o.options:[]}),it=je(()=>{const t=We.value,o=Ge.value,n=lt.value,r=Xe.value;return!!(e.menuConfig&&gt(t)&&(o.length||n.length||r.length))}),Rt=je(()=>{const{ctxMenuStore:t}=u,o=[];return t.list.forEach(n=>{n.forEach(r=>{o.push(r)})}),o}),bo=je(()=>Object.assign({},ot().table.exportConfig,e.exportConfig)),Zt=je(()=>Object.assign({},ot().table.importConfig,e.importConfig)),_o=je(()=>Object.assign({},ot().table.printConfig,e.printConfig)),bt=je(()=>Object.assign({},ot().table.expandConfig,e.expandConfig)),et=je(()=>Object.assign({},ot().table.treeConfig,e.treeConfig)),St=je(()=>Object.assign({},ot().table.emptyRender,e.emptyRender)),Qt=je(()=>Object.assign({},ot().table.loadingConfig,e.loadingConfig)),Wt=je(()=>e.border?Math.max(2,Math.ceil(u.scrollbarWidth/u.tableColumn.length)):1),Yt=je(()=>Object.assign({},ot().table.customConfig,e.customConfig)),Et=je(()=>{const{visibleColumn:t}=g,{tableColumn:o}=u;return o.length||t.length?t.filter(n=>n.width==="auto"||n.minWidth==="auto"):[]}),Vt=je(()=>{const{collectColumn:t}=g;let o=0;return t.forEach(n=>{n.renderFixed&&o++}),o}),Ot=je(()=>{const t=Vt.value,o=ge.value,{maxFixedSize:n}=o;return n?t>=n:!1}),Wo=je(()=>{const{border:t}=e;return t===!0?"full":t||"default"}),vo=je(()=>{const{treeConfig:t}=e,{tableData:o}=u,{tableFullData:n}=g,r=ye.value,{strict:a,checkMethod:h}=r;return a?o.length||n.length?h?n.every(d=>!h({row:d})):!1:!0:!1}),tl=je(()=>{const{overflowX:t,scrollXLoad:o,overflowY:n,scrollYLoad:r}=u;return{x:t&&o,y:n&&r}}),ol={refElem:N,refTooltip:z,refValidTooltip:M,refTableFilter:b,refTableCustom:p,refTableMenu:k,refTableHeader:y,refTableBody:O,refTableFooter:R,refTableLeftHeader:H,refTableLeftBody:W,refTableLeftFooter:q,refTableRightHeader:ae,refTableRightBody:ce,refTableRightFooter:$,refLeftContainer:Q,refRightContainer:ue,refCellResizeBar:we,refScrollXVirtualElem:A,refScrollYVirtualElem:G,refScrollXHandleElem:_,refScrollYHandleElem:U,refScrollXSpaceElem:ne,refScrollYSpaceElem:j},ll={computeSize:X,computeTableId:ee,computeValidOpts:be,computeSXOpts:pe,computeSYOpts:Re,computeColumnOpts:ge,computeCellOpts:Oe,computeRowOpts:_e,computeDragOpts:de,computeResizeOpts:ie,computeResizableOpts:Se,computeSeqOpts:Ze,computeRadioOpts:Be,computeCheckboxOpts:ye,computeTooltipOpts:Ae,computeEditOpts:le,computeSortOpts:Fe,computeFilterOpts:Ee,computeMouseOpts:ke,computeAreaOpts:Pe,computeKeyboardOpts:Ue,computeClipOpts:ze,computeFNROpts:Je,computeHeaderMenu:Ge,computeBodyMenu:lt,computeFooterMenu:Xe,computeIsMenu:it,computeMenuOpts:We,computeExportOpts:bo,computeImportOpts:Zt,computePrintOpts:_o,computeExpandOpts:bt,computeTreeOpts:et,computeEmptyOpts:St,computeLoadingOpts:Qt,computeCustomOpts:Yt,computeFixedColumnSize:Vt,computeIsMaxFixedColumn:Ot,computeIsAllCheckboxDisabled:vo,computeVirtualScrollBars:tl},m={xID:C,props:e,context:l,reactData:u,internalData:g,getRefMaps:()=>ol,getComputeMaps:()=>ll,xegrid:K},Mo=(t,o,n)=>{const r=i.get(t,n),a=i.get(o,n);return Vo(r)&&Vo(a)?!0:i.isString(r)||i.isNumber(r)?""+r==""+a:i.isEqual(r,a)},io=t=>{const o=Fe.value,{orders:n}=o,r=t.order||null,a=n.indexOf(r)+1;return n[a<n.length?a:0]},lo=t=>{const o=ot().version,n=i.toStringJSON(localStorage.getItem(Zs)||""),r=n&&n._v===o?n:{_v:o};return(t?r[t]:r)||{}},Hl=(t,o)=>{const n=ot().version,r=lo();r[t]=o||void 0,r._v=n,localStorage.setItem(Zs,i.toJSONString(r))},ao=t=>{const{fullAllDataRowIdData:o}=g,n={};return i.each(t,(r,a)=>{o[a]&&(n[a]=r)}),n},Fo=t=>{const{fullDataRowIdData:o}=g,n=[];return i.each(t,(r,a)=>{o[a]&&m.findRowIndexOf(n,o[a].row)===-1&&n.push(o[a].row)}),n},nl=()=>{const{visibleColumn:t}=g,o=O.value,n=o?o.$el:null;if(n){const{scrollLeft:r,clientWidth:a}=n,h=r+a;let d=-1,w=0,E=0;for(let F=0,D=t.length;F<D&&(w+=t[F].renderWidth,d===-1&&r<w&&(d=F),!(d>=0&&(E++,w>h)));F++);return{toVisibleIndex:Math.max(0,d),visibleSize:Math.max(6,E)}}return{toVisibleIndex:0,visibleSize:6}},sl=()=>{const t=y.value,o=O.value,n=o?o.$el:null,r=X.value,a=Ye.value;let h=0;if(n){const d=t?t.$el:null;let w;w=n.querySelector("tr"),!w&&d&&(w=d.querySelector("tr")),w&&(h=w.clientHeight),h||(h=a[r||"default"])}return h},Bl=()=>{const{scrollYStore:t,afterFullData:o,fullAllDataRowIdData:n}=g,r=O.value,a=r?r.$el:null,{rowHeight:h}=t;if(a){const{scrollTop:d,clientHeight:w}=a,E=d+w;let F=-1,D=0,V=0;for(let L=0,P=o.length;L<P;L++){const se=o[L],Y=re(m,se),te=n[Y];if(!te||(D+=te.height||h,F===-1&&d<D&&(F=L),F>=0&&(V++,D>E)))break}return{toVisibleIndex:Math.max(0,F),visibleSize:Math.max(8,V)}}return{toVisibleIndex:0,visibleSize:8}},Vl=(t,o,n)=>{for(let r=0,a=t.length;r<a;r++){const h=t[r],{startIndex:d,endIndex:w}=o,E=h[n],F=h[n+"span"],D=E+F;E<d&&d<D&&(o.startIndex=E),E<w&&w<D&&(o.endIndex=D),(o.startIndex!==d||o.endIndex!==w)&&(r=-1)}},ko=(t,o,n)=>{if(t){const{treeConfig:r}=e,{visibleColumn:a}=g;i.isArray(t)||(t=[t]),r&&t.length&&Gt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(h=>{let{row:d,col:w,rowspan:E,colspan:F}=h;if(n&&i.isNumber(d)&&(d=n[d]),i.isNumber(w)&&(w=a[w]),(n?d:i.isNumber(d))&&w&&(E||F)&&(E=i.toNumber(E)||1,F=i.toNumber(F)||1,E>1||F>1)){const D=i.findIndexOf(o,L=>(L._row===d||re(m,L._row)===re(m,d))&&(L._col.id===w||L._col.id===w.id)),V=o[D];if(V)V.rowspan=E,V.colspan=F,V._rowspan=E,V._colspan=F;else{const L=n?m.findRowIndexOf(n,d):d,P=x.getVTColumnIndex(w);o.push({row:L,col:P,rowspan:E,colspan:F,_row:d,_col:w,_rowspan:E,_colspan:F})}}})}},Io=(t,o,n)=>{const r=[];if(t){const{treeConfig:a}=e,{visibleColumn:h}=g;i.isArray(t)||(t=[t]),a&&t.length&&Gt("vxe.error.noTree",["merge-cells | merge-footer-items"]),t.forEach(d=>{let{row:w,col:E}=d;n&&i.isNumber(w)&&(w=n[w]),i.isNumber(E)&&(E=h[E]);const F=i.findIndexOf(o,D=>(D._row===w||re(m,D._row)===re(m,w))&&(D._col.id===E||D._col.id===E.id));if(F>-1){const D=o.splice(F,1);r.push(D[0])}})}return r},rl=()=>{const{tableFullColumn:t}=g;t.forEach(o=>{o.order=null})},bl=t=>{const{parentHeight:o}=u,n=e[t];let r=0;if(n)if(n==="100%"||n==="auto")r=o;else{const a=m.getExcludeHeight();ql(n)?r=Math.floor((i.toInteger(n)||1)/100*o):r=i.toNumber(n),r=Math.max(40,r-a)}return r},co=t=>{let{collectColumn:o}=g;const{resizableData:n,sortData:r,visibleData:a,fixedData:h}=t;let d=!1;(n||r||a||h)&&(i.eachTree(o,(w,E,F,D,V)=>{const L=w.getKey();V||(h&&h[L]&&(w.fixed=h[L]),r&&i.isNumber(r[L])&&(d=!0,w.renderSortNumber=r[L])),n&&i.isNumber(n[L])&&(w.resizeWidth=n[L]),a&&i.isBoolean(a[L])&&(w.visible=a[L])}),d&&(o=i.orderBy(o,"renderSortNumber"),g.collectColumn=o,g.tableFullColumn=on(o)))},Mn=()=>{const{customConfig:t}=e,o=ee.value,n=Yt.value,{storage:r,restoreStore:a}=n,h=r===!0,d=h?{}:Object.assign({},r||{}),w=h||d.resizable,E=h||d.visible,F=h||d.fixed,D=h||d.sort;if(t&&(w||E||F||D)){if(!o){Gt("vxe.error.reqProp",["id"]);return}const V=lo(o);return a?Promise.resolve(a({id:o,type:"restore",storeData:V})).then(L=>{if(L)return co(L)}).catch(L=>L):co(V)}},vl=()=>{const{tableFullColumn:t,collectColumn:o}=g,n=g.fullColumnIdData={},r=g.fullColumnFieldData={};ke.value,ge.value,_e.value;const a=o.some(kl);let h=!!e.showOverflow,d,w;const E=(F,D,V,L,P)=>{const{id:se,field:Y,fixed:te,type:Z,treeNode:fe}=F,ve={$index:-1,_index:-1,column:F,colid:se,index:D,items:V,parent:P||null,width:0};Y&&(r[Y]=ve),fe?w||(w=F):Z==="expand"&&(d||(d=F)),h&&F.showOverflow===!1&&(h=!1),n[se]&&Gt("vxe.error.colRepet",["colId",se]),n[se]=ve};a?i.eachTree(o,(F,D,V,L,P,se)=>{F.level=se.length,E(F,D,V,L,P)}):t.forEach(E),u.isGroup=a,u.treeNodeColumn=w,u.expandColumn=d,u.isAllOverflow=h},il=()=>{g.customHeight=bl("height"),g.customMinHeight=bl("minHeight"),g.customMaxHeight=bl("maxHeight")},Fn=()=>{const{tableData:t}=u,o=Et.value;return!t.length||!o.length?(u.isCalcColumn=!1,oe()):(u.isCalcColumn=!0,oe().then(()=>{const{fullColumnIdData:n}=g,r=N.value;r&&(o.forEach(a=>{const h=a.id,d=n[h],w=r.querySelectorAll(`.vxe-header--column.${a.id}>.vxe-cell,.vxe-body--column.${a.id}>.vxe-cell,.vxe-footer--column.${a.id}>.vxe-cell`),E=w[0];let F=0;if(E){const V=getComputedStyle(E);F=Math.floor(i.toNumber(V.paddingLeft)+i.toNumber(V.paddingRight))+2}let D=a.renderAutoWidth-F;i.arrayEach(w,V=>{const L=V,P=L.parentElement;let se=0;if(`${P.tagName}`.toLowerCase()==="th")i.arrayEach(L.children,Y=>{se+=Y.offsetWidth+1});else{const Y=L.firstElementChild;Y&&(se=Y.offsetWidth)}se&&(D=Math.max(D,Math.ceil(se)+4))}),d&&(d.width=Math.max(D,d.width)),a.renderAutoWidth=D+F}),B.analyColumnWidth()),u.isCalcColumn=!1}))},Nl=()=>{const t=y.value,o=O.value,n=R.value,r=o?o.$el:null,a=t?t.$el:null,h=n?n.$el:null;if(!r)return;let d=0;const w=40,E=r.clientWidth-1;let F=E,D=F/100;const{fit:V}=e,{columnStore:L}=u,{resizeList:P,pxMinList:se,autoMinList:Y,pxList:te,scaleList:Z,scaleMinList:fe,autoList:ve,remainList:Me}=L;if(se.forEach(Ke=>{const qe=i.toInteger(Ke.minWidth);d+=qe,Ke.renderWidth=qe}),Y.forEach(Ke=>{const qe=Math.max(60,i.toInteger(Ke.renderAutoWidth));d+=qe,Ke.renderWidth=qe}),fe.forEach(Ke=>{const qe=Math.floor(i.toInteger(Ke.minWidth)*D);d+=qe,Ke.renderWidth=qe}),Z.forEach(Ke=>{const qe=Math.floor(i.toInteger(Ke.width)*D);d+=qe,Ke.renderWidth=qe}),te.forEach(Ke=>{const qe=i.toInteger(Ke.width);d+=qe,Ke.renderWidth=qe}),ve.forEach(Ke=>{const qe=Math.max(60,i.toInteger(Ke.renderAutoWidth));d+=qe,Ke.renderWidth=qe}),P.forEach(Ke=>{const qe=i.toInteger(Ke.resizeWidth);d+=qe,Ke.renderWidth=qe}),F-=d,D=F>0?Math.floor(F/(fe.length+se.length+Y.length+Me.length)):0,V?F>0&&fe.concat(se).concat(Y).forEach(Ke=>{d+=D,Ke.renderWidth+=D}):D=w,Me.forEach(Ke=>{const qe=Math.max(D,w);Ke.renderWidth=qe,d+=qe}),V){const Ke=Z.concat(fe).concat(se).concat(Y).concat(Me);let qe=Ke.length-1;if(qe>0){let Ft=E-d;if(Ft>0){for(;Ft>0&&qe>=0;)Ft--,Ke[qe--].renderWidth++;d=E}}}const De=r.offsetHeight,$e=r.scrollHeight>r.clientHeight;let nt=0;$e&&(nt=Math.max(r.offsetWidth-r.clientWidth,0)),u.scrollbarWidth=nt,u.overflowY=$e,g.tableWidth=d,g.tableHeight=De;let Ct=0;a&&(Ct=a.clientHeight,oe(()=>{a&&r&&a.scrollLeft!==r.scrollLeft&&(a.scrollLeft=r.scrollLeft)})),g.headerHeight=Ct;let ft=!1,tt=0,vt=0;h?(tt=h.offsetHeight,ft=d>h.clientWidth,vt=Math.max(tt-h.clientHeight,0)):(ft=d>E,vt=Math.max(De-r.clientHeight,0)),g.footerHeight=tt,u.overflowX=ft,u.scrollbarHeight=vt,il(),u.parentHeight=Math.max(g.headerHeight+tt+20,B.getParentHeight()),ft&&B.checkScrolling()},al=()=>{const{tableData:t,scrollYLoad:o}=u,{fullAllDataRowIdData:n}=g,r=N.value;o&&r&&t.forEach(a=>{const h=re(m,a),d=n[h],w=r.querySelectorAll(`.vxe-body--row[rowid="${h}"]`);if(d&&w.length){let E=0;for(let F=0;F<w.length;F++){const D=w[F];E=Math.max(E,D.offsetHeight)}d.height=E}})},Do=t=>{const{sortBy:o,sortType:n}=t;return r=>{let a;return o?a=i.isFunction(o)?o({row:r,column:t}):i.get(r,o):a=x.getCellLabel(r,t),!n||n==="auto"?isNaN(a)?a:i.toNumber(a):n==="number"?i.toNumber(a):n==="string"?i.toValueString(a):a}},Po=()=>{const{treeConfig:t}=e,{afterFullData:o,fullDataRowIdData:n,fullAllDataRowIdData:r}=g,{afterTreeFullData:a}=g,h=et.value,d=h.children||h.childrenField,w={};t?i.eachTree(a,(E,F,D,V)=>{const L=re(m,E),P=r[L],se=V.map((Y,te)=>te%2===0?Number(Y)+1:".").join("");if(P)P.seq=se,P._index=F;else{const Y={row:E,rowid:L,seq:se,index:-1,$index:-1,_index:F,items:[],parent:null,level:0,height:0};r[L]=Y,n[L]=Y}w[L]=E},{children:h.transform?h.mapChildrenField:d}):o.forEach((E,F)=>{const D=re(m,E),V=r[D],L=F+1;if(V)V.seq=L,V._index=F;else{const P={row:E,rowid:D,seq:L,index:-1,$index:-1,_index:F,items:[],parent:null,level:0,height:0};r[D]=P,n[D]=P}w[D]=E}),g.afterFullRowMaps=w},xo=()=>{const{treeConfig:t}=e,{treeExpandedMaps:o}=u,n=et.value,r=n.children||n.childrenField;if(t&&n.transform){const a=[],h={};return i.eachTree(g.afterTreeFullData,(d,w,E,F,D)=>{const V=re(m,d),L=re(m,D);(!D||h[L]&&o[L])&&(h[V]=1,a.push(d))},{children:r}),g.afterFullData=a,Dn(a),a}return g.afterFullData},zo=()=>{const{treeConfig:t}=e,{tableFullColumn:o,tableFullData:n,tableFullTreeData:r}=g,a=Ee.value,h=Fe.value,d=et.value,w=d.children||d.childrenField,{transform:E}=d,{remote:F,filterMethod:D}=a,{remote:V,sortMethod:L,multiple:P,chronological:se}=h;let Y=[],te=[];if(!F||!V){const Z=[];let fe=[];if(o.forEach(ve=>{const{field:Me,sortable:De,order:$e,filters:nt}=ve;if(!F&&nt&&nt.length){const Ct=[],ft=[];nt.forEach(tt=>{tt.checked&&(ft.push(tt),Ct.push(tt.value))}),ft.length&&Z.push({column:ve,valueList:Ct,itemList:ft})}!V&&De&&$e&&fe.push({column:ve,field:Me,property:Me,order:$e,sortTime:ve.sortTime})}),P&&se&&fe.length>1&&(fe=i.orderBy(fe,"sortTime")),!F&&Z.length){const ve=Me=>Z.every(({column:De,valueList:$e,itemList:nt})=>{const{filterMethod:Ct,filterRender:ft}=De,tt=gt(ft)?qs.get(ft.name):null,vt=tt?tt.tableFilterMethod||tt.filterMethod:null,Ke=tt?tt.tableFilterDefaultMethod||tt.defaultTableFilterMethod||tt.defaultFilterMethod:null,qe=Bt(Me,De);return Ct?nt.some(Ft=>Ct({value:Ft.value,option:Ft,cellValue:qe,row:Me,column:De,$table:m})):vt?nt.some(Ft=>vt({value:Ft.value,option:Ft,cellValue:qe,row:Me,column:De,$table:m})):D?D({options:nt,values:$e,cellValue:qe,row:Me,column:De}):Ke?nt.some(Ft=>Ke({value:Ft.value,option:Ft,cellValue:qe,row:Me,column:De,$table:m})):$e.indexOf(i.get(Me,De.field))>-1});t&&E?(te=i.searchTree(r,ve,{original:!0,isEvery:!0,children:d.mapChildrenField,mapChildren:w}),Y=te):(Y=t?r.filter(ve):n.filter(ve),te=Y)}else t&&E?(te=i.searchTree(r,()=>!0,{original:!0,isEvery:!0,children:d.mapChildrenField,mapChildren:w}),Y=te):(Y=t?r.slice(0):n.slice(0),te=Y);if(!V&&fe.length)if(t&&E){if(L){const ve=L({data:te,sortList:fe,$table:m});te=i.isArray(ve)?ve:te}else te=i.orderBy(te,fe.map(({column:ve,order:Me})=>[Do(ve),Me]));Y=te}else{if(L){const ve=L({data:Y,sortList:fe,$table:m});Y=i.isArray(ve)?ve:Y}else Y=i.orderBy(Y,fe.map(({column:ve,order:Me})=>[Do(ve),Me]));te=Y}}else t&&E?(te=i.searchTree(r,()=>!0,{original:!0,isEvery:!0,children:d.mapChildrenField,mapChildren:w}),Y=te):(Y=t?r.slice(0):n.slice(0),te=Y);g.afterFullData=Y,g.afterTreeFullData=te,Po()},Mt=()=>{const{border:t,showFooter:o,showOverflow:n,showHeaderOverflow:r,showFooterOverflow:a,mouseConfig:h,spanMethod:d,footerSpanMethod:w,keyboardConfig:E}=e,{isGroup:F,currentRow:D,tableColumn:V,scrollXLoad:L,scrollYLoad:P,overflowX:se,scrollbarWidth:Y,scrollbarHeight:te,columnStore:Z,editStore:fe,mergeList:ve,mergeFooterList:Me,isAllOverflow:De}=u;let{visibleColumn:$e,fullColumnIdData:nt,tableHeight:Ct,tableWidth:ft,headerHeight:tt,footerHeight:vt,elemStore:Ke,customHeight:qe,customMinHeight:Ft,customMaxHeight:Co}=g;const Cl=["main","left","right"],ul=me.value,wo=Wt.value,Ao=ke.value,wl=Ue.value,Ko=Ke["main-body-wrapper"],El=Ko?Ko.value:null;ul&&(ul.style.top=`${tt}px`,ul.style.height=El?`${El.offsetHeight-te}px`:""),qe>0&&o&&(qe+=te);const Lo=A.value;Lo&&(Lo.style.height=`${te}px`);const so=G.value;if(so){let Qe=0,dt=0;const Nt=Ft-tt-vt;Co&&(dt=Co-tt-vt,dt=Math.max(Nt,dt)),qe&&(Qe=qe-tt-vt,dt&&(Qe=Math.min(dt,Qe)),Qe=Math.max(Nt,Qe)),so.style.top=`${tt}px`,so.style.width=`${Y}px`,so.style.height=`${Qe+(se?-Math.max(1,te):0)}px`}return Cl.forEach((Qe,dt)=>{const Nt=dt>0?Qe:"",sn=["header","body","footer"],jl=Nt==="left";let Ho=[],Yo;Nt&&(Ho=jl?Z.leftList:Z.rightList,Yo=jl?Q.value:ue.value),sn.forEach(Jt=>{const _l=Ke[`${Qe}-${Jt}-wrapper`],Eo=_l?_l.value:null,Is=Ke[`${Qe}-${Jt}-table`],fl=Is?Is.value:null;if(Jt==="header"){let qt=ft,Pt=V;F?Pt=$e:Nt&&(L||r)&&(Pt=Ho),qt=Pt.reduce((eo,ro)=>eo+ro.renderWidth,0),fl&&(fl.style.width=qt?`${qt+Y}px`:"");const ho=Ke[`${Qe}-${Jt}-repair`],zt=ho?ho.value:null;zt&&(zt.style.width=`${ft}px`);const Lt=Ke[`${Qe}-${Jt}-list`],Ut=Lt?Lt.value:null;F&&Ut&&i.arrayEach(Ut.querySelectorAll(".col--group"),eo=>{const ro=x.getColumnNode(eo);if(ro){const rn=ro.item,{showHeaderOverflow:Pn}=rn,Wl=i.isBoolean(Pn)?Pn:r,Pl=Wl==="title"||(Wl===!0||Wl==="tooltip")||Wl==="ellipsis";let yl=0,zl=0;Pl&&i.eachTree(rn.children,Xl=>{(!Xl.children||!rn.children.length)&&zl++,yl+=Xl.renderWidth},{children:"children"}),eo.style.width=Pl?`${yl-zl-(t?2:0)}px`:""}})}else if(Jt==="body"){const qt=Ke[`${Qe}-${Jt}-emptyBlock`],Pt=qt?qt.value:null;if(qn(Eo)){let Lt=0;const Ut=Ft-tt-vt;if(Co&&(Lt=Co-tt-vt,Nt&&(Lt-=o?0:te),Lt=Math.max(Ut,Lt),Eo.style.maxHeight=`${Lt}px`),qe){let eo=qe-tt-vt;Nt&&(eo-=o?0:te),Lt&&(eo=Math.min(Lt,eo)),Eo.style.height=`${Math.max(Ut,eo)}px`}else Eo.style.height="";Eo.style.minHeight=`${Ut}px`}Yo&&(qn(Eo)&&(Eo.style.top=`${tt}px`),Yo.style.height=`${(qe>0?qe-tt-vt:Ct)+tt+vt-te*(o?2:1)}px`,Yo.style.width=`${Ho.reduce((Lt,Ut)=>Lt+Ut.renderWidth,jl?0:Y)}px`);let ho=ft,zt=V;Nt&&(!u.expandColumn&&(P||n&&De)&&!ve.length&&!d&&!(E&&wl.isMerge)?zt=Ho:zt=$e),ho=zt.reduce((Lt,Ut)=>Lt+Ut.renderWidth,0),fl&&(fl.style.width=ho?`${ho}px`:"",fl.style.paddingRight=Y&&Nt&&(Qo["-moz"]||Qo.safari)?`${Y}px`:""),Pt&&(Pt.style.width=ho?`${ho}px`:"")}else if(Jt==="footer"){let qt=ft,Pt=V;Nt&&(!u.expandColumn&&(L||a)&&(!Me.length||!w)?Pt=Ho:Pt=$e),qt=Pt.reduce((ho,zt)=>ho+zt.renderWidth,0),qn(Eo)&&(Yo&&(Eo.style.top=`${qe>0?qe-vt:Ct+tt}px`),Eo.style.marginTop=`${-Math.max(1,te)}px`),fl&&(fl.style.width=qt?`${qt+Y}px`:"")}const Ds=Ke[`${Qe}-${Jt}-colgroup`],Ts=Ds?Ds.value:null;Ts&&i.arrayEach(Ts.children,qt=>{const Pt=qt.getAttribute("name");if(Pt==="col_gutter"&&(qt.style.width=`${Y}px`),nt[Pt]){const zt=nt[Pt].column,{showHeaderOverflow:Lt,showFooterOverflow:Ut,showOverflow:eo}=zt;let ro;qt.style.width=`${zt.renderWidth}px`,Jt==="header"?ro=i.isUndefined(Lt)||i.isNull(Lt)?r:Lt:Jt==="footer"?ro=i.isUndefined(Ut)||i.isNull(Ut)?a:Ut:ro=i.isUndefined(eo)||i.isNull(eo)?n:eo;let an=ro==="title"||(ro===!0||ro==="tooltip")||ro==="ellipsis";const zn=Ke[`${Qe}-${Jt}-list`],Xn=zn?zn.value:null;P&&!an&&(an=!0),Xn&&i.arrayEach(Xn.querySelectorAll(`.${zt.id}`),Pl=>{const yl=parseInt(Pl.getAttribute("colspan")||1),zl=Pl.querySelector(".vxe-cell");let Xl=zt.renderWidth;if(zl){if(yl>1){const ci=x.getColumnIndex(zt);for(let Kn=1;Kn<yl;Kn++){const As=x.getColumns(ci+Kn);As&&(Xl+=As.renderWidth)}}zl.style.width=an?`${Xl-wo*yl}px`:""}})}})})}),D&&x.setCurrentRow(D),h&&Ao.selected&&fe.selected.row&&fe.selected.column&&m.addCellSelectedClass(),oe()},uo=t=>m.triggerValidate?m.triggerValidate(t):oe(),xl=(t,o)=>{uo("blur").catch(n=>n).then(()=>{m.handleEdit(o,t).then(()=>uo("change")).catch(n=>n)})},Xo=()=>{const{sortConfig:t}=e;if(t){const o=Fe.value;let{defaultSort:n}=o;n&&(i.isArray(n)||(n=[n]),n.length&&((t.multiple?n:n.slice(0,1)).forEach((r,a)=>{const{field:h,order:d}=r;if(h&&d){const w=x.getColumnByField(h);w&&w.sortable&&(w.order=d,w.sortTime=Date.now()+a)}}),o.remote||B.handleTableData(!0).then(Mt)))}},kn=()=>{const{checkboxConfig:t}=e;if(t){const{fullDataRowIdData:o}=g,n=ye.value,{checkAll:r,checkRowKeys:a}=n;if(r)dl(!0,!0);else if(a){const h=[];a.forEach(d=>{o[d]&&h.push(o[d].row)}),fo(h,!0,!0)}}},Zl=()=>{const{radioConfig:t}=e;if(t){const{fullDataRowIdData:o}=g,n=Be.value,{checkRowKey:r,reserve:a}=n;if(r&&(o[r]&&Dt(o[r].row,!0),a)){const h=Bo(m);g.radioReserveRow={[h]:r}}}},cl=()=>{const{expandConfig:t}=e;if(t){const{fullDataRowIdData:o}=g,n=bt.value,{expandAll:r,expandRowKeys:a}=n;if(r)x.setAllRowExpand(!0);else if(a){const h=[];a.forEach(d=>{o[d]&&h.push(o[d].row)}),x.setRowExpand(h,!0)}}},In=t=>{Be.value.reserve&&(g.radioReserveRow=t)},jt=(t,o)=>{const{checkboxReserveRowMap:n}=g;if(ye.value.reserve){const a=re(m,t);o?n[a]=t:n[a]&&delete n[a]}},Dt=(t,o)=>{const n=Be.value,{checkMethod:r}=n;return t&&(o||!r||r({row:t}))&&(u.selectRadioRow=t,In(t)),oe()},fo=(t,o,n)=>(t&&!i.isArray(t)&&(t=[t]),B.handleBatchSelectRows(t,!!o,n),B.checkSelectionStatus(),oe()),dl=(t,o)=>{const{treeConfig:n}=e,{selectCheckboxMaps:r}=u,{afterFullData:a,checkboxReserveRowMap:h}=g,d=et.value,w=d.children||d.childrenField,E=ye.value,{checkField:F,reserve:D,checkStrictly:V,checkMethod:L}=E,P=E.indeterminateField||E.halfField,se={};if(V)u.isAllSelected=t;else{if(F){const Y=te=>{(o||!L||L({row:te}))&&(t&&(se[re(m,te)]=te),i.set(te,F,t)),n&&P&&i.set(te,P,!1)};n?i.eachTree(a,Y,{children:w}):a.forEach(Y)}else n?t?i.eachTree(a,Y=>{(o||!L||L({row:Y}))&&(se[re(m,Y)]=Y)},{children:w}):!o&&L&&i.eachTree(a,Y=>{const te=re(m,Y);!L({row:Y})&&r[te]&&(se[te]=Y)},{children:w}):t?!o&&L?a.forEach(Y=>{const te=re(m,Y);(r[te]||L({row:Y}))&&(se[te]=Y)}):a.forEach(Y=>{se[re(m,Y)]=Y}):!o&&L&&a.forEach(Y=>{const te=re(m,Y);!L({row:Y})&&r[te]&&(se[te]=Y)});D&&(t?i.each(se,(Y,te)=>{h[te]=Y}):a.forEach(Y=>jt(Y,!1))),u.selectCheckboxMaps=F?{}:se}return u.treeIndeterminateMaps={},g.treeIndeterminateRowMaps={},B.checkSelectionStatus(),oe()},mt=()=>{const{treeConfig:t}=e,{expandColumn:o,currentRow:n,selectCheckboxMaps:r,selectRadioRow:a,rowExpandedMaps:h,treeExpandedMaps:d}=u,{fullDataRowIdData:w,fullAllDataRowIdData:E,radioReserveRow:F}=g,D=bt.value,V=et.value,L=Be.value,P=ye.value;if(a&&!E[re(m,a)]&&(u.selectRadioRow=null),L.reserve&&F){const se=re(m,F);w[se]&&Dt(w[se].row,!0)}u.selectCheckboxMaps=ao(r),P.reserve&&fo(Fo(g.checkboxReserveRowMap),!0,!0),n&&!E[re(m,n)]&&(u.currentRow=null),u.rowExpandedMaps=o?ao(h):{},o&&D.reserve&&x.setRowExpand(Fo(g.rowExpandedReserveRowMap),!0),u.treeExpandedMaps=t?ao(d):{},t&&V.reserve&&x.setTreeExpand(Fo(g.treeExpandedReserveRowMap),!0)},no=()=>{const{treeConfig:t}=e;if(t){const{tableFullData:o}=g,n=et.value,{expandAll:r,expandRowKeys:a}=n,h=n.children||n.childrenField;if(r)x.setAllTreeExpand(!0);else if(a){const d=[],w=Bo(m);a.forEach(E=>{const F=i.findTree(o,D=>E===i.get(D,w),{children:h});F&&d.push(F.item)}),x.setTreeExpand(d,!0)}}},To=t=>{const o=et.value,n=ye.value,{transform:r,loadMethod:a}=o,{checkStrictly:h}=n;return new Promise(d=>{if(a){const{treeExpandLazyLoadedMaps:w}=u,{fullAllDataRowIdData:E}=g,F=re(m,t),D=E[F];w[F]=t,Promise.resolve(a({$table:m,row:t})).then(V=>{if(D&&(D.treeLoaded=!0),w[F]&&delete w[F],i.isArray(V)||(V=[]),V)return x.loadTreeChildren(t,V).then(L=>{const{treeExpandedMaps:P}=u;return L.length&&!P[F]&&(P[F]=t),!h&&x.isCheckedByCheckboxRow(t)&&fo(L,!0),oe().then(()=>{if(r)return B.handleTableData()})})}).catch(()=>{const{treeExpandLazyLoadedMaps:V}=u;D&&(D.treeLoaded=!1),V[F]&&delete V[F]}).finally(()=>{oe().then(()=>x.recalculate()).then(()=>d())})}else d()})},ps=(t,o)=>{const{treeExpandedReserveRowMap:n}=g;if(et.value.reserve){const a=re(m,t);o?n[a]=t:n[a]&&delete n[a]}},gs=t=>new Promise(o=>{const n=bt.value,{loadMethod:r}=n;if(r){const{fullAllDataRowIdData:a}=g,{rowExpandLazyLoadedMaps:h}=u,d=re(m,t),w=a[d];h[d]=t,r({$table:m,row:t,rowIndex:x.getRowIndex(t),$rowIndex:x.getVMRowIndex(t)}).then(()=>{const{rowExpandedMaps:E}=u;w&&(w.expandLoaded=!0),E[d]=t}).catch(()=>{w&&(w.expandLoaded=!1)}).finally(()=>{const{rowExpandLazyLoadedMaps:E}=u;E[d]&&delete E[d],oe().then(()=>x.recalculate()).then(()=>o())})}else o()}),ms=(t,o)=>{const{rowExpandedReserveRowMap:n}=g;if(bt.value.reserve){const a=re(m,t);o?n[a]=t:n[a]&&delete n[a]}},jr=()=>{const{mergeCells:t}=e;t&&x.setMergeCells(t)},_r=()=>{const{mergeFooterItems:t}=e;t&&x.setMergeFooterItems(t)},Ql=()=>oe().then(()=>{const{showOverflow:t}=e,{scrollXLoad:o,scrollYLoad:n}=u,{scrollXStore:r,scrollYStore:a}=g,h=Re.value,d=pe.value;if(o){const{visibleSize:F}=nl(),V=Math.max(t?0:2,d.oSize?i.toNumber(d.oSize):Qo.edge?5:0);r.offsetSize=V,r.visibleSize=F,r.endIndex=Math.max(r.startIndex+r.visibleSize+V,r.endIndex),B.updateScrollXData()}else B.updateScrollXSpace();al();const w=sl();a.rowHeight=w,u.rowHeight=w;const{visibleSize:E}=Bl();if(n){const D=Math.max(t?0:2,h.oSize?i.toNumber(h.oSize):Qo.edge?10:0);a.offsetSize=D,a.visibleSize=E,a.endIndex=Math.max(a.startIndex+E+D,a.endIndex),B.updateScrollYData()}else B.updateScrollYSpace();oe(Mt)}),Jl=t=>{const{keepSource:o,treeConfig:n}=e,{editStore:r,scrollYLoad:a}=u,{scrollYStore:h,scrollXStore:d,lastScrollLeft:w,lastScrollTop:E}=g,F=et.value,{transform:D}=F,V=F.children||F.childrenField;let L=[],P=Zo(t?t.slice(0):[]);n&&(D?(L=i.toArrayTree(P,{key:F.rowField,parentKey:F.parentField,children:V,mapChildren:F.mapChildrenField}),P=L.slice(0)):L=P.slice(0)),h.startIndex=0,h.endIndex=1,d.startIndex=0,d.endIndex=1,u.scrollVMLoading=!1,r.insertMaps={},r.removeMaps={};const se=Dn(P);return u.scrollYLoad=se,g.tableFullData=P,g.tableFullTreeData=L,B.cacheRowMap(!0),g.tableSynchData=t,o&&B.cacheSourceMap(P),m.clearCellAreas&&e.mouseConfig&&(m.clearCellAreas(),m.clearCopyCellArea()),x.clearMergeCells(),x.clearMergeFooterItems(),B.handleTableData(!0),x.updateFooter(),oe().then(()=>{il(),Mt()}).then(()=>{Ql()}).then(()=>(se&&(h.endIndex=h.visibleSize),mt(),B.checkSelectionStatus(),new Promise(Y=>{oe().then(()=>x.recalculate()).then(()=>{let te=w,Z=E;const fe=pe.value,ve=Re.value;fe.scrollToLeftOnChange&&(te=0),ve.scrollToTopOnChange&&(Z=0),a===se?Un(m,te,Z).then(Y):setTimeout(()=>Un(m,te,Z).then(Y))})})))},en=()=>{kn(),Zl(),cl(),no(),jr(),_r(),oe(()=>setTimeout(()=>x.recalculate()))},tn=()=>{Xo()},bs=()=>{const{scrollXLoad:t}=u,{visibleColumn:o,scrollXStore:n,fullColumnIdData:r}=g,a=t?o.slice(n.startIndex,n.endIndex):o.slice(0);a.forEach((h,d)=>{const w=h.id,E=r[w];E&&(E.$index=d)}),u.tableColumn=a},vs=()=>{const{mergeList:t,mergeFooterList:o}=u,{scrollXStore:n}=g,{startIndex:r,endIndex:a,offsetSize:h}=n,{toVisibleIndex:d,visibleSize:w}=nl(),E={startIndex:Math.max(0,d-1-h),endIndex:d+w+h};Vl(t.concat(o),E,"col");const{startIndex:F,endIndex:D}=E;(d<=r||d>=a-w-1)&&(r!==F||a!==D)&&(n.startIndex=F,n.endIndex=D,B.updateScrollXData()),x.closeTooltip()},on=t=>{const o=[];return t.forEach(n=>{o.push(...n.children&&n.children.length?on(n.children):[n])}),o},xs=()=>{const t=[],o=[],n=[],{isGroup:r,columnStore:a}=u,h=pe.value,{collectColumn:d,tableFullColumn:w,scrollXStore:E,fullColumnIdData:F}=g;if(r){const L=[],P=[],se=[];i.eachTree(d,(Y,te,Z,fe,ve)=>{const Me=kl(Y);ve&&ve.fixed&&(Y.fixed=ve.fixed),ve&&Y.fixed!==ve.fixed&&Gt("vxe.error.groupFixed"),Me?Y.visible=!!i.findTree(Y.children,De=>kl(De)?!1:De.visible):Y.visible&&(Y.fixed==="left"?t.push(Y):Y.fixed==="right"?n.push(Y):o.push(Y))}),d.forEach(Y=>{Y.visible&&(Y.fixed==="left"?L.push(Y):Y.fixed==="right"?se.push(Y):P.push(Y))}),u.tableGroupColumn=L.concat(P).concat(se)}else w.forEach(L=>{L.visible&&(L.fixed==="left"?t.push(L):L.fixed==="right"?n.push(L):o.push(L))});const D=t.concat(o).concat(n),V=!!h.enabled&&h.gt>-1&&(h.gt===0||h.gt<w.length);if(u.hasFixedColumn=t.length>0||n.length>0,Object.assign(a,{leftList:t,centerList:o,rightList:n}),V){const{visibleSize:L}=nl();E.startIndex=0,E.endIndex=L,E.visibleSize=L}return(D.length!==g.visibleColumn.length||!g.visibleColumn.every((L,P)=>L===D[P]))&&(x.clearMergeCells(),x.clearMergeFooterItems()),u.scrollXLoad=V,D.forEach((L,P)=>{const se=L.id,Y=F[se];Y&&(Y._index=P)}),g.visibleColumn=D,bs(),x.updateFooter().then(()=>x.recalculate()).then(()=>(x.updateCellAreas(),x.recalculate()))},Wr=()=>{const{collectColumn:t}=g;t.forEach((o,n)=>{const r=n+1;o.sortNumber=r,o.renderSortNumber=r})},Cs=t=>{g.collectColumn=t;const o=on(t);return g.tableFullColumn=o,u._isLoading=!0,Wr(),Promise.resolve(Mn()).then(()=>(u._isLoading=!1,vl(),xs().then(()=>{u.scrollXLoad&&vs()}),x.clearMergeCells(),x.clearMergeFooterItems(),B.handleTableData(!0),oe().then(()=>(J&&J.syncUpdate({collectColumn:t,$table:m}),x.recalculate()))))},Dn=t=>{const{treeConfig:o}=e,n=Re.value,r=et.value,{transform:a}=r,h=t||g.tableFullData,d=(a||!o)&&!!n.enabled&&n.gt>-1&&(n.gt===0||n.gt<h.length);return u.scrollYLoad=d,d},ws=(t,o)=>{const{treeExpandedMaps:n,treeExpandLazyLoadedMaps:r,treeNodeColumn:a}=u,h=Object.assign({},n),{fullAllDataRowIdData:d,tableFullData:w}=g,E=et.value,{reserve:F,lazy:D,accordion:V,toggleMethod:L}=E,P=E.children||E.childrenField,se=E.hasChild||E.hasChildField,Y=[],te=x.getColumnIndex(a),Z=x.getVMColumnIndex(a);let fe=L?t.filter(ve=>L({$table:m,expanded:o,column:a,columnIndex:te,$columnIndex:Z,row:ve})):t;if(V){fe=fe.length?[fe[fe.length-1]]:[];const ve=i.findTree(w,Me=>Me===fe[0],{children:P});ve&&ve.items.forEach(Me=>{const De=re(m,Me);h[De]&&delete h[De]})}return o?fe.forEach(ve=>{const Me=re(m,ve);if(!h[Me]){const De=d[Me];De&&(D&&ve[se]&&!De.treeLoaded&&!r[Me]?Y.push(To(ve)):ve[P]&&ve[P].length&&(h[Me]=ve))}}):fe.forEach(ve=>{const Me=re(m,ve);h[Me]&&delete h[Me]}),F&&fe.forEach(ve=>ps(ve,o)),u.treeExpandedMaps=h,Promise.all(Y).then(()=>x.recalculate())},Pr=(t,o)=>ws(t,o).then(()=>(xo(),B.handleTableData())).then(()=>x.recalculate()),Es=(t,o)=>{dl(o),t&&ut("checkbox-all",{records:x.getCheckboxRecords(),reserves:x.getCheckboxReserveRecords(),indeterminates:x.getCheckboxIndeterminateRecords(),checked:o},t)},ys=()=>{const{mergeList:t}=u,{scrollYStore:o}=g,{startIndex:n,endIndex:r,offsetSize:a}=o,{toVisibleIndex:h,visibleSize:d}=Bl(),w={startIndex:Math.max(0,h-1-a),endIndex:h+d+a};Vl(t,w,"row");const{startIndex:E,endIndex:F}=w;(h<=n||h>=r-d-1)&&(n!==E||r!==F)&&(o.startIndex=E,o.endIndex=F,B.updateScrollYData())},ln=t=>function(o){const{fullAllDataRowIdData:n}=g;if(o){const r=re(m,o),a=n[r];if(a)return a[t]}return-1},Tn=t=>function(o){const{fullColumnIdData:n}=g;if(o){const r=n[o.id];if(r)return r[t]}return-1},zr=i.debounce(function(){ys()},20,{leading:!1,trailing:!0}),Xr=t=>{const o=y.value,n=O.value,r=R.value,a=n.$el,h=o?o.$el:null,d=r?r.$el:null;At(a,t),At(h,t),At(d,t)},Kr=t=>{const o=t.currentTarget,{scrollTop:n,scrollLeft:r}=o,a=!0,h=!1;Xr(r),m.triggerScrollXEvent(t),m.handleScrollEvent(t,h,a,n,r,{type:"table",fixed:""})},Yr=i.debounce(function(){B.updateScrollYSpace()},1e3,{leading:!1,trailing:!0}),qr=t=>{const o=O.value,n=W.value,r=ce.value,a=o.$el,h=n?n.$el:null,d=r?r.$el:null;yt(a,t),yt(h,t),yt(d,t)},Ur=t=>{const o=t.currentTarget,{scrollTop:n,scrollLeft:r}=o,a=!1,h=!0;qr(n),m.triggerScrollYEvent(t),m.handleScrollEvent(t,h,a,n,r,{type:"table",fixed:""})};let Rs;const ut=(t,o,n)=>{c(t,Ui(n,{$table:m,$grid:K},o))};x={dispatchEvent:ut,clearAll(){return ki(m)},syncData(){return Bs("vxe.error.delFunc",["syncData","getData"]),oe().then(()=>(u.tableData=[],c("update:data",g.tableFullData),oe()))},updateData(){const{scrollXLoad:t,scrollYLoad:o}=u;return B.handleTableData(!0).then(()=>{if(x.updateFooter(),t||o)return t&&B.updateScrollXSpace(),o&&B.updateScrollYSpace(),x.refreshScroll()}).then(()=>(x.updateCellAreas(),x.recalculate(!0))).then(()=>{setTimeout(()=>m.recalculate(),50)})},loadData(t){const{inited:o,initStatus:n}=g;return Jl(t).then(()=>(g.inited=!0,g.initStatus=!0,n||en(),o||tn(),x.recalculate()))},reloadData(t){const{inited:o}=g;return x.clearAll().then(()=>(g.inited=!0,g.initStatus=!0,Jl(t))).then(()=>(en(),o||tn(),x.recalculate()))},setRow(t,o){if(t&&o){let n=t;i.isArray(t)||(n=[t]);const r=Bo(m);n.forEach(a=>{const h=re(m,a),d=i.clone(Object.assign({},o),!0);i.set(d,r,h),Object.assign(a,d)})}return oe()},reloadRow(t,o,n){const{keepSource:r}=e,{tableData:a}=u,{tableSourceData:h}=g;if(r){const d=x.getRowIndex(t),w=h[d];if(w&&t)if(n){const E=i.clone(i.get(o||t,n),!0);i.set(t,n,E),i.set(w,n,E)}else{const E=Bo(m),F=re(m,t),D=i.clone(Object.assign({},o),!0);i.set(D,E,F),i.destructuring(w,Object.assign(t,D))}u.tableData=a.slice(0)}return oe()},getParams(){return e.params},loadTreeChildren(t,o){const{keepSource:n}=e,{tableSourceData:r,fullDataRowIdData:a,fullAllDataRowIdData:h,sourceDataRowIdData:d}=g,w=et.value,{transform:E,mapChildrenField:F}=w,D=w.children||w.childrenField,V=h[re(m,t)],L=V?V.level:0;return x.createData(o).then(P=>{if(n){const se=re(m,t),Y=i.findTree(r,te=>se===re(m,te),{children:D});Y&&(Y.item[D]=i.clone(P,!0)),P.forEach(te=>{const Z=re(m,te);d[Z]=i.clone(te,!0)})}return i.eachTree(P,(se,Y,te,Z,fe,ve)=>{const Me=re(m,se),De=fe||V.row,$e={row:se,rowid:Me,seq:-1,index:Y,_index:-1,$index:-1,items:te,parent:De,level:L+ve.length,height:0};a[Me]=$e,h[Me]=$e},{children:D}),t[D]=P,E&&(t[F]=i.clone(P,!1)),Po(),P})},loadColumn(t){const o=i.mapTree(t,n=>Zo(Ve.createColumn(m,n)));return Cs(o)},reloadColumn(t){return x.clearAll().then(()=>x.loadColumn(t))},getRowNode(t){if(t){const{fullAllDataRowIdData:o}=g,n=t.getAttribute("rowid");if(n){const r=o[n];if(r)return{rowid:r.rowid,item:r.row,index:r.index,items:r.items,parent:r.parent}}}return null},getColumnNode(t){if(t){const{fullColumnIdData:o}=g,n=t.getAttribute("colid");if(n){const r=o[n];if(r)return{colid:r.colid,item:r.column,index:r.index,items:r.items,parent:r.parent}}}return null},getRowSeq:ln("seq"),getRowIndex:ln("index"),getVTRowIndex:ln("_index"),getVMRowIndex:ln("$index"),getColumnIndex:Tn("index"),getVTColumnIndex:Tn("_index"),getVMColumnIndex:Tn("$index"),createData(t){return oe().then(()=>Zo(B.defineField(t)))},createRow(t){const o=i.isArray(t);return o||(t=[t||{}]),x.createData(t).then(n=>o?n:n[0])},revertData(t,o){const{keepSource:n}=e,{tableSourceData:r,sourceDataRowIdData:a}=g;if(!n)return oe();let h=t;return t?i.isArray(t)||(h=[t]):h=i.toArray(m.getUpdateRecords()),h.length&&h.forEach(d=>{if(!x.isInsertByRow(d)){const w=re(m,d),E=a[w];E&&d&&(o?i.set(d,o,i.clone(i.get(E,o),!0)):i.destructuring(d,i.clone(E,!0)))}}),t?oe():x.reloadData(r)},clearData(t,o){const{tableFullData:n,visibleColumn:r}=g;return arguments.length?t&&!i.isArray(t)&&(t=[t]):t=n,o?t.forEach(a=>i.set(a,o,null)):t.forEach(a=>{r.forEach(h=>{h.field&&So(a,h,null)})}),oe()},getCellElement(t,o){const n=kt(m,o);if(!n)return null;const r=re(m,t),a=O.value,h=W.value,d=ce.value;let w;return n&&(n.fixed&&(n.fixed==="left"?h&&(w=h.$el):d&&(w=d.$el)),w||(w=a.$el),w)?w.querySelector(`.vxe-body--row[rowid="${r}"] .${n.id}`):null},getCellLabel(t,o){const n=kt(m,o);if(!n)return null;const r=n.formatter,a=Bt(t,n);let h=a;if(r){let d;const{fullAllDataRowIdData:w}=g,E=re(m,t),F=n.id,D=w[E];if(D&&(d=D.formatData,d||(d=w[E].formatData={}),D&&d[F]&&d[F].value===a))return d[F].label;const V={cellValue:a,row:t,rowIndex:x.getRowIndex(t),column:n,columnIndex:x.getColumnIndex(n)};if(i.isString(r)){const L=Us.get(r),P=L?L.tableCellFormatMethod||L.cellFormatMethod:null;h=P?P(V):""}else if(i.isArray(r)){const L=Us.get(r[0]),P=L?L.tableCellFormatMethod||L.cellFormatMethod:null;h=P?P(V,...r.slice(1)):""}else h=r(V);d&&(d[F]={value:a,label:h})}return h},isInsertByRow(t){const{editStore:o}=u,n=re(m,t);return o.insertMaps[n]},removeInsertRow(){const{editStore:t}=u;return t.insertMaps={},m.remove(m.getInsertRecords())},isUpdateByRow(t,o){const{keepSource:n}=e,{tableFullColumn:r,fullDataRowIdData:a,sourceDataRowIdData:h}=g;if(n){const d=re(m,t);if(!a[d])return!1;const w=h[d];if(w){if(arguments.length>1)return!Mo(w,t,o);for(let E=0,F=r.length;E<F;E++){const D=r[E].field;if(D&&!Mo(w,t,D))return!0}}}return!1},getColumns(t){const o=g.visibleColumn;return i.isUndefined(t)?o.slice(0):o[t]},getColid(t){const o=kt(m,t);return o?o.id:null},getColumnById(t){const o=g.fullColumnIdData;return t&&o[t]?o[t].column:null},getColumnByField(t){const o=g.fullColumnFieldData;return t&&o[t]?o[t].column:null},getParentColumn(t){const o=g.fullColumnIdData,n=kt(m,t);return n&&n.parentId&&o[n.parentId]?o[n.parentId].column:null},getTableColumn(){return{collectColumn:g.collectColumn.slice(0),fullColumn:g.tableFullColumn.slice(0),visibleColumn:g.visibleColumn.slice(0),tableColumn:u.tableColumn.slice(0)}},getData(t){const o=e.data||g.tableSynchData;return i.isUndefined(t)?o.slice(0):o[t]},getCheckboxRecords(t){const{treeConfig:o}=e,{tableFullData:n,afterFullData:r,afterTreeFullData:a,tableFullTreeData:h,fullDataRowIdData:d,afterFullRowMaps:w}=g,E=et.value,F=ye.value,{transform:D,mapChildrenField:V}=E,{checkField:L}=F,P=E.children||E.childrenField;let se=[];const Y=t?D?h:n:D?a:r;if(L)o?se=i.filterTree(Y,te=>i.get(te,L),{children:D?V:P}):se=Y.filter(te=>i.get(te,L));else{const{selectCheckboxMaps:te}=u;i.each(te,(Z,fe)=>{t?d[fe]&&se.push(d[fe].row):w[fe]&&se.push(w[fe])})}return se},getParentRow(t){const{treeConfig:o}=e,{fullDataRowIdData:n}=g;if(t&&o){let r;if(i.isString(t)?r=t:r=re(m,t),r){const a=n[r];return a?a.parent:null}}return null},getRowById(t){const{fullDataRowIdData:o}=g,n=i.eqNull(t)?"":encodeURIComponent(t||"");return o[n]?o[n].row:null},getRowid(t){return re(m,t)},getTableData(){const{tableData:t,footerTableData:o}=u,{tableFullData:n,afterFullData:r,tableFullTreeData:a}=g;return{fullData:e.treeConfig?a.slice(0):n.slice(0),visibleData:r.slice(0),tableData:t.slice(0),footerData:o.slice(0)}},setColumnFixed(t,o){let n=!1;const r=i.isArray(t)?t:[t],a=ge.value,h=Ot.value;for(let d=0;d<r.length;d++){const w=r[d],E=kt(m,w),F=Vs(m,E);if(F&&F.fixed!==o){if(!F.fixed&&h)return he.modal&&he.modal.message({status:"error",content:es("vxe.table.maxFixedCol",[a.maxFixedSize])}),oe();i.eachTree([F],D=>{D.fixed=o}),B.saveCustomStore("update:fixed"),n||(n=!0)}}return n?x.refreshColumn():oe()},clearColumnFixed(t){let o=!1;return(i.isArray(t)?t:[t]).forEach(r=>{const a=kt(m,r),h=Vs(m,a);h&&h.fixed&&(i.eachTree([h],d=>{d.fixed=null}),B.saveCustomStore("update:fixed"),o||(o=!0))}),o?x.refreshColumn():oe()},hideColumn(t){let o=!1;return(i.isArray(t)?t:[t]).forEach(r=>{const a=kt(m,r);a&&a.visible&&(a.visible=!1,o||(o=!0))}),o?B.handleCustom():oe()},showColumn(t){let o=!1;return(i.isArray(t)?t:[t]).forEach(r=>{const a=kt(m,r);a&&!a.visible&&(a.visible=!0,o||(o=!0))}),o?B.handleCustom():oe()},setColumnWidth(t,o){let n=!1;return(i.isArray(t)?t:[t]).forEach(a=>{const h=kt(m,a);if(h){const d=i.toInteger(o);let w=d;if(ql(o)){const E=O.value,F=E?E.$el:null,D=F?F.clientWidth-1:0;w=Math.floor(d*D)}h.resizeWidth=w,n||(n=!0)}}),n?x.refreshColumn():oe()},getColumnWidth(t){const o=kt(m,t);return o?o.renderWidth:0},resetColumn(t){return Bs("vxe.error.delFunc",["resetColumn","resetCustom"]),m.resetCustom(t)},refreshColumn(t){if(t){const o=i.orderBy(g.collectColumn,"renderSortNumber");g.collectColumn=o;const n=on(o);g.tableFullColumn=n,vl()}return xs().then(()=>x.refreshScroll()).then(()=>x.recalculate())},refreshScroll(){const{lastScrollLeft:t,lastScrollTop:o}=g,n=O.value,r=R.value,a=W.value,h=ce.value,d=n?n.$el:null,w=a?a.$el:null,E=h?h.$el:null,F=r?r.$el:null;return new Promise(D=>{if(t||o)return Un(m,t,o).then().then(()=>{setTimeout(D,30)});yt(d,o),yt(w,o),yt(E,o),At(F,t),setTimeout(D,30)})},recalculate(t){const o=N.value;return!o||!o.clientWidth?oe():(al(),Fn(),Nl(),t===!0?Ql().then(()=>(al(),Nl(),Ql())):Ql())},openTooltip(t,o){const n=T.value;return n&&n.open?n.open(t,o):oe()},closeTooltip(){const{tooltipStore:t}=u,o=z.value,n=T.value;return t.visible&&(Object.assign(t,{row:null,column:null,content:null,visible:!1,currOpts:{}}),o&&o.close&&o.close()),n&&n.close&&n.close(),oe()},isAllCheckboxChecked(){return u.isAllSelected},isAllCheckboxIndeterminate(){return!u.isAllSelected&&u.isIndeterminate},getCheckboxIndeterminateRecords(t){const{treeConfig:o}=e,{fullDataRowIdData:n}=g,{treeIndeterminateMaps:r}=u;if(o){const a=[],h=[];return i.each(r,(d,w)=>{d&&(a.push(d),n[w]&&h.push(d))}),t?a:h}return[]},setCheckboxRow(t,o){return t&&!i.isArray(t)&&(t=[t]),fo(t,o,!0)},isCheckedByCheckboxRow(t){const{selectCheckboxMaps:o}=u,n=ye.value,{checkField:r}=n;return r?i.get(t,r):!!o[re(m,t)]},isIndeterminateByCheckboxRow(t){const{treeIndeterminateMaps:o}=u;return!!o[re(m,t)]&&!x.isCheckedByCheckboxRow(t)},toggleCheckboxRow(t){const{selectCheckboxMaps:o}=u,n=ye.value,{checkField:r}=n,a=r?!i.get(t,r):!o[re(m,t)];return B.handleSelectRow({row:t},a,!0),B.checkSelectionStatus(),oe()},setAllCheckboxRow(t){return dl(t,!0)},getRadioReserveRecord(t){const{treeConfig:o}=e,{fullDataRowIdData:n,radioReserveRow:r,afterFullData:a}=g,h=Be.value,d=et.value,w=d.children||d.childrenField;if(h.reserve&&r){const E=re(m,r);if(t){if(!n[E])return r}else{const F=Bo(m);if(o){if(i.findTree(a,V=>E===i.get(V,F),{children:w}))return r}else if(!a.some(D=>E===i.get(D,F)))return r}}return null},clearRadioReserve(){return g.radioReserveRow=null,oe()},getCheckboxReserveRecords(t){const{treeConfig:o}=e,{afterFullData:n,fullDataRowIdData:r,checkboxReserveRowMap:a}=g,h=ye.value,d=et.value,w=d.children||d.childrenField,E=[];if(h.reserve){const F={};o?i.eachTree(n,D=>{F[re(m,D)]=1},{children:w}):n.forEach(D=>{F[re(m,D)]=1}),i.each(a,(D,V)=>{D&&(t?r[V]||E.push(D):F[V]||E.push(D))})}return E},clearCheckboxReserve(){return g.checkboxReserveRowMap={},oe()},toggleAllCheckboxRow(){return Es(null,!u.isAllSelected),oe()},clearCheckboxRow(){const{treeConfig:t}=e,{tableFullData:o}=g,n=et.value,r=n.children||n.childrenField,a=ye.value,{checkField:h,reserve:d}=a,w=a.indeterminateField||a.halfField;if(h){const E=F=>{t&&w&&i.set(F,w,!1),i.set(F,h,!1)};t?i.eachTree(o,E,{children:r}):o.forEach(E)}return d&&o.forEach(E=>jt(E,!1)),u.isAllSelected=!1,u.isIndeterminate=!1,u.selectCheckboxMaps={},u.treeIndeterminateMaps={},oe()},setCurrentRow(t){const o=_e.value,n=N.value;return x.clearCurrentRow(),u.currentRow=t,(o.isCurrent||e.highlightCurrentRow)&&n&&i.arrayEach(n.querySelectorAll(`[rowid="${re(m,t)}"]`),r=>po(r,"row--current")),oe()},isCheckedByRadioRow(t){return m.eqRow(u.selectRadioRow,t)},setRadioRow(t){return Dt(t,!0)},clearCurrentRow(){const t=N.value;return u.currentRow=null,g.hoverRow=null,t&&i.arrayEach(t.querySelectorAll(".row--current"),o=>Kt(o,"row--current")),oe()},clearRadioRow(){return u.selectRadioRow=null,oe()},getCurrentRecord(){return _e.value.isCurrent||e.highlightCurrentRow?u.currentRow:null},getRadioRecord(t){const{fullDataRowIdData:o,afterFullRowMaps:n}=g,{selectRadioRow:r}=u;if(r){const a=re(m,r);if(t){if(o[a])return r}else if(n[a])return r}return null},getCurrentColumn(){return ge.value.isCurrent||e.highlightCurrentColumn?u.currentColumn:null},setCurrentColumn(t){const o=kt(m,t);return o&&(x.clearCurrentColumn(),u.currentColumn=o),oe()},clearCurrentColumn(){return u.currentColumn=null,oe()},setPendingRow(t,o){const n=Object.assign({},u.pendingRowMaps),r=[...u.pendingRowList];return t&&!i.isArray(t)&&(t=[t]),o?t.forEach(a=>{const h=re(m,a);h&&!n[h]&&(r.push(a),n[h]=a)}):t.forEach(a=>{const h=re(m,a);if(h&&n[h]){const d=m.findRowIndexOf(r,a);d>-1&&r.splice(d,1),delete n[h]}}),u.pendingRowMaps=n,u.pendingRowList=r,oe()},togglePendingRow(t){const o=Object.assign({},u.pendingRowMaps),n=[...u.pendingRowList];return t&&!i.isArray(t)&&(t=[t]),t.forEach(r=>{const a=re(m,r);if(a)if(o[a]){const h=m.findRowIndexOf(n,r);h>-1&&n.splice(h,1),delete o[a]}else n.push(r),o[a]=r}),u.pendingRowMaps=o,u.pendingRowList=n,oe()},hasPendingByRow(t){return x.isPendingByRow(t)},isPendingByRow(t){const{pendingRowMaps:o}=u,n=re(m,t);return!!o[n]},getPendingRecords(){const{pendingRowList:t}=u;return t.slice(0)},clearPendingRow(){return u.pendingRowMaps={},u.pendingRowList=[],oe()},sort(t,o){const n=Fe.value,{multiple:r,remote:a,orders:h}=n;return t&&i.isString(t)&&(t=[{field:t,order:o}]),i.isArray(t)||(t=[t]),t.length?(r||rl(),(r?t:[t[0]]).forEach((d,w)=>{let{field:E,order:F}=d,D=E;i.isString(E)&&(D=x.getColumnByField(E)),D&&D.sortable&&(h.indexOf(F)===-1&&(F=io(D)),D.order!==F&&(D.order=F),D.sortTime=Date.now()+w)}),a||B.handleTableData(!0),oe().then(()=>(x.updateCellAreas(),Mt()))):oe()},clearSort(t){const o=Fe.value;if(t){const n=kt(m,t);n&&(n.order=null)}else rl();return o.remote||B.handleTableData(!0),oe().then(Mt)},isSort(t){if(t){const o=kt(m,t);return o?o.sortable&&!!o.order:!1}return x.getSortColumns().length>0},getSortColumns(){const t=Fe.value,{multiple:o,chronological:n}=t,r=[],{tableFullColumn:a}=g;return a.forEach(h=>{const{field:d,order:w}=h;h.sortable&&w&&r.push({column:h,field:d,property:d,order:w,sortTime:h.sortTime})}),o&&n&&r.length>1?i.orderBy(r,"sortTime"):r},closeFilter(){const{filterStore:t}=u,{column:o,visible:n}=t;return Object.assign(t,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),n&&ut("filter-visible",{column:o,property:o.field,field:o.field,filterList:m.getCheckedFilters(),visible:!1},null),oe()},isActiveFilterByColumn(t){const o=kt(m,t);return o?o.filters&&o.filters.some(n=>n.checked):m.getCheckedFilters().length>0},isFilter(t){return x.isActiveFilterByColumn(t)},isRowExpandLoaded(t){const{fullAllDataRowIdData:o}=g,n=o[re(m,t)];return n&&!!n.expandLoaded},clearRowExpandLoaded(t){const{rowExpandLazyLoadedMaps:o}=u,{fullAllDataRowIdData:n}=g,r=bt.value,{lazy:a}=r,h=re(m,t),d=n[h];return a&&d&&(d.expandLoaded=!1,delete o[h]),oe()},reloadRowExpand(t){const{rowExpandLazyLoadedMaps:o}=u,n=bt.value,{lazy:r}=n,a=re(m,t);return r&&!o[a]&&x.clearRowExpandLoaded(t).then(()=>gs(t)),oe()},reloadExpandContent(t){return x.reloadRowExpand(t)},toggleRowExpand(t){return x.setRowExpand(t,!x.isRowExpandByRow(t))},setAllRowExpand(t){const o=et.value,{tableFullData:n,tableFullTreeData:r}=g,a=o.children||o.childrenField;let h=[];return e.treeConfig?i.eachTree(r,d=>{h.push(d)},{children:a}):h=n,x.setRowExpand(h,t)},setRowExpand(t,o){const{rowExpandedMaps:n,rowExpandLazyLoadedMaps:r,expandColumn:a}=u,{fullAllDataRowIdData:h}=g;let d=Object.assign({},n);const w=bt.value,{reserve:E,lazy:F,accordion:D,toggleMethod:V}=w,L=[],P=x.getColumnIndex(a),se=x.getVMColumnIndex(a);if(t){i.isArray(t)||(t=[t]),D&&(d={},t=t.slice(t.length-1,t.length));const Y=V?t.filter(te=>V({$table:m,expanded:o,column:a,columnIndex:P,$columnIndex:se,row:te,rowIndex:x.getRowIndex(te),$rowIndex:x.getVMRowIndex(te)})):t;o?Y.forEach(te=>{const Z=re(m,te);if(!d[Z]){const fe=h[Z];F&&!fe.expandLoaded&&!r[Z]?L.push(gs(te)):d[Z]=te}}):Y.forEach(te=>{const Z=re(m,te);d[Z]&&delete d[Z]}),E&&Y.forEach(te=>ms(te,o))}return u.rowExpandedMaps=d,Promise.all(L).then(()=>x.recalculate())},isRowExpandByRow(t){const{rowExpandedMaps:o}=u,n=re(m,t);return!!o[n]},isExpandByRow(t){return x.isRowExpandByRow(t)},clearRowExpand(){const{tableFullData:t}=g,o=bt.value,{reserve:n}=o,r=x.getRowExpandRecords();return u.rowExpandedMaps={},n&&t.forEach(a=>ms(a,!1)),oe().then(()=>{r.length&&x.recalculate()})},clearRowExpandReserve(){return g.rowExpandedReserveRowMap={},oe()},getRowExpandRecords(){const t=[];return i.each(u.rowExpandedMaps,o=>{o&&t.push(o)}),t},getTreeExpandRecords(){const t=[];return i.each(u.treeExpandedMaps,o=>{o&&t.push(o)}),t},isTreeExpandLoaded(t){const{fullAllDataRowIdData:o}=g,n=o[re(m,t)];return n&&!!n.treeLoaded},clearTreeExpandLoaded(t){const{treeExpandedMaps:o}=u,{fullAllDataRowIdData:n}=g,r=et.value,{transform:a,lazy:h}=r,d=re(m,t),w=n[d];return h&&w&&(w.treeLoaded=!1,o[d]&&delete o[d]),a?(xo(),B.handleTableData()):oe()},reloadTreeExpand(t){const{treeExpandLazyLoadedMaps:o}=u,n=et.value,r=n.hasChild||n.hasChildField,{transform:a,lazy:h}=n,d=re(m,t);return h&&t[r]&&!o[d]&&x.clearTreeExpandLoaded(t).then(()=>To(t)).then(()=>{if(a)return xo(),B.handleTableData()}).then(()=>x.recalculate()),oe()},reloadTreeChilds(t){return x.reloadTreeExpand(t)},toggleTreeExpand(t){return x.setTreeExpand(t,!x.isTreeExpandByRow(t))},setAllTreeExpand(t){const{tableFullData:o}=g,n=et.value,{transform:r,lazy:a}=n,h=n.children||n.childrenField,d=[];return i.eachTree(o,w=>{const E=w[h];(a||E&&E.length)&&d.push(w)},{children:h}),x.setTreeExpand(d,t).then(()=>{if(r)return xo(),x.recalculate()})},setTreeExpand(t,o){const n=et.value,{transform:r}=n;return t&&(i.isArray(t)||(t=[t]),t.length)?r?Pr(t,o):ws(t,o):oe()},isTreeExpandByRow(t){const{treeExpandedMaps:o}=u;return!!o[re(m,t)]},clearTreeExpand(){const{tableFullTreeData:t}=g,o=et.value,n=o.children||o.childrenField,{transform:r,reserve:a}=o,h=x.getTreeExpandRecords();return u.treeExpandedMaps={},a&&i.eachTree(t,d=>ps(d,!1),{children:n}),B.handleTableData().then(()=>{if(r)return xo(),B.handleTableData()}).then(()=>{if(h.length)return x.recalculate()})},clearTreeExpandReserve(){return g.treeExpandedReserveRowMap={},oe()},getScroll(){const{scrollXLoad:t,scrollYLoad:o}=u,r=O.value.$el;return{virtualX:t,virtualY:o,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}},scrollTo(t,o){const n=O.value,r=y.value,a=R.value,h=W.value,d=ce.value,w=n?n.$el:null,E=h?h.$el:null,F=d?d.$el:null,D=r?r.$el:null,V=a?a.$el:null;if(i.isNumber(t)){const L=_.value;L?At(L,t):(At(w,t),At(D,t),At(V,t))}if(i.isNumber(o)){const L=U.value;L?yt(L,o):(yt(w,o),yt(E,o),yt(F,o))}return u.scrollXLoad||u.scrollYLoad?new Promise(L=>{setTimeout(()=>{oe(()=>{L()})},50)}):oe()},scrollToRow(t,o){const n=[];return t&&(e.treeConfig?n.push(B.scrollToTreeRow(t)):n.push(Ns(m,t))),o&&n.push(x.scrollToColumn(o)),Promise.all(n)},scrollToColumn(t){const{fullColumnIdData:o}=g,n=kt(m,t);return n&&o[n.id]?Ii(m,n):oe()},clearScroll(){const{scrollXStore:t,scrollYStore:o}=g,n=O.value,r=y.value,a=R.value,h=W.value,d=ce.value,w=h?h.$el:null,E=n?n.$el:null,F=d?d.$el:null,D=r?r.$el:null,V=a?a.$el:null,L=_.value;L?At(L,0):(At(E,0),At(D,0),At(V,0));const P=U.value;return P?yt(P,0):(yt(E,0),yt(w,0),yt(F,0)),t.startIndex=0,t.endIndex=t.visibleSize,o.startIndex=0,o.endIndex=o.visibleSize,oe().then(()=>{At(E,0),At(D,0),At(V,0),yt(E,0),yt(w,0),yt(F,0)})},updateFooter(){const{showFooter:t,footerData:o,footerMethod:n}=e,{visibleColumn:r,afterFullData:a}=g;let h=[];return t&&o&&o.length?h=o.slice(0):t&&n&&(h=r.length?n({columns:r,data:a,$table:m,$grid:K}):[]),u.footerTableData=h,oe()},updateStatus(t,o){const n=!i.isUndefined(o);return oe().then(()=>{const{editRules:r}=e,{validStore:a}=u,h=O.value;if(t&&h&&r){const{row:d,column:w}=t,E="change";if(m.hasCellRules&&m.hasCellRules(E,d,w)){const F=x.getCellElement(d,w);if(F)return m.validCellRules(E,d,w,o).then(()=>{n&&a.visible&&So(d,w,o),m.clearValidate(d,w)}).catch(({rule:D})=>{n&&So(d,w,o),m.showValidTooltip({rule:D,row:d,column:w,cell:F})})}}})},setMergeCells(t){return e.spanMethod&&Gt("vxe.error.errConflicts",["merge-cells","span-method"]),ko(t,u.mergeList,g.afterFullData),oe().then(()=>(x.updateCellAreas(),Mt()))},removeMergeCells(t){e.spanMethod&&Gt("vxe.error.errConflicts",["merge-cells","span-method"]);const o=Io(t,u.mergeList,g.afterFullData);return oe().then(()=>(x.updateCellAreas(),Mt(),o))},getMergeCells(){return u.mergeList.slice(0)},clearMergeCells(){return u.mergeList=[],oe().then(()=>Mt())},setMergeFooterItems(t){return e.footerSpanMethod&&Gt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),ko(t,u.mergeFooterList),oe().then(()=>(x.updateCellAreas(),Mt()))},removeMergeFooterItems(t){e.footerSpanMethod&&Gt("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);const o=Io(t,u.mergeFooterList);return oe().then(()=>(x.updateCellAreas(),Mt(),o))},getMergeFooterItems(){return u.mergeFooterList.slice(0)},clearMergeFooterItems(){return u.mergeFooterList=[],oe().then(()=>Mt())},updateCellAreas(){const{mouseConfig:t}=e,o=ke.value;return t&&o.area&&m.handleUpdateCellAreas?m.handleUpdateCellAreas():oe()},getCustomStoreData(){const{id:t}=e,o=Yt.value,{collectColumn:n}=g,{checkMethod:r}=o,a={},h={},d={},w={},E={resizableData:void 0,sortData:void 0,visibleData:void 0,fixedData:void 0};if(!t)return Gt("vxe.error.reqProp",["id"]),E;let F=0,D=0,V=0,L=0;return i.eachTree(n,(P,se,Y,te,Z)=>{if(!Z&&(n.forEach(fe=>{const ve=fe.getKey();ve&&(D=1,h[ve]=fe.renderSortNumber)}),P.fixed&&P.fixed!==P.defaultFixed)){const fe=P.getKey();fe&&(V=1,w[fe]=P.fixed)}if(P.resizeWidth){const fe=P.getKey();fe&&(F=1,a[fe]=P.renderWidth)}if(!r||r({column:P})){if(!P.visible&&P.defaultVisible){const fe=P.getKey();fe&&(L=1,d[fe]=!1)}else if(P.visible&&!P.defaultVisible){const fe=P.getKey();fe&&(L=1,d[fe]=!0)}}}),F&&(E.resizableData=a),D&&(E.sortData=h),V&&(E.fixedData=w),L&&(E.visibleData=d),E},focus(){return g.isActivated=!0,oe()},blur(){return g.isActivated=!1,oe()},connect(t){return t?(J=t,J.syncUpdate({collectColumn:g.collectColumn,$table:m})):Gt("vxe.error.barUnableLink"),oe()}};const Gr=t=>{const{editStore:o,ctxMenuStore:n,filterStore:r,customStore:a}=u,{mouseConfig:h,editRules:d}=e,w=N.value,E=le.value,F=be.value,D=Pe.value,{actived:V}=o,L=M.value,P=b.value,se=p.value,Y=k.value;if(P&&(rt(t,w,"vxe-cell--filter").flag||rt(t,P.$el).flag||rt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearFilter",r.args,x.closeFilter)),se&&(a.btnEl===t.target||rt(t,document.body,"vxe-toolbar-custom-target").flag||rt(t,se.$el).flag||rt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearCustom",{},()=>{m.closeCustom&&m.closeCustom()})),V.row){if(E.autoClear!==!1){const Z=V.args.cell;(!Z||!rt(t,Z).flag)&&(L&&rt(t,L.$el).flag||(!g._lastCallTime||g._lastCallTime+50<Date.now())&&(rt(t,document.body,"vxe-table--ignore-clear").flag||B.preventEvent(t,"event.clearEdit",V.args,()=>{let fe;if(E.mode==="row"){const ve=rt(t,w,"vxe-body--row"),Me=ve.flag?x.getRowNode(ve.targetElem):null;fe=Me?!m.eqRow(Me.item,V.args.row):!1}else fe=!rt(t,w,"col--edit").flag;if(fe||(fe=rt(t,w,"vxe-header--row").flag),fe||(fe=rt(t,w,"vxe-footer--row").flag),!fe&&e.height&&!u.overflowY){const ve=t.target;ml(ve,"vxe-table--body-wrapper")&&(fe=t.offsetY<ve.clientHeight)}(fe||!rt(t,w).flag)&&setTimeout(()=>{m.clearEdit(t).then(()=>{!g.isActivated&&d&&F.autoClear&&(u.validErrorMaps={})})})})))}}else if(h&&!rt(t,w).flag&&!(K&&rt(t,K.getRefMaps().refElem.value).flag)&&!(Y&&rt(t,Y.getRefMaps().refElem.value).flag)&&!(J&&rt(t,J.getRefMaps().refElem.value).flag)&&(m.clearSelected&&m.clearSelected(),D.autoClear&&m.getCellAreas)){const Z=m.getCellAreas();Z&&Z.length&&!rt(t,document.body,"vxe-table--ignore-areas-clear").flag&&B.preventEvent(t,"event.clearAreas",{},()=>{m.clearCellAreas(),m.clearCopyCellArea(),ut("clear-cell-area-selection",{cellAreas:Z},t)})}m.closeMenu&&n.visible&&Y&&!rt(t,Y.getRefMaps().refElem.value).flag&&m.closeMenu();const te=rt(t,K?K.getRefMaps().refElem.value:w).flag;!te&&d&&F.autoClear&&(u.validErrorMaps={}),g.isActivated=te},Zr=()=>{x.closeFilter(),m.closeMenu&&m.closeMenu()},Qr=()=>{x.closeTooltip(),m.closeMenu&&m.closeMenu()},Jr=t=>{const{mouseConfig:o,keyboardConfig:n}=e,{filterStore:r,ctxMenuStore:a,editStore:h}=u,d=ke.value,w=Ue.value,{actived:E}=h;ct.hasKey(t,to.ESCAPE)&&B.preventEvent(t,"event.keydown",null,()=>{if(ut("keydown-start",{},t),n&&o&&d.area&&m.handleKeyboardEvent)m.handleKeyboardEvent(t);else if((E.row||r.visible||a.visible)&&(t.stopPropagation(),m.closeMenu&&m.closeMenu(),x.closeFilter(),n&&w.isEsc&&E.row)){const D=E.args;m.clearEdit(t),d.selected&&oe(()=>m.handleSelected(D,t))}ut("keydown",{},t),ut("keydown-end",{},t)})},ei=t=>{g.isActivated&&B.preventEvent(t,"event.keydown",null,()=>{const{mouseConfig:o,keyboardConfig:n,treeConfig:r,editConfig:a,highlightCurrentRow:h}=e,{ctxMenuStore:d,editStore:w,currentRow:E}=u,F=it.value,D=lt.value,V=Ue.value,L=ke.value,P=le.value,se=et.value,Y=Rt.value,te=_e.value,{selected:Z,actived:fe}=w,ve=se.children||se.childrenField,Me=t.keyCode,De=ct.hasKey(t,to.ESCAPE),$e=ct.hasKey(t,to.BACKSPACE),nt=ct.hasKey(t,to.TAB),Ct=ct.hasKey(t,to.ENTER),ft=ct.hasKey(t,to.SPACEBAR),tt=ct.hasKey(t,to.ARROW_LEFT),vt=ct.hasKey(t,to.ARROW_UP),Ke=ct.hasKey(t,to.ARROW_RIGHT),qe=ct.hasKey(t,to.ARROW_DOWN),Ft=ct.hasKey(t,to.DELETE),Co=ct.hasKey(t,to.F2),Cl=ct.hasKey(t,to.CONTEXT_MENU),ul=t.metaKey,wo=t.ctrlKey,Ao=t.shiftKey,wl=t.altKey,Ko=tt||vt||Ke||qe,El=F&&d.visible&&(Ct||ft||Ko),Lo=gt(a)&&fe.column&&fe.row,so=P.beforeEditMethod||P.activeMethod;if(El)t.preventDefault(),d.showChild&&kl(d.selected)?m.moveCtxMenu(t,d,"selectChild",tt,!1,d.selected.children):m.moveCtxMenu(t,d,"selected",Ke,!0,Y);else if(n&&o&&L.area&&m.handleKeyboardEvent)m.handleKeyboardEvent(t);else if(De){if(m.closeMenu&&m.closeMenu(),x.closeFilter(),n&&V.isEsc&&fe.row){const Qe=fe.args;m.clearEdit(t),L.selected&&oe(()=>m.handleSelected(Qe,t))}}else if(ft&&n&&V.isChecked&&Z.row&&Z.column&&(Z.column.type==="checkbox"||Z.column.type==="radio"))t.preventDefault(),Z.column.type==="checkbox"?B.handleToggleCheckRowEvent(t,Z.args):B.triggerRadioRowEvent(t,Z.args);else if(Co&&gt(a))Lo||Z.row&&Z.column&&(t.preventDefault(),m.handleEdit(Z.args,t));else if(Cl)g._keyCtx=Z.row&&Z.column&&D.length,clearTimeout(Rs),Rs=setTimeout(()=>{g._keyCtx=!1},1e3);else if(Ct&&!wl&&n&&V.isEnter&&(Z.row||fe.row||r&&(te.isCurrent||h)&&E)){if(wo){if(fe.row){const Qe=fe.args;m.clearEdit(t),L.selected&&oe(()=>m.handleSelected(Qe,t))}}else if(Z.row||fe.row){const Qe=Z.row?Z.args:fe.args;Ao?V.enterToTab?m.moveTabSelected(Qe,Ao,t):m.moveSelected(Qe,tt,!0,Ke,!1,t):V.enterToTab?m.moveTabSelected(Qe,Ao,t):m.moveSelected(Qe,tt,!1,Ke,!0,t)}else if(r&&(te.isCurrent||h)&&E){const Qe=E[ve];if(Qe&&Qe.length){t.preventDefault();const dt=Qe[0],Nt={$table:m,row:dt,rowIndex:x.getRowIndex(dt),$rowIndex:x.getVMRowIndex(dt)};x.setTreeExpand(E,!0).then(()=>x.scrollToRow(dt)).then(()=>B.triggerCurrentRowEvent(t,Nt))}}}else if(Ko&&n&&V.isArrow)Lo||(Z.row&&Z.column?m.moveSelected(Z.args,tt,vt,Ke,qe,t):(vt||qe)&&(te.isCurrent||h)&&m.moveCurrentRow(vt,qe,t));else if(nt&&n&&V.isTab)Z.row||Z.column?m.moveTabSelected(Z.args,Ao,t):(fe.row||fe.column)&&m.moveTabSelected(fe.args,Ao,t);else if(n&&V.isDel&&Ft&&gt(a)&&(Z.row||Z.column)){if(!Lo){const{delMethod:Qe}=V,dt={row:Z.row,rowIndex:x.getRowIndex(Z.row),column:Z.column,columnIndex:x.getColumnIndex(Z.column),$table:m,$grid:K};(!so||so(dt))&&(Qe?Qe(dt):So(Z.row,Z.column,null),x.updateFooter(),ut("cell-delete-value",dt,t))}}else if($e&&n&&V.isBack&&gt(a)&&(Z.row||Z.column)){if(!Lo){const{backMethod:Qe}=V;if(V.isDel&&gt(a)&&(Z.row||Z.column)){const dt={row:Z.row,rowIndex:x.getRowIndex(Z.row),column:Z.column,columnIndex:x.getColumnIndex(Z.column),$table:m,$grid:K};(!so||so(dt))&&(Qe?Qe(dt):(So(Z.row,Z.column,null),m.handleEdit(Z.args,t)),ut("cell-backspace-value",dt,t))}}}else if($e&&n&&r&&V.isBack&&(te.isCurrent||h)&&E){const{parent:Qe}=i.findTree(g.afterTreeFullData,dt=>dt===E,{children:ve});if(Qe){t.preventDefault();const dt={row:Qe,rowIndex:x.getRowIndex(Qe),$rowIndex:x.getVMRowIndex(Qe),$table:m,$grid:K};x.setTreeExpand(Qe,!1).then(()=>x.scrollToRow(Qe)).then(()=>B.triggerCurrentRowEvent(t,dt))}}else if(n&&gt(a)&&V.isEdit&&!wo&&!ul&&(ft||Me>=48&&Me<=57||Me>=65&&Me<=90||Me>=96&&Me<=111||Me>=186&&Me<=192||Me>=219&&Me<=222)){const{editMethod:Qe}=V;if(Z.column&&Z.row&&gt(Z.column.editRender)){const dt=P.beforeEditMethod||P.activeMethod,Nt={row:Z.row,rowIndex:x.getRowIndex(Z.row),column:Z.column,columnIndex:x.getColumnIndex(Z.column),$table:m,$grid:K};(!dt||dt(Object.assign(Object.assign({},Z.args),{$table:m,$grid:K})))&&(Qe?Qe(Nt):(So(Z.row,Z.column,null),m.handleEdit(Z.args,t)))}}ut("keydown",{},t)})},ti=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=u,{isActivated:h}=g,d=ke.value,w=Ue.value,{actived:E}=r;h&&!a.visible&&(E.row||E.column||o&&w.isClip&&n&&d.area&&m.handlePasteCellAreaEvent&&m.handlePasteCellAreaEvent(t),ut("paste",{},t))},oi=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=u,{isActivated:h}=g,d=ke.value,w=Ue.value,{actived:E}=r;h&&!a.visible&&(E.row||E.column||o&&w.isClip&&n&&d.area&&m.handleCopyCellAreaEvent&&m.handleCopyCellAreaEvent(t),ut("copy",{},t))},li=t=>{const{keyboardConfig:o,mouseConfig:n}=e,{editStore:r,filterStore:a}=u,{isActivated:h}=g,d=ke.value,w=Ue.value,{actived:E}=r;h&&!a.visible&&(E.row||E.column||o&&w.isClip&&n&&d.area&&m.handleCutCellAreaEvent&&m.handleCutCellAreaEvent(t),ut("cut",{},t))},Ss=()=>{m.closeMenu&&m.closeMenu();const t=N.value;if(!t||!t.clientWidth)return oe();x.updateCellAreas(),x.recalculate(!0)},nn=t=>{const o=z.value;clearTimeout(g.tooltipTimeout),t?x.closeTooltip():o&&o.setActived&&o.setActived(!0)},An=()=>{const t=N.value;if(t){const o="row--drag-origin";i.arrayEach(t.querySelectorAll(`.${o}`),n=>{n.draggable=!1,Kt(n,o)})}},ni=t=>{const o=N.value;if(o){const n="row--drag-origin",r=re(m,t);i.arrayEach(o.querySelectorAll(`[rowid="${r}"]`),a=>{po(a,n)})}},Os=()=>{const t=N.value;if(t){const o="row--drag-active-target";i.arrayEach(t.querySelectorAll(`.${o}`),n=>{Kt(n,o)})}},si=(t,o)=>{const n=N.value;if(n){const r="row--drag-active-target",a=re(m,t);i.arrayEach(n.querySelectorAll(`[rowid="${a}"]`),h=>{po(h,r),h.setAttribute("drag-pos",o)})}},Ms=t=>{const o=Te.value;if(!o)return;const n=N.value;if(n&&o){const r=n.getBoundingClientRect();o.style.display="block",o.style.top=`${Math.min(n.clientHeight-n.scrollTop-o.clientHeight,t.clientY-r.y)}px`,o.style.left=`${Math.min(n.clientWidth-n.scrollLeft-o.clientWidth-16,t.clientX-r.x)}px`}},Ln=()=>{const t=Te.value;t&&(t.style.display="")},ri=t=>{const{dragRow:o}=u,n=de.value,{rowTooltipMethod:r}=n;let a="";r?a=`${r({row:o})||""}`:a=es("vxe.table.dragTip",[t.textContent||""]),u.dragTipText=a},Hn=(t,o,n,r,a)=>{a.cell=o;const{tooltipStore:h}=u,d=Ae.value,{column:w,row:E}=a,{showAll:F,contentMethod:D}=d,V=D?D(a):null,L=D&&!i.eqNull(V),P=L?V:i.toString(w.type==="html"?n.innerText:n.textContent).trim(),se=n.scrollWidth>n.clientWidth;return P&&(F||L||se)&&(Object.assign(h,{row:E,column:w,visible:!0,currOpts:{}}),oe(()=>{const Y=z.value;Y&&Y.open&&Y.open(se?n:r||n,It(P))})),oe()},Fs=(t,o)=>{if(t){if(K)return K.callSlot(t,o);if(i.isFunction(t))return Oo(t(o))}return[]};B={getSetupOptions(){return ot()},updateAfterDataIndex:Po,callSlot:Fs,getParentElem(){const t=N.value;if(K){const o=K.getRefMaps().refElem.value;return o?o.parentNode:null}return t?t.parentNode:null},getParentHeight(){const{height:t}=e,o=N.value;if(o){const n=o.parentNode,r=t==="100%"||t==="auto"?xi(n):0;return Math.floor(K?K.getParentHeight():i.toNumber(getComputedStyle(n).height)-r)}return 0},getExcludeHeight(){return K?K.getExcludeHeight():0},defineField(t){const{treeConfig:o}=e,n=bt.value,r=et.value,a=Be.value,h=ye.value,d=r.children||r.childrenField,w=Bo(m);return i.isArray(t)||(t=[t]),t.map(E=>(g.tableFullColumn.forEach(D=>{const{field:V,editRender:L}=D;if(V&&!i.has(E,V)&&!E[V]){let P=null;if(L){const{defaultValue:se}=L;i.isFunction(se)?P=se({column:D}):i.isUndefined(se)||(P=se)}i.set(E,V,P)}}),[a.labelField,h.checkField,h.labelField,n.labelField].forEach(D=>{D&&Vo(i.get(E,D))&&i.set(E,D,null)}),o&&r.lazy&&i.isUndefined(E[d])&&(E[d]=null),Vo(i.get(E,w))&&i.set(E,w,Gn()),E))},handleTableData(t){const{scrollYLoad:o}=u,{scrollYStore:n,fullDataRowIdData:r}=g;let a=g.afterFullData;t&&(zo(),a=xo());const h=o?a.slice(n.startIndex,n.endIndex):a.slice(0);return h.forEach((d,w)=>{const E=re(m,d),F=r[E];F&&(F.$index=w)}),u.tableData=h,oe()},cacheRowMap(t){const{treeConfig:o}=e,n=et.value,{fullAllDataRowIdData:r,tableFullData:a,tableFullTreeData:h}=g,d=n.children||n.childrenField,w=n.hasChild||n.hasChildField,E=Bo(m),F=o&&n.lazy,D={},V={},L=(P,se,Y,te,Z,fe)=>{let ve=re(m,P);const Me=o&&te?Si(te):se+1,De=fe?fe.length-1:0;Vo(ve)&&(ve=Gn(),i.set(P,E,ve)),F&&P[w]&&i.isUndefined(P[d])&&(P[d]=null);let $e=r[ve];$e||($e={row:P,rowid:ve,seq:Me,index:-1,_index:-1,$index:-1,items:Y,parent:Z,level:De,height:0}),t&&($e.index=o&&Z?-1:se,V[ve]=$e),D[ve]=$e};t&&(g.fullDataRowIdData=V),g.fullAllDataRowIdData=D,o?i.eachTree(h,L,{children:d}):a.forEach(L)},cacheSourceMap(t){const{treeConfig:o}=e,n=et.value;let{sourceDataRowIdData:r}=g;const a=i.clone(t,!0),h=Bo(m);r=g.sourceDataRowIdData={};const d=w=>{let E=re(m,w);Vo(E)&&(E=Gn(),i.set(w,h,E)),r[E]=w};if(o){const w=n.children||n.childrenField;i.eachTree(a,d,{children:n.transform?n.mapChildrenField:w})}else a.forEach(d);g.tableSourceData=a},analyColumnWidth(){const{tableFullColumn:t}=g,o=ge.value,{width:n,minWidth:r}=o,a=[],h=[],d=[],w=[],E=[],F=[],D=[],V=[];t.forEach(L=>{n&&!L.width&&(L.width=n),r&&!L.minWidth&&(L.minWidth=r),L.visible&&(L.resizeWidth?a.push(L):L.width==="auto"?D.push(L):as(L.width)?h.push(L):ql(L.width)?E.push(L):as(L.minWidth)?d.push(L):L.minWidth==="auto"?w.push(L):ql(L.minWidth)?F.push(L):V.push(L))}),Object.assign(u.columnStore,{resizeList:a,pxList:h,pxMinList:d,autoMinList:w,scaleList:E,scaleMinList:F,autoList:D,remainList:V})},saveCustomStore(t){const o=ee.value,n=Yt.value,{updateStore:r,storage:a}=n,h=a===!0,d=h?{}:Object.assign({},a||{}),w=h||d.resizable,E=h||d.visible,F=h||d.fixed,D=h||d.sort;if(w||E||F||D){if(!o)return Gt("vxe.error.reqProp",["id"]),oe();const V=t==="reset"?{resizableData:{},sortData:{},visibleData:{},fixedData:{}}:x.getCustomStoreData();if(r)return r({id:o,type:t,storeData:V});Hl(o,t==="reset"?null:V)}return oe()},handleCustom(){const{mouseConfig:t}=e;return t&&(m.clearSelected&&m.clearSelected(),m.clearCellAreas&&(m.clearCellAreas(),m.clearCopyCellArea())),B.analyColumnWidth(),x.refreshColumn(!0)},handleUpdateDataQueue(){u.upDataFlag++},handleRefreshColumnQueue(){u.reColumnFlag++},preventEvent(t,o,n,r,a){let h=Gs.get(o);!h.length&&o==="event.clearEdit"&&(h=Gs.get("event.clearActived"));let d;return h.some(w=>w(Object.assign({$grid:K,$table:m,$event:t},n))===!1)||r&&(d=r()),a&&a(),d},checkSelectionStatus(){const{treeConfig:t}=e,{selectCheckboxMaps:o,treeIndeterminateMaps:n}=u,{afterFullData:r}=g,a=ye.value,{checkField:h,checkStrictly:d,checkMethod:w}=a,E=a.indeterminateField||a.halfField;if(!d){const F=[];let D=!1,V=!1,L=!1;h?(D=r.every(w?P=>w({row:P})?!!i.get(P,h):(F.push(P),!0):P=>i.get(P,h)),V=D&&r.length!==F.length,t?E?L=!V&&r.some(P=>i.get(P,h)||i.get(P,E)||!!n[re(m,P)]):L=!V&&r.some(P=>i.get(P,h)||!!n[re(m,P)]):E?L=!V&&r.some(P=>i.get(P,h)||i.get(P,E)):L=!V&&r.some(P=>i.get(P,h))):(D=r.every(w?P=>w({row:P})?!!o[re(m,P)]:(F.push(P),!0):P=>o[re(m,P)]),V=D&&r.length!==F.length,t?L=!V&&r.some(P=>{const se=re(m,P);return n[se]||o[se]}):L=!V&&r.some(P=>o[re(m,P)])),u.isAllSelected=V,u.isIndeterminate=L}},handleBatchSelectRows(t,o,n){const{treeConfig:r}=e,{selectCheckboxMaps:a}=u,h=ye.value,{checkField:d,checkStrictly:w,checkMethod:E}=h;if(d)r&&!w?t.forEach(F=>{B.handleSelectRow({row:F},o,n)}):t.forEach(F=>{(n||!E||E({row:F}))&&(i.set(F,d,o),jt(F,o))});else if(r&&!w)t.forEach(F=>{B.handleSelectRow({row:F},o,n)});else{const F=Object.assign({},a);t.forEach(D=>{const V=re(m,D);(n||!E||E({row:D}))&&(o?F[V]||(F[V]=D):F[V]&&delete F[V],jt(D,o))}),u.selectCheckboxMaps=F}},handleSelectRow({row:t},o,n){const{treeConfig:r}=e,{selectCheckboxMaps:a,treeIndeterminateMaps:h}=u,d=Object.assign({},a),{afterFullData:w}=g,E=et.value,F=E.children||E.childrenField,D=ye.value,{checkField:V,checkStrictly:L,checkMethod:P}=D,se=D.indeterminateField||D.halfField,Y=re(m,t);if(V)if(r&&!L){o===-1?(h[Y]||(se&&i.set(t,se,!0),h[Y]=t),i.set(t,V,!1)):i.eachTree([t],Z=>{(m.eqRow(Z,t)||n||!P||P({row:Z}))&&(i.set(Z,V,o),se&&i.set(t,se,!1),delete h[re(m,Z)],jt(t,o))},{children:F});const te=i.findTree(w,Z=>m.eqRow(Z,t),{children:F});if(te&&te.parent){let Z;const fe=[],ve={};if(!n&&P?te.items.forEach(De=>{if(P({row:De})){const $e=re(m,De);ve[$e]=De,fe.push(De)}}):te.items.forEach(De=>{const $e=re(m,De);ve[$e]=De,fe.push(De)}),i.find(te.items,De=>!!h[re(m,De)]))Z=-1;else{const De=[];te.items.forEach($e=>{i.get($e,V)&&De.push($e)}),Z=De.filter($e=>ve[re(m,$e)]).length===fe.length?!0:De.length||o===-1?-1:!1}u.selectCheckboxMaps=d,B.handleSelectRow({row:te.parent},Z,n);return}}else(n||!P||P({row:t}))&&(i.set(t,V,o),jt(t,o));else if(r&&!L){o===-1?(h[Y]||(se&&i.set(t,se,!0),h[Y]=t),d[Y]&&delete d[Y]):i.eachTree([t],Z=>{const fe=re(m,Z);(m.eqRow(Z,t)||n||!P||P({row:Z}))&&(o?d[fe]=Z:d[fe]&&delete d[fe],se&&i.set(t,se,!1),delete h[re(m,Z)],jt(t,o))},{children:F});const te=i.findTree(w,Z=>m.eqRow(Z,t),{children:F});if(te&&te.parent){let Z;const fe=[],ve={};if(!n&&P?te.items.forEach(De=>{if(P({row:De})){const $e=re(m,De);ve[$e]=De,fe.push(De)}}):te.items.forEach(De=>{const $e=re(m,De);ve[$e]=De,fe.push(De)}),i.find(te.items,De=>!!h[re(m,De)]))Z=-1;else{const De=[];te.items.forEach($e=>{const nt=re(m,$e);d[nt]&&De.push($e)}),Z=De.filter($e=>ve[re(m,$e)]).length===fe.length?!0:De.length||o===-1?-1:!1}u.selectCheckboxMaps=d,B.handleSelectRow({row:te.parent},Z,n);return}}else(n||!P||P({row:t}))&&(o?d[Y]||(d[Y]=t):d[Y]&&delete d[Y],jt(t,o));u.selectCheckboxMaps=d},triggerHeaderTitleEvent(t,o,n){const r=o.content||o.message;if(r){const{tooltipStore:a}=u,{column:h}=n,d=$o(r);nn(!0),a.row=null,a.column=h,a.visible=!0,a.currOpts=o,oe(()=>{const w=z.value;w&&w.open&&w.open(t.currentTarget,d)})}},triggerHeaderTooltipEvent(t,o){const{tooltipStore:n}=u,{column:r}=o,a=t.currentTarget;nn(!0),(n.column!==r||!n.visible)&&Hn(t,a,a,null,o)},triggerBodyTooltipEvent(t,o){const{editConfig:n}=e,{editStore:r}=u,{tooltipStore:a}=u,h=le.value,{actived:d}=r,{row:w,column:E}=o,F=t.currentTarget;if(nn(a.column!==E||a.row!==w),!(E.editRender&&gt(n)&&(h.mode==="row"&&d.row===w||d.row===w&&d.column===E))&&(a.column!==E||a.row!==w||!a.visible)){let D,V;E.treeNode?(D=F.querySelector(".vxe-tree-cell"),E.type==="html"&&(V=F.querySelector(".vxe-cell--html"))):V=F.querySelector(E.type==="html"?".vxe-cell--html":".vxe-cell--label"),Hn(t,F,D||F.children[0],V,o)}},triggerFooterTooltipEvent(t,o){const{column:n}=o,{tooltipStore:r}=u,a=t.currentTarget;nn(r.column!==n||!!r.row),(r.column!==n||!r.visible)&&Hn(t,a,a.querySelector(".vxe-cell--item")||a.children[0],null,o)},handleTargetLeaveEvent(){const t=Ae.value;let o=z.value;o&&o.setActived&&o.setActived(!1),t.enterable?g.tooltipTimeout=setTimeout(()=>{o=z.value,o&&o.isActived&&!o.isActived()&&x.closeTooltip()},t.leaveDelay):x.closeTooltip()},triggerHeaderCellClickEvent(t,o){const{_lastResizeTime:n}=g,r=Fe.value,a=ge.value,{column:h}=o,d=t.currentTarget,w=n&&n>Date.now()-300,E=rt(t,d,"vxe-cell--sort").flag,F=rt(t,d,"vxe-cell--filter").flag;r.trigger==="cell"&&!(w||E||F)&&B.triggerSortEvent(t,h,io(h)),ut("header-cell-click",Object.assign({triggerResizable:w,triggerSort:E,triggerFilter:F,cell:d},o),t),(a.isCurrent||e.highlightCurrentColumn)&&B.triggerCurrentColumnEvent(t,o)},triggerHeaderCellDblclickEvent(t,o){ut("header-cell-dblclick",Object.assign({cell:t.currentTarget},o),t)},triggerCellClickEvent(t,o){const{highlightCurrentRow:n,editConfig:r}=e,{editStore:a}=u,h=bt.value,d=le.value,w=et.value,E=Be.value,F=ye.value,D=Ue.value,V=_e.value,{actived:L,focused:P}=a,{row:se,column:Y}=o,{type:te,treeNode:Z}=Y,fe=te==="radio",ve=te==="checkbox",Me=te==="expand",De=t.currentTarget,$e=fe&&rt(t,De,"vxe-cell--radio").flag,nt=ve&&rt(t,De,"vxe-cell--checkbox").flag,Ct=Z&&rt(t,De,"vxe-tree--btn-wrapper").flag,ft=Me&&rt(t,De,"vxe-table--expanded").flag;o=Object.assign({cell:De,triggerRadio:$e,triggerCheckbox:nt,triggerTreeNode:Ct,triggerExpandNode:ft},o),!nt&&!$e&&(!ft&&(h.trigger==="row"||Me&&h.trigger==="cell")&&B.triggerRowExpandEvent(t,o),(w.trigger==="row"||Z&&w.trigger==="cell")&&B.triggerTreeExpandEvent(t,o)),Ct||(ft||((V.isCurrent||n)&&!nt&&!$e&&B.triggerCurrentRowEvent(t,o),!$e&&(E.trigger==="row"||fe&&E.trigger==="cell")&&B.triggerRadioRowEvent(t,o),!nt&&(F.trigger==="row"||ve&&F.trigger==="cell")&&B.handleToggleCheckRowEvent(t,o)),gt(r)&&(D.arrowCursorLock&&t&&d.mode==="cell"&&t.target&&/^input|textarea$/i.test(t.target.tagName)&&(P.column=Y,P.row=se),d.trigger==="manual"?L.args&&L.row===se&&Y!==L.column&&xl(t,o):(!L.args||se!==L.row||Y!==L.column)&&(d.trigger==="click"||d.trigger==="dblclick"&&d.mode==="row"&&L.row===se)&&xl(t,o))),ut("cell-click",o,t)},triggerCellDblclickEvent(t,o){const{editConfig:n}=e,{editStore:r}=u,a=le.value,{actived:h}=r,d=t.currentTarget;o=Object.assign({cell:d},o),gt(n)&&a.trigger==="dblclick"&&(!h.args||t.currentTarget!==h.args.cell)&&(a.mode==="row"?uo("blur").catch(w=>w).then(()=>{m.handleEdit(o,t).then(()=>uo("change")).catch(w=>w)}):a.mode==="cell"&&m.handleEdit(o,t).then(()=>uo("change")).catch(w=>w)),ut("cell-dblclick",o,t)},handleToggleCheckRowEvent(t,o){const{selectCheckboxMaps:n}=u,r=ye.value,{checkField:a,trigger:h}=r,{row:d}=o;if(h==="manual")return;let w=!1;a?w=!i.get(d,a):w=!n[re(m,d)],t?B.triggerCheckRowEvent(t,o,w):(B.handleSelectRow(o,w),B.checkSelectionStatus())},triggerCheckRowEvent(t,o,n){const r=ye.value,{row:a}=o,{afterFullData:h}=g,{checkMethod:d,trigger:w}=r;if(w!=="manual"){if(t.stopPropagation(),r.isShiftKey&&t.shiftKey&&!e.treeConfig){const E=x.getCheckboxRecords();if(E.length){const F=E[0],D=x.getVTRowIndex(a),V=x.getVTRowIndex(F);if(D!==V){x.setAllCheckboxRow(!1);const L=D<V?h.slice(D,V+1):h.slice(V,D+1);fo(L,!0,!1),ut("checkbox-range-select",Object.assign({rangeRecords:L},o),t);return}}}(!d||d({row:a}))&&(B.handleSelectRow(o,n),B.checkSelectionStatus(),ut("checkbox-change",Object.assign({records:x.getCheckboxRecords(),reserves:x.getCheckboxReserveRecords(),indeterminates:x.getCheckboxIndeterminateRecords(),checked:n},o),t))}},triggerCheckAllEvent(t,o){const n=ye.value,{trigger:r}=n;r!=="manual"&&(t&&t.stopPropagation(),Es(t,o))},triggerRadioRowEvent(t,o){const{selectRadioRow:n}=u,{row:r}=o,a=Be.value,{trigger:h}=a;if(h==="manual")return;t.stopPropagation();let d=r,w=n!==d;w?Dt(d):a.strict||(w=n===d,w&&(d=null,x.clearRadioRow())),w&&ut("radio-change",Object.assign({oldValue:n,newValue:d},o),t)},triggerCurrentColumnEvent(t,o){const n=ge,{currentMethod:r}=n.value,{column:a}=o;(!r||r({column:a}))&&x.setCurrentColumn(a)},triggerCurrentRowEvent(t,o){const{currentRow:n}=u,r=_e,{currentMethod:a}=r.value,{row:h}=o,d=n!==h;(!a||a({row:h}))&&(x.setCurrentRow(h),d&&ut("current-change",Object.assign({oldValue:n,newValue:h},o),t))},triggerRowExpandEvent(t,o){const{rowExpandLazyLoadedMaps:n,expandColumn:r}=u,a=bt.value,{row:h}=o,{lazy:d,trigger:w}=a;if(w==="manual")return;t.stopPropagation();const E=re(m,h);if(!d||!n[E]){const F=!x.isRowExpandByRow(h),D=x.getColumnIndex(r),V=x.getVMColumnIndex(r);x.setRowExpand(h,F),ut("toggle-row-expand",{expanded:F,column:r,columnIndex:D,$columnIndex:V,row:h,rowIndex:x.getRowIndex(h),$rowIndex:x.getVMRowIndex(h)},t)}},triggerTreeExpandEvent(t,o){const{treeExpandLazyLoadedMaps:n}=u,r=et.value,{row:a,column:h}=o,{lazy:d,trigger:w}=r;if(w==="manual")return;t.stopPropagation();const E=re(m,a);if(!d||!n[E]){const F=!x.isTreeExpandByRow(a),D=x.getColumnIndex(h),V=x.getVMColumnIndex(h);x.setTreeExpand(a,F),ut("toggle-tree-expand",{expanded:F,column:h,columnIndex:D,$columnIndex:V,row:a},t)}},triggerSortEvent(t,o,n){const{mouseConfig:r}=e,a=Fe.value,h=ke.value,{field:d,sortable:w}=o;if(w){!n||o.order===n?x.clearSort(a.multiple?o:null):x.sort({field:d,order:n});const E={$table:m,$event:t,column:o,field:d,property:d,order:o.order,sortList:x.getSortColumns(),sortTime:o.sortTime};r&&h.area&&m.handleSortEvent&&m.handleSortEvent(t,E),ut("sort-change",E,t)}},handleRowDragDragstartEvent(t){const o=new Image;t.dataTransfer&&t.dataTransfer.setDragImage(o,0,0)},handleRowDragDragendEvent(t){const{treeConfig:o}=e,n=de.value,{dragEndMethod:r}=n,a=et.value,{transform:h}=a,{dragRow:d}=u,{afterFullData:w,afterTreeFullData:E,tableFullData:F,tableFullTreeData:D,prevDragRow:V,prevDragPos:L}=g;V&&d&&V!==d&&Promise.resolve(r?r({oldRow:d,newRow:V}):!0).then(P=>{if(!P)return;const se=L==="bottom"?1:0;let Y=-1,te=-1;if(o){Y=m.findRowIndexOf(E,d);const Z=m.findRowIndexOf(D,d);E.splice(Y,1),D.splice(Z,1);const fe=m.findRowIndexOf(E,V),ve=m.findRowIndexOf(D,V);te=fe+se;const Me=ve+se;E.splice(te,0,d),D.splice(Me,0,d)}else{Y=m.findRowIndexOf(w,d);const Z=m.findRowIndexOf(F,d);w.splice(Y,1),F.splice(Z,1);const fe=m.findRowIndexOf(w,V),ve=m.findRowIndexOf(F,V);te=fe+se;const Me=ve+se;w.splice(te,0,d),F.splice(Me,0,d)}u.isDragRowMove=!0,m.cacheRowMap(),m.updateScrollYStatus(),m.handleTableData(o&&h),o&&h||m.updateAfterDataIndex(),m.updateFooter(),m.checkSelectionStatus(),u.scrollYLoad&&m.updateScrollYSpace(),oe().then(()=>(m.updateCellAreas(),m.recalculate())),ut("row-dragend",{oldRow:d,newRow:V,_index:{newIndex:te,oldIndex:Y}},t)}).catch(()=>{}),Ln(),An(),Os(),u.dragRow=null,setTimeout(()=>{u.isDragRowMove=!1},500)},handleRowDragDragoverEvent(t){const o=t.currentTarget,n=o.getAttribute("rowid"),r=m.getRowById(n);if(Os(),r){t.preventDefault(),t.preventDefault();const{dragRow:a}=u,d=t.clientY-o.getBoundingClientRect().y<o.clientHeight/2?"top":"bottom";si(r,d),g.prevDragRow=r,g.prevDragPos=d,ut("row-dragover",{oldRow:a,targetRow:r,dragPos:d},t)}Ms(t)},handleCellDragMousedownEvent(t,o){var n;t.stopPropagation();const r=de.value,{dragStartMethod:a}=r,{row:h}=o,w=(n=t.currentTarget.parentNode)===null||n===void 0?void 0:n.parentNode,E=w.parentNode;if(u.isDragRowMove=!1,An(),a&&!a(o)){E.draggable=!1,u.dragRow=null,Ln();return}u.dragRow=h,E.draggable=!0,ni(h),Ms(t),ri(w),ut("row-dragstart",o,t)},handleCellDragMouseupEvent(){An(),Ln(),u.dragRow=null,u.isDragRowMove=!1},triggerScrollXEvent(){vs()},handleScrollEvent(t,o,n,r,a,h){const{highlightHoverRow:d}=e,{lastScrollLeft:w,lastScrollTop:E}=g,F=O.value,D=F?F.$el:null,V=_e.value,L=M.value,P=z.value,se=D?D.clientHeight:0,Y=D?D.clientWidth:0,te=D?D.scrollHeight:0,Z=D?D.scrollWidth:0;let fe=!1,ve=!1,Me=!1,De=!1,$e="",nt=!1,Ct=!1,ft=!1,tt=!1;if(n){const Ke=Ie.value;Me=a<=0,Me||(De=a+Y>=Z),a>w?($e="right",a+Y>=Z-Ke&&(tt=!0)):($e="left",a<=Ke&&(ft=!0)),B.checkScrolling(),g.lastScrollLeft=a,u.lastScrollTime=Date.now()}else{const Ke=xe.value;fe=r<=0,fe||(ve=r+se>=te),r>E?($e="bottom",r+se>=te-Ke&&(Ct=!0)):($e="top",r<=Ke&&(nt=!0)),g.lastScrollTop=r,u.lastScrollTime=Date.now()}const vt=Object.assign({scrollTop:r,scrollLeft:a,bodyHeight:se,bodyWidth:Y,scrollHeight:te,scrollWidth:Z,isX:n,isY:o,isTop:fe,isBottom:ve,isLeft:Me,isRight:De,direction:$e},h);(V.isHover||d)&&m.clearHoverRow(),L&&L.reactData.visible&&L.close(),P&&P.reactData.visible&&P.close(),(Ct||nt||tt||ft)&&ut("scroll-boundary",vt,t),ut("scroll",vt,t)},triggerScrollYEvent(){const{scrollYStore:t}=g,{adaptive:o,offsetSize:n,visibleSize:r}=t;Ji&&o&&n*2+r<=40?ys():zr(),Yr()},scrollToTreeRow(t){const{treeConfig:o}=e,{tableFullData:n}=g,r=[];if(o){const a=et.value,h=a.children||a.childrenField,d=i.findTree(n,w=>m.eqRow(w,t),{children:h});if(d){const w=d.nodes;w.forEach((E,F)=>{F<w.length-1&&!x.isTreeExpandByRow(E)&&r.push(x.setTreeExpand(E,!0))})}}return Promise.all(r).then(()=>Ns(m,t))},updateScrollYStatus:Dn,updateScrollXSpace(){const{isGroup:t,scrollXLoad:o,scrollbarWidth:n}=u,{visibleColumn:r,scrollXStore:a,elemStore:h,tableWidth:d}=g,w=y.value,E=O.value,F=R.value,D=E?E.$el:null;if(D){const V=w?w.$el:null,L=F?F.$el:null,P=V?V.querySelector(".vxe-table--header"):null,se=D.querySelector(".vxe-table--body"),Y=L?L.querySelector(".vxe-table--footer"):null,te=r.slice(0,a.startIndex).reduce((Me,De)=>Me+De.renderWidth,0);let Z="";o&&(Z=`${te}px`),P&&(P.style.marginLeft=t?"":Z),se.style.marginLeft=Z,Y&&(Y.style.marginLeft=Z),["main"].forEach(Me=>{["header","body","footer"].forEach($e=>{const nt=h[`${Me}-${$e}-xSpace`],Ct=nt?nt.value:null;Ct&&(Ct.style.width=o?`${d+($e==="header"?n:0)}px`:"")})});const ve=ne.value;ve&&(ve.style.width=`${d+n}px`),oe(Mt)}},updateScrollYSpace(){const{showOverflow:t}=e,{scrollYLoad:o}=u,{scrollYStore:n,elemStore:r,afterFullData:a,fullAllDataRowIdData:h}=g,{startIndex:d,rowHeight:w}=n;let E=0,F=0;const D=["main","left","right"];let V="",L="";if(o){if(t)E=a.length*w,F=Math.max(0,d*w);else{for(let se=0;se<a.length;se++){const Y=a[se],te=re(m,Y),Z=h[te];Z&&(E+=Z.height||w)}for(let se=0;se<d;se++){const Y=a[se],te=re(m,Y),Z=h[te];Z&&(F+=Z.height||w)}}V=`${F}px`,L=`${E}px`}D.forEach(se=>{const Y=["header","body","footer"],te=r[`${se}-body-table`],Z=te?te.value:null;Z&&(Z.style.marginTop=V),Y.forEach(fe=>{const ve=r[`${se}-${fe}-ySpace`],Me=ve?ve.value:null;Me&&(Me.style.height=L)})});const P=j.value;P&&(P.style.height=L),oe(Mt)},updateScrollXData(){return oe().then(()=>{bs(),B.updateScrollXSpace()})},updateScrollYData(){return oe().then(()=>{B.handleTableData(),al(),B.updateScrollYSpace()})},checkScrolling(){const t=Q.value,o=ue.value,n=O.value,r=n?n.$el:null,h=_.value||r;h&&(t&&(h.scrollLeft>0?po(t,"scrolling--middle"):Kt(t,"scrolling--middle")),o&&(h.clientWidth<h.scrollWidth-Math.ceil(h.scrollLeft)?po(o,"scrolling--middle"):Kt(o,"scrolling--middle")))},updateZindex(){e.zIndex?g.tZindex=e.zIndex:g.tZindex<pi()&&(g.tZindex=hi())},handleCheckedCheckboxRow:fo,triggerHoverEvent(t,{row:o}){B.setHoverRow(o)},setHoverRow(t){const o=re(m,t),n=N.value;B.clearHoverRow(),n&&i.arrayEach(n.querySelectorAll(`[rowid="${o}"]`),r=>po(r,"row--hover")),g.hoverRow=t},clearHoverRow(){const t=N.value;t&&i.arrayEach(t.querySelectorAll(".vxe-body--row.row--hover"),o=>Kt(o,"row--hover")),g.hoverRow=null},getCell(t,o){return x.getCellElement(t,o)},findRowIndexOf(t,o){return o?i.findIndexOf(t,n=>m.eqRow(n,o)):-1},eqRow(t,o){return t&&o?t===o?!0:re(m,t)===re(m,o):!1}},Object.assign(m,x,B);const ks=t=>{const{showHeader:o,showFooter:n}=e,{tableData:r,tableColumn:a,tableGroupColumn:h,columnStore:d,footerTableData:w}=u,E=t==="left",F=E?d.leftList:d.rightList;return f("div",{ref:E?Q:ue,class:`vxe-table--fixed-${t}-wrapper`},[o?f(Xs,{ref:E?H:ae,fixedType:t,tableData:r,tableColumn:a,tableGroupColumn:h,fixedColumn:F}):Tt(m),f(zs,{ref:E?W:ce,fixedType:t,tableData:r,tableColumn:a,fixedColumn:F}),n?f(Ks,{ref:E?q:$,footerTableData:w,tableColumn:a,fixedColumn:F,fixedType:t}):Tt(m)])},ii=()=>{const t=St.value,o={$table:m};if(s.empty)return s.empty(o);{const n=t.name?qs.get(t.name):null,r=n?n.renderTableEmpty||n.renderTableEmptyView||n.renderEmpty:null;if(r)return Oo(r(t,o))}return $o(e.emptyText)||es("vxe.table.emptyText")};function Bn(){const t=N.value;t&&t.clientWidth&&t.clientHeight&&x.recalculate()}const ai=()=>{const{loading:t,stripe:o,showHeader:n,height:r,treeConfig:a,mouseConfig:h,showFooter:d,highlightCell:w,highlightHoverRow:E,highlightHoverColumn:F,editConfig:D,editRules:V}=e,{isCalcColumn:L,isGroup:P,overflowX:se,overflowY:Y,scrollXLoad:te,scrollYLoad:Z,scrollbarHeight:fe,tableData:ve,tableColumn:Me,tableGroupColumn:De,footerTableData:$e,initStore:nt,columnStore:Ct,filterStore:ft,customStore:tt,tooltipStore:vt,dragRow:Ke,dragTipText:qe}=u,{leftList:Ft,rightList:Co}=Ct,Cl=s.loading,ul=Ne.value,wo=be.value,Ao=ye.value,wl=et.value,Ko=_e.value,El=de.value,Lo=ge.value,so=X.value,Qe=Wo.value,dt=ke.value,Nt=Ce.value,sn=Qt.value,jl=it.value,Ho=u._isLoading||t,Yo=tl.value,_l=(El.slots||{}).rowTip;return f("div",{ref:N,class:["vxe-table","vxe-table--render-default",`tid_${C}`,`border--${Qe}`,{[`size--${so}`]:so,[`valid-msg--${wo.msgMode}`]:!!V,"vxe-editable":!!D,"old-cell-valid":V&&ot().cellVaildMode==="obsolete","cell--highlight":w,"cell--selected":h&&dt.selected,"cell--area":h&&dt.area,"row--highlight":Ko.isHover||E,"column--highlight":Lo.isHover||F,"checkbox--range":Ao.range,"column--calc":L,"is--header":n,"is--footer":d,"is--group":P,"is--tree-line":a&&(wl.showLine||wl.line),"is--fixed-left":Ft.length,"is--fixed-right":Co.length,"is--animat":!!e.animat,"is--padding":e.padding,"is--round":e.round,"is--stripe":!a&&o,"is--loading":Ho,"is--empty":!Ho&&!ve.length,"is--scroll-y":Y,"is--scroll-x":se,"is--virtual-x":te,"is--virtual-y":Z}],spellcheck:!1,onKeydown:Jr},[f("div",{class:"vxe-table-slots"},s.default?s.default({}):[]),f("div",{key:"tw",class:"vxe-table--render-wrapper"},[f("div",{class:"vxe-table--main-wrapper"},[n?f(Xs,{ref:y,tableData:ve,tableColumn:Me,tableGroupColumn:De}):Tt(m),f(zs,{ref:O,tableData:ve,tableColumn:Me}),d?f(Ks,{ref:R,footerTableData:$e,tableColumn:Me}):Tt(m)]),f("div",{class:"vxe-table--fixed-wrapper"},[Ft&&Ft.length&&se?ks("left"):Tt(m),Co&&Co.length&&se?ks("right"):Tt(m)])]),Yo.x?f("div",{key:"vx",ref:A,class:"vxe-table--scroll-x-virtual"},[f("div",{ref:_,class:"vxe-table--scroll-x-handle",onScroll:Kr},[f("div",{ref:ne,class:"vxe-table--scroll-x-space"})])]):Tt(m),Yo.y?f("div",{key:"vy",ref:G,class:"vxe-table--scroll-y-virtual"},[f("div",{ref:U,class:"vxe-table--scroll-y-handle",onScroll:Ur},[f("div",{ref:j,class:"vxe-table--scroll-y-space"})])]):Tt(m),f("div",{key:"tn",ref:me,class:"vxe-table--empty-placeholder"},[f("div",{class:"vxe-table--empty-content"},ii())]),f("div",{key:"tl",class:"vxe-table--border-line"}),f("div",{key:"cl",ref:we,class:"vxe-table--resizable-bar",style:se?{"padding-bottom":`${fe}px`}:null}),v?f(v,{key:"lg",class:"vxe-table--loading",modelValue:Ho,icon:sn.icon,text:sn.text},Cl?{default:()=>Cl({$table:m,$grid:K})}:{}):Tt(m),nt.custom?f(Wi,{key:"cs",ref:p,customStore:tt}):Tt(m),nt.filter?f(Pi,{key:"tf",ref:b,filterStore:ft}):Tt(m),nt.import&&e.importConfig?f(Xi,{key:"it",defaultOptions:u.importParams,storeData:u.importStore}):Tt(m),nt.export&&(e.exportConfig||e.printConfig)?f(Ki,{key:"et",defaultOptions:u.exportParams,storeData:u.exportStore}):Tt(m),jl?f(qi,{key:"tm",ref:k}):Tt(m),Ko.drag&&(Ke||qe)?f("div",{ref:Te,class:"vxe-table--row-drag-tip"},_l?Ke?Fs(_l,{row:Ke}):[Tt(m)]:qe?[f("span",qe)]:[Tt(m)]):Tt(m),I?f("div",{},[f(I,{key:"ctp",ref:T,isArrow:!1,enterable:!1}),f(I,Object.assign({key:"btp",ref:z},ul,vt.currOpts)),e.editRules&&wo.showMessage&&(wo.message==="default"?!r:wo.message==="tooltip")?f(I,Object.assign({key:"vtp",ref:M,class:[{"old-cell-valid":V&&ot().cellVaildMode==="obsolete"},"vxe-table--valid-error"]},wo.message==="tooltip"||ve.length===1?Nt:{})):Tt(m)]):Tt(m)])},Vn=He(0);pt(()=>e.data?e.data.length:-1,()=>{Vn.value++}),pt(()=>e.data,()=>{Vn.value++}),pt(Vn,()=>{const{inited:t,initStatus:o}=g;Jl(e.data||[]).then(()=>{const{scrollXLoad:n,scrollYLoad:r,expandColumn:a}=u;g.inited=!0,g.initStatus=!0,o||en(),t||tn(),x.recalculate()})});const Nn=He(0);pt(()=>u.staticColumns.length,()=>{Nn.value++}),pt(()=>u.staticColumns,()=>{Nn.value++}),pt(Nn,()=>{Cs(u.staticColumns)});const $n=He(0);pt(()=>u.tableColumn.length,()=>{$n.value++}),pt(()=>u.tableColumn,()=>{$n.value++}),pt($n,()=>{B.analyColumnWidth()}),pt(()=>u.upDataFlag,()=>{oe(()=>{x.updateData()})}),pt(()=>u.reColumnFlag,()=>{oe(()=>{x.refreshColumn()})}),pt(()=>e.showHeader,()=>{oe(()=>{x.recalculate(!0).then(()=>x.refreshScroll())})}),pt(()=>e.showFooter,()=>{oe(()=>{x.recalculate(!0).then(()=>x.refreshScroll())})});const jn=He(0);pt(()=>e.footerData?e.footerData.length:-1,()=>{jn.value++}),pt(()=>e.footerData,()=>{jn.value++}),pt(jn,()=>{x.updateFooter()}),pt(()=>e.height,()=>{oe(()=>x.recalculate(!0))}),pt(()=>e.maxHeight,()=>{oe(()=>x.recalculate(!0))}),pt(()=>e.syncResize,t=>{t&&(Bn(),oe(()=>{Bn(),setTimeout(()=>Bn())}))});const _n=He(0);pt(()=>e.mergeCells?e.mergeCells.length:-1,()=>{_n.value++}),pt(()=>e.mergeCells,()=>{_n.value++}),pt(_n,()=>{x.clearMergeCells(),oe(()=>{e.mergeCells&&x.setMergeCells(e.mergeCells)})});const Wn=He(0);pt(()=>e.mergeFooterItems?e.mergeFooterItems.length:-1,()=>{Wn.value++}),pt(()=>e.mergeFooterItems,()=>{Wn.value++}),pt(Wn,()=>{x.clearMergeFooterItems(),oe(()=>{e.mergeFooterItems&&x.setMergeFooterItems(e.mergeFooterItems)})}),S&&pt(()=>S?S.reactData.resizeFlag:null,()=>{Ss()}),Zi.forEach(t=>{const{setupTable:o}=t;if(o){const n=o(m);n&&i.isObject(n)&&Object.assign(m,n)}}),B.preventEvent(null,"created",{$table:m});let $l;return ui(()=>{x.recalculate().then(()=>x.refreshScroll()),B.preventEvent(null,"activated",{$table:m})}),fi(()=>{g.isActivated=!1,B.preventEvent(null,"deactivated",{$table:m})}),Al(()=>{oe(()=>{const{data:t,treeConfig:o,showOverflow:n}=e,{scrollXStore:r,scrollYStore:a}=g,h=Re.value;if(le.value,et.value,Be.value,ye.value,bt.value,_e.value,Object.assign(a,{startIndex:0,endIndex:0,visibleSize:0,adaptive:h.adaptive!==!1}),Object.assign(r,{startIndex:0,endIndex:0,visibleSize:0}),Jl(t||[]).then(()=>{t&&t.length&&(g.inited=!0,g.initStatus=!0,en(),tn()),Mt()}),e.autoResize){const d=ie.value,{refreshDelay:w}=d,E=N.value,F=B.getParentElem(),D=w?i.throttle(()=>x.recalculate(!0),w,{leading:!0,trailing:!0}):null;$l=Gi.create(D?()=>{e.autoResize&&D()}:()=>{e.autoResize&&x.recalculate(!0)}),E&&$l.observe(E),F&&$l.observe(F)}}),ct.on(m,"paste",ti),ct.on(m,"copy",oi),ct.on(m,"cut",li),ct.on(m,"mousedown",Gr),ct.on(m,"blur",Zr),ct.on(m,"mousewheel",Qr),ct.on(m,"keydown",ei),ct.on(m,"resize",Ss),ct.on(m,"contextmenu",m.handleGlobalContextmenuEvent),B.preventEvent(null,"mounted",{$table:m})}),dr(()=>{$l&&$l.disconnect(),x.closeFilter(),m.closeMenu&&m.closeMenu(),B.preventEvent(null,"beforeUnmount",{$table:m})}),Ll(()=>{ct.off(m,"paste"),ct.off(m,"copy"),ct.off(m,"cut"),ct.off(m,"mousedown"),ct.off(m,"blur"),ct.off(m,"mousewheel"),ct.off(m,"keydown"),ct.off(m,"resize"),ct.off(m,"contextmenu"),B.preventEvent(null,"unmounted",{$table:m})}),Tl("$xeColgroup",null),Tl("$xeTable",m),m.renderVN=ai,m},render(){return this.renderVN()}});function ea(e){const l=je(()=>{const{renderParams:v}=e;return v.column}),s=je(()=>{const{renderParams:v}=e;return v.row}),c=je(()=>{const{renderOpts:v}=e;return v.props||{}}),C=je({get(){const{renderParams:v}=e,{row:I,column:S}=v;return i.get(I,S.field)},set(v){const{renderParams:I}=e,{row:S,column:X}=I;return i.set(S,X.field,v)}});return{currColumn:l,currRow:s,cellModel:C,cellOptions:c}}const{renderer:Qs,hooks:ta}=he,oa=["openFilter","setFilter","clearFilter","getCheckedFilters","updateFilterOptionStatus"];ta.add("tableFilterModule",{setupTable(e){const{props:l,reactData:s,internalData:c}=e,{refTableHeader:C,refTableBody:v,refTableFilter:I}=e.getRefMaps(),{computeFilterOpts:S,computeMouseOpts:X}=e.getComputeMaps(),u=T=>{const{filterStore:M}=s;M.options.forEach(k=>{k.checked=k._checked}),e.confirmFilterEvent(T)},g=(T,M,k)=>{const{filterStore:b}=s;b.options.forEach(p=>{p._checked=!1}),k._checked=M,e.checkFilterOptions(),u(T)},x=(T,M,k)=>{k._checked=M,e.checkFilterOptions()},N={checkFilterOptions(){const{filterStore:T}=s;T.isAllSelected=T.options.every(M=>M._checked),T.isIndeterminate=!T.isAllSelected&&T.options.some(M=>M._checked)},triggerFilterEvent(T,M,k){const{initStore:b,filterStore:p}=s;if(p.column===M&&p.visible)p.visible=!1;else{const{target:y,pageX:O}=T,{visibleWidth:R}=fs(),{filters:H,filterMultiple:W,filterRender:q}=M,ae=gt(q)?Qs.get(q.name):null,ce=M.filterRecoverMethod||(ae?ae.tableFilterRecoverMethod||ae.filterRecoverMethod:null);c._currFilterParams=k,Object.assign(p,{multiple:W,options:H,column:M,style:null}),p.options.forEach($=>{const{_checked:Q,checked:ue}=$;$._checked=ue,!ue&&Q!==ue&&ce&&ce({option:$,column:M,$table:e})}),this.checkFilterOptions(),p.visible=!0,b.filter=!0,oe(()=>{const $=C.value,Q=v.value,ue=$?$.$el:null,we=Q.$el;if(!we)return;const me=I.value,Te=me?me.$el:null;if(!Te)return;const A=Te.offsetWidth,G=Te.offsetHeight,_=Te.querySelector(".vxe-table--filter-header"),U=Te.querySelector(".vxe-table--filter-footer"),ne=A/2,j=10,K=we.clientWidth-A-j;let J,ee;const be={top:`${y.offsetTop+y.offsetParent.offsetTop+y.offsetHeight}px`};let pe=null;const Ie=we.clientHeight-(ue?ue.clientHeight/2:0);if(G>=Ie&&(pe=Math.max(40,Ie-(U?U.offsetHeight:0)-(_?_.offsetHeight:0))),M.fixed==="left"?J=y.offsetLeft+y.offsetParent.offsetLeft-ne:M.fixed==="right"?ee=y.offsetParent.offsetWidth-y.offsetLeft+(y.offsetParent.offsetParent.offsetWidth-y.offsetParent.offsetLeft)-M.renderWidth-ne:J=y.offsetLeft+y.offsetParent.offsetLeft-ne-we.scrollLeft,J){const Re=O+A-ne+j-R;Re>0&&(J-=Re),be.left=`${Math.min(K,Math.max(j,J))}px`}else if(ee){const Re=O+A-ne+j-R;Re>0&&(ee+=Re),be.right=`${Math.max(j,ee)}px`}p.style=be,p.maxHeight=pe})}e.dispatchEvent("filter-visible",{column:M,field:M.field,property:M.field,filterList:e.getCheckedFilters(),visible:p.visible},T)},handleClearFilter(T){if(T){const{filters:M,filterRender:k}=T;if(M){const b=gt(k)?Qs.get(k.name):null,p=T.filterResetMethod||(b?b.tableFilterResetMethod||b.filterResetMethod:null);M.forEach(y=>{y._checked=!1,y.checked=!1,p||(y.data=i.clone(y.resetValue,!0))}),p&&p({options:M,column:T,$table:e})}}},confirmFilterEvent(T){const{mouseConfig:M}=l,{filterStore:k,scrollXLoad:b,scrollYLoad:p}=s,y=S.value,O=X.value,{column:R}=k,{field:H}=R,W=[],q=[];R.filters.forEach($=>{$.checked&&(W.push($.value),q.push($.data))});const ae=e.getCheckedFilters(),ce={$table:e,$event:T,column:R,field:H,property:H,values:W,datas:q,filters:ae,filterList:ae};y.remote||(e.handleTableData(!0),e.checkSelectionStatus()),M&&O.area&&e.handleFilterEvent&&e.handleFilterEvent(T,ce),e.dispatchEvent("filter-change",ce,T),e.closeFilter(),e.updateFooter().then(()=>{const{scrollXLoad:$,scrollYLoad:Q}=s;if(b||$||p||Q)return(b||$)&&e.updateScrollXSpace(),(p||Q)&&e.updateScrollYSpace(),e.refreshScroll()}).then(()=>(e.updateCellAreas(),e.recalculate(!0))).then(()=>{setTimeout(()=>e.recalculate(),50)})},handleFilterChangeRadioOption:g,handleFilterChangeMultipleOption:x,handleFilterChangeOption(T,M,k){const{filterStore:b}=s;b.multiple?x(T,M,k):g(T,M,k)},handleFilterConfirmFilter:u,handleFilterResetFilter:T=>{const{filterStore:M}=s;e.handleClearFilter(M.column),e.confirmFilterEvent(T)}};return Object.assign(Object.assign({},{openFilter(T){const M=kt(e,T);if(M&&M.filters){const{elemStore:k}=c,{fixed:b}=M;return e.scrollToColumn(M).then(()=>{const p=k[`${b||"main"}-header-wrapper`]||k["main-header-wrapper"],y=p?p.value:null;if(y){const O=y.querySelector(`.vxe-header--column.${M.id} .vxe-filter--btn`);Ei(O,"click")}})}return oe()},setFilter(T,M){const k=kt(e,T);return k&&k.filters&&(k.filters=Cr(M||[])),oe()},clearFilter(T){const{filterStore:M}=s,{tableFullColumn:k}=c,b=S.value;let p;return T?(p=kt(e,T),p&&N.handleClearFilter(p)):k.forEach(N.handleClearFilter),(!T||p!==M.column)&&Object.assign(M,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),b.remote?oe():e.updateData()},getCheckedFilters(){const{tableFullColumn:T}=c,M=[];return T.forEach(k=>{const{field:b,filters:p}=k,y=[],O=[];p&&p.length&&(p.forEach(R=>{R.checked&&(y.push(R.value),O.push(R.data))}),y.length&&M.push({column:k,field:b,property:b,values:y,datas:O}))}),M},updateFilterOptionStatus(T,M){return T._checked=M,T.checked=M,oe()}}),N)},setupGrid(e){return e.extendTableMethods(oa)}});const{menus:la,hooks:na,globalEvents:fn,GLOBAL_EVENT_KEYS:hn}=he,sa=["closeMenu"];na.add("tableMenuModule",{setupTable(e){const{xID:l,props:s,reactData:c,internalData:C}=e,{refElem:v,refTableFilter:I,refTableMenu:S}=e.getRefMaps(),{computeMouseOpts:X,computeIsMenu:u,computeMenuOpts:g}=e.getComputeMaps();let x={},B={};const N=(z,T,M)=>{const{ctxMenuStore:k}=c,b=u.value,p=g.value,y=p[T],O=p.visibleMethod;if(y){const{options:R,disabled:H}=y;H?z.preventDefault():b&&R&&R.length&&(M.options=R,e.preventEvent(z,"event.showMenu",M,()=>{if(!O||O(M)){z.preventDefault(),e.updateZindex();const{scrollTop:W,scrollLeft:q,visibleHeight:ae,visibleWidth:ce}=fs();let $=z.clientY+W,Q=z.clientX+q;const ue=()=>{C._currMenuParams=M,Object.assign(k,{visible:!0,list:R,selected:null,selectChild:null,showChild:!1,style:{zIndex:C.tZindex,top:`${$}px`,left:`${Q}px`}}),oe(()=>{const G=S.value.getRefMaps().refElem.value,_=G.clientHeight,U=G.clientWidth,{boundingTop:ne,boundingLeft:j}=vn(G),K=ne+_-ae,J=j+U-ce;K>-10&&(k.style.top=`${Math.max(W+2,$-_-2)}px`),J>-10&&(k.style.left=`${Math.max(q+2,Q-U-2)}px`)})},{keyboard:we,row:me,column:Te}=M;we&&me&&Te?e.scrollToRow(me,Te).then(()=>{const A=e.getCellElement(me,Te);if(A){const{boundingTop:G,boundingLeft:_}=vn(A);$=G+W+Math.floor(A.offsetHeight/2),Q=_+q+Math.floor(A.offsetWidth/2)}ue()}):ue()}else x.closeMenu()}))}e.closeFilter()};return x={closeMenu(){return Object.assign(c.ctxMenuStore,{visible:!1,selected:null,selectChild:null,showChild:!1}),oe()}},B={moveCtxMenu(z,T,M,k,b,p){let y;const O=i.findIndexOf(p,R=>T[M]===R);if(k)b&&kl(T.selected)?T.showChild=!0:(T.showChild=!1,T.selectChild=null);else if(fn.hasKey(z,hn.ARROW_UP)){for(let R=O-1;R>=0;R--)if(p[R].visible!==!1){y=p[R];break}T[M]=y||p[p.length-1]}else if(fn.hasKey(z,hn.ARROW_DOWN)){for(let R=O+1;R<p.length;R++)if(p[R].visible!==!1){y=p[R];break}T[M]=y||p[0]}else T[M]&&(fn.hasKey(z,hn.ENTER)||fn.hasKey(z,hn.SPACEBAR))&&B.ctxMenuLinkEvent(z,T[M])},handleOpenMenuEvent:N,handleGlobalContextmenuEvent(z){const{mouseConfig:T,menuConfig:M}=s,{editStore:k,ctxMenuStore:b}=c,{visibleColumn:p}=C,y=I.value,O=S.value,R=X.value,H=g.value,W=v.value,{selected:q}=k,ae=["header","body","footer"];if(gt(M)){if(b.visible&&O&&rt(z,O.getRefMaps().refElem.value).flag){z.preventDefault();return}if(C._keyCtx){const ce="body",$={type:ce,$table:e,keyboard:!0,columns:p.slice(0),$event:z};if(T&&R.area){const Q=e.getActiveCellArea();if(Q&&Q.row&&Q.column){$.row=Q.row,$.column=Q.column,N(z,ce,$);return}}else if(T&&R.selected&&q.row&&q.column){$.row=q.row,$.column=q.column,N(z,ce,$);return}}for(let ce=0;ce<ae.length;ce++){const $=ae[ce],Q=rt(z,W,`vxe-${$}--column`,we=>we.parentNode.parentNode.parentNode.getAttribute("xid")===l),ue={type:$,$table:e,columns:p.slice(0),$event:z};if(Q.flag){const we=Q.targetElem,me=e.getColumnNode(we),Te=me?me.item:null;let A=`${$}-`;if(Te&&Object.assign(ue,{column:Te,columnIndex:e.getColumnIndex(Te),cell:we}),$==="body"){const _=e.getRowNode(we.parentNode),U=_?_.item:null;A="",U&&(ue.row=U,ue.rowIndex=e.getRowIndex(U))}const G=`${A}cell-menu`;N(z,$,ue),e.dispatchEvent(G,ue,z);return}else if(rt(z,W,`vxe-table--${$}-wrapper`,we=>we.getAttribute("xid")===l).flag){H.trigger==="cell"?z.preventDefault():N(z,$,ue);return}}}y&&!rt(z,y.$el).flag&&e.closeFilter(),x.closeMenu()},ctxMenuMouseoverEvent(z,T,M){const k=z.currentTarget,{ctxMenuStore:b}=c;z.preventDefault(),z.stopPropagation(),b.selected=T,b.selectChild=M,M||(b.showChild=kl(T),b.showChild&&oe(()=>{const p=k.nextElementSibling;if(p){const{boundingTop:y,boundingLeft:O,visibleHeight:R,visibleWidth:H}=vn(k),W=y+k.offsetHeight,q=O+k.offsetWidth;let ae="",ce="";q+p.offsetWidth>H-10&&(ae="auto",ce=`${k.offsetWidth}px`);let $="",Q="";W+p.offsetHeight>R-10&&($="auto",Q="0"),p.style.left=ae,p.style.right=ce,p.style.top=$,p.style.bottom=Q}}))},ctxMenuMouseoutEvent(z,T){const{ctxMenuStore:M}=c;T.children||(M.selected=null),M.selectChild=null},ctxMenuLinkEvent(z,T){if(!T.disabled&&(T.code||!T.children||!T.children.length)){const M=la.get(T.code),k=Object.assign({},C._currMenuParams,{menu:T,$table:e,$grid:e.xegrid,$event:z}),b=M?M.tableMenuMethod||M.menuMethod:null;b&&b(k,z),e.dispatchEvent("menu-click",k,z),x.closeMenu()}}},Object.assign(Object.assign({},x),B)},setupGrid(e){return e.extendTableMethods(sa)}});const{getConfig:ra,renderer:ia,hooks:aa,getI18n:Js}=he,ca=["insert","insertAt","insertNextAt","remove","removeCheckboxRow","removeRadioRow","removeCurrentRow","getRecordset","getInsertRecords","getRemoveRecords","getUpdateRecords","getEditRecord","getActiveRecord","getSelectedCell","clearEdit","clearActived","clearSelected","isEditByRow","isActiveByRow","setEditRow","setActiveRow","setEditCell","setActiveCell","setSelectCell"];aa.add("tableEditModule",{setupTable(e){const{props:l,reactData:s,internalData:c}=e,{refElem:C}=e.getRefMaps(),{computeMouseOpts:v,computeEditOpts:I,computeCheckboxOpts:S,computeTreeOpts:X,computeValidOpts:u}=e.getComputeMaps();let g={},x={};const B=(b,p)=>{const{model:y,editRender:O}=p;O&&(y.value=Bt(b,p),y.update=!1)},N=(b,p)=>{const{model:y,editRender:O}=p;O&&y.update&&(So(b,p,y.value),y.update=!1,y.value=null)},z=()=>{const b=C.value;if(b){const p=b.querySelector(".col--selected");p&&Kt(p,"col--selected")}};function T(){const{editStore:b,tableColumn:p}=s,y=I.value,{actived:O}=b,{row:R,column:H}=O;(R||H)&&(y.mode==="row"?p.forEach(W=>N(R,W)):N(R,H))}function M(b,p){const{tableFullTreeData:y,afterFullData:O,fullDataRowIdData:R,fullAllDataRowIdData:H}=c,W=X.value,{rowField:q,parentField:ae,mapChildrenField:ce}=W,$=W.children||W.childrenField,Q=p?"push":"unshift";b.forEach(ue=>{const we=ue[ae],me=re(e,ue),Te=we?i.findTree(y,A=>we===A[q],{children:ce}):null;if(Te){const{item:A}=Te,G=H[re(e,A)],_=G?G.level:0;let U=A[$],ne=A[ce];i.isArray(U)||(U=A[$]=[]),i.isArray(ne)||(ne=A[$]=[]),U[Q](ue),ne[Q](ue);const j={row:ue,rowid:me,seq:-1,index:-1,_index:-1,$index:-1,items:U,parent:A,level:_+1,height:0};R[me]=j,H[me]=j}else{O[Q](ue),y[Q](ue);const A={row:ue,rowid:me,seq:-1,index:-1,_index:-1,$index:-1,items:y,parent:null,level:0,height:0};R[me]=A,H[me]=A}})}const k=(b,p,y)=>{const{treeConfig:O}=l,{mergeList:R,editStore:H}=s,{tableFullTreeData:W,afterFullData:q,tableFullData:ae,fullDataRowIdData:ce,fullAllDataRowIdData:$}=c,Q=X.value,{transform:ue,rowField:we,mapChildrenField:me}=Q,Te=Q.children||Q.childrenField;i.isArray(b)||(b=[b]);const A=Zo(e.defineField(b.map(_=>Object.assign(O&&ue?{[me]:[],[Te]:[]}:{},_))));if(i.eqNull(p))O&&ue?M(A,!1):(q.unshift(...A),ae.unshift(...A),R.forEach(_=>{const{row:U}=_;U>0&&(_.row=U+A.length)}));else if(p===-1)O&&ue?M(A,!0):(q.push(...A),ae.push(...A),R.forEach(_=>{const{row:U,rowspan:ne}=_;U+ne>q.length&&(_.rowspan=ne+A.length)}));else if(O&&ue){const _=i.findTree(W,U=>p[we]===U[we],{children:me});if(_){const{parent:U}=_,ne=U?U[me]:W,j=$[re(e,U)],K=j?j.level:0;if(A.forEach((J,ee)=>{const be=re(e,J);U&&(J[Q.parentField]=U[we]);let pe=_.index+ee;y&&(pe=pe+1),ne.splice(pe,0,J);const Ie={row:J,rowid:be,seq:-1,index:-1,_index:-1,$index:-1,items:ne,parent:U,level:K+1,height:0};ce[be]=Ie,$[be]=Ie}),U){const J=i.findTree(W,ee=>p[we]===ee[we],{children:Te});if(J){const ee=J.items;let be=J.index;y&&(be=be+1),ee.splice(be,0,...A)}}}else M(A,!0)}else{if(O)throw new Error(Js("vxe.error.noTree",["insert"]));let _=-1;if(i.isNumber(p)?p<q.length&&(_=p):_=e.findRowIndexOf(q,p),y&&(_=Math.min(q.length,_+1)),_===-1)throw new Error(Js("vxe.error.unableInsert"));q.splice(_,0,...A),ae.splice(e.findRowIndexOf(ae,p),0,...A),R.forEach(U=>{const{row:ne,rowspan:j}=U;ne>_?U.row=ne+A.length:ne+j>_&&(U.rowspan=j+A.length)})}const{insertMaps:G}=H;return A.forEach(_=>{const U=re(e,_);G[U]=_}),e.cacheRowMap(),e.updateScrollYStatus(),e.handleTableData(O&&ue),O&&ue||e.updateAfterDataIndex(),e.updateFooter(),e.checkSelectionStatus(),s.scrollYLoad&&e.updateScrollYSpace(),oe().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:A.length?A[A.length-1]:null,rows:A}))};return g={insert(b){return k(b,null)},insertAt(b,p){return k(b,p)},insertNextAt(b,p){return k(b,p,!0)},remove(b){const{treeConfig:p}=l,{mergeList:y,editStore:O,selectCheckboxMaps:R}=s,{tableFullTreeData:H,afterFullData:W,tableFullData:q}=c,ae=S.value,ce=X.value,{transform:$,mapChildrenField:Q}=ce,ue=ce.children||ce.childrenField,{actived:we,removeMaps:me,insertMaps:Te}=O,{checkField:A}=ae;let G=[];if(b?i.isArray(b)||(b=[b]):b=q,b.forEach(_=>{if(!e.isInsertByRow(_)){const U=re(e,_);me[U]=_}}),!A){const _=Object.assign({},R);b.forEach(U=>{const ne=re(e,U);_[ne]&&delete _[ne]}),s.selectCheckboxMaps=_}return q===b?(b=G=q.slice(0),c.tableFullData=[],c.afterFullData=[],e.clearMergeCells()):p&&$?b.forEach(_=>{const U=re(e,_),ne=i.findTree(H,J=>U===re(e,J),{children:Q});if(ne){const J=ne.items.splice(ne.index,1);G.push(J[0])}const j=i.findTree(H,J=>U===re(e,J),{children:ue});j&&j.items.splice(j.index,1);const K=e.findRowIndexOf(W,_);K>-1&&W.splice(K,1)}):b.forEach(_=>{const U=e.findRowIndexOf(q,_);if(U>-1){const j=q.splice(U,1);G.push(j[0])}const ne=e.findRowIndexOf(W,_);ne>-1&&(y.forEach(j=>{const{row:K,rowspan:J}=j;K>ne?j.row=K-1:K+J>ne&&(j.rowspan=J-1)}),W.splice(ne,1))}),we.row&&e.findRowIndexOf(b,we.row)>-1&&g.clearEdit(),b.forEach(_=>{const U=re(e,_);Te[U]&&delete Te[U]}),e.updateFooter(),e.cacheRowMap(),e.handleTableData(p&&$),p&&$||e.updateAfterDataIndex(),e.checkSelectionStatus(),s.scrollYLoad&&e.updateScrollYSpace(),oe().then(()=>(e.updateCellAreas(),e.recalculate())).then(()=>({row:G.length?G[G.length-1]:null,rows:G}))},removeCheckboxRow(){return g.remove(e.getCheckboxRecords()).then(b=>(e.clearCheckboxRow(),b))},removeRadioRow(){const b=e.getRadioRecord();return g.remove(b||[]).then(p=>(e.clearRadioRow(),p))},removeCurrentRow(){const b=e.getCurrentRecord();return g.remove(b||[]).then(p=>(e.clearCurrentRow(),p))},getRecordset(){const b=g.getRemoveRecords(),p=e.getPendingRecords(),y=b.concat(p),O=g.getUpdateRecords().filter(R=>!y.some(H=>e.eqRow(H,R)));return{insertRecords:g.getInsertRecords(),removeRecords:b,updateRecords:O,pendingRecords:p}},getInsertRecords(){const{editStore:b}=s,{fullAllDataRowIdData:p}=c,{insertMaps:y}=b,O=[];return i.each(y,(R,H)=>{p[H]&&O.push(R)}),O},getRemoveRecords(){const{editStore:b}=s,{removeMaps:p}=b,y=[];return i.each(p,O=>{y.push(O)}),y},getUpdateRecords(){const{keepSource:b,treeConfig:p}=l,{tableFullData:y}=c,O=X.value;return b?(T(),p?i.filterTree(y,R=>e.isUpdateByRow(R),O):y.filter(R=>e.isUpdateByRow(R))):[]},getActiveRecord(){return this.getEditRecord()},getEditRecord(){const{editStore:b}=s,{afterFullData:p}=c,y=C.value,{args:O,row:R}=b.actived;return O&&e.findRowIndexOf(p,R)>-1&&y.querySelectorAll(".vxe-body--column.col--active").length?Object.assign({},O):null},getSelectedCell(){const{editStore:b}=s,{args:p,column:y}=b.selected;return p&&y?Object.assign({},p):null},clearActived(b){return this.clearEdit(b)},clearEdit(b){const{editStore:p}=s,{actived:y,focused:O}=p,{row:R,column:H}=y,W=u.value;return(R||H)&&(T(),y.args=null,y.row=null,y.column=null,e.updateFooter(),e.dispatchEvent("edit-closed",{row:R,rowIndex:e.getRowIndex(R),$rowIndex:e.getVMRowIndex(R),column:H,columnIndex:e.getColumnIndex(H),$columnIndex:e.getVMColumnIndex(H)},b||null)),W.autoClear&&(W.msgMode!=="full"||ra().cellVaildMode==="obsolete")&&e.clearValidate?e.clearValidate():(O.row=null,O.column=null,oe())},clearSelected(){const{editStore:b}=s,{selected:p}=b;return p.row=null,p.column=null,z(),oe()},isActiveByRow(b){return this.isEditByRow(b)},isEditByRow(b){const{editStore:p}=s;return p.actived.row===b},setActiveRow(b){return g.setEditRow(b)},setEditRow(b,p){const{visibleColumn:y}=c;let O=i.find(y,R=>gt(R.editRender));return p&&(O=i.isString(p)?e.getColumnByField(p):p),e.setEditCell(b,O)},setActiveCell(b,p){return g.setEditCell(b,p)},setEditCell(b,p){const{editConfig:y}=l,O=i.isString(p)?e.getColumnByField(p):p;return b&&O&&gt(y)&&gt(O.editRender)?e.scrollToRow(b,O).then(()=>{const R=e.getCellElement(b,O);return R&&(x.handleEdit({row:b,rowIndex:e.getRowIndex(b),column:O,columnIndex:e.getColumnIndex(O),cell:R,$table:e}),c._lastCallTime=Date.now()),oe()}):oe()},setSelectCell(b,p){const{tableData:y}=s,O=I.value,R=i.isString(p)?e.getColumnByField(p):p;if(b&&R&&O.trigger!=="manual"){const H=e.findRowIndexOf(y,b);if(H>-1&&R){const W=e.getCellElement(b,R),q={row:b,rowIndex:H,column:R,columnIndex:e.getColumnIndex(R),cell:W};e.handleSelected(q,{})}}return oe()}},x={handleEdit(b,p){const{editConfig:y,mouseConfig:O}=l,{editStore:R,tableColumn:H}=s,W=I.value,{mode:q}=W,{actived:ae,focused:ce}=R,{row:$,column:Q}=b,{editRender:ue}=Q,we=b.cell||e.getCellElement($,Q),me=W.beforeEditMethod||W.activeMethod;if(b.cell=we,we&&gt(y)&&gt(ue)&&!e.hasPendingByRow($)){if(ae.row!==$||q==="cell"&&ae.column!==Q){let Te="edit-disabled";if(!me||me(Object.assign(Object.assign({},b),{$table:e,$grid:e.xegrid}))){O&&(g.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),e.closeTooltip(),ae.column&&g.clearEdit(p),Te="edit-activated",Q.renderHeight=we.offsetHeight,ae.args=b,ae.row=$,ae.column=Q,q==="row"?H.forEach(G=>B($,G)):B($,Q);const A=W.afterEditMethod;oe(()=>{x.handleFocus(b,p),A&&A(Object.assign(Object.assign({},b),{$table:e,$grid:e.xegrid}))})}e.dispatchEvent(Te,{row:$,rowIndex:e.getRowIndex($),$rowIndex:e.getVMRowIndex($),column:Q,columnIndex:e.getColumnIndex(Q),$columnIndex:e.getVMColumnIndex(Q)},p),Te==="edit-activated"&&e.dispatchEvent("edit-actived",{row:$,rowIndex:e.getRowIndex($),$rowIndex:e.getVMRowIndex($),column:Q,columnIndex:e.getColumnIndex(Q),$columnIndex:e.getVMColumnIndex(Q)},p)}else{const{column:Te}=ae;if(O&&(g.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea())),Te!==Q){const{model:A}=Te;A.update&&So($,Te,A.value),e.clearValidate&&e.clearValidate($,Q)}Q.renderHeight=we.offsetHeight,ae.args=b,ae.column=Q,setTimeout(()=>{x.handleFocus(b,p)})}ce.column=null,ce.row=null,e.focus()}return oe()},handleActived(b,p){return x.handleEdit(b,p)},handleFocus(b){const{row:p,column:y,cell:O}=b,{editRender:R}=y,H=I.value;if(gt(R)){const W=ia.get(R.name);let q=R.autofocus||R.autoFocus,ae=R.autoSelect||R.autoselect,ce;if(H.autoFocus&&(!q&&W&&(q=W.tableAutoFocus||W.tableAutofocus||W.autofocus),!ae&&W&&(ae=W.tableAutoSelect||W.autoselect),i.isFunction(q)?ce=q(b):q&&(q===!0?ce=O.querySelector("input,textarea"):ce=O.querySelector(q),ce&&ce.focus())),ce){if(ae)ce.select();else if(Qo.msie){const $=ce.createTextRange();$.collapse(!1),$.select()}}else H.autoPos&&(y.fixed||e.scrollToRow(p,y))}},handleSelected(b,p){const{mouseConfig:y}=l,{editStore:O}=s,R=v.value,H=I.value,{actived:W,selected:q}=O,{row:ae,column:ce}=b,$=y&&R.selected;return $&&(q.row!==ae||q.column!==ce)&&(W.row!==ae||H.mode==="cell"&&W.column!==ce)&&(g.clearEdit(p),g.clearSelected(),e.clearCellAreas&&(e.clearCellAreas(),e.clearCopyCellArea()),q.args=b,q.row=ae,q.column=ce,$&&x.addCellSelectedClass(),e.focus(),p&&e.dispatchEvent("cell-selected",b,p)),oe()},addCellSelectedClass(){const{editStore:b}=s,{selected:p}=b,{row:y,column:O}=p;if(z(),y&&O){const R=e.getCellElement(y,O);R&&po(R,"col--selected")}}},Object.assign(Object.assign({},g),x)},setupGrid(e){return e.extendTableMethods(ca)}});const da='body{margin:0;padding: 0 1px;color:#333333;font-size:14px;font-family:"Microsoft YaHei",å¾®è½¯é›…é»‘,"MicrosoftJhengHei",åŽæ–‡ç»†é»‘,STHeiti,MingLiu}body *{-webkit-box-sizing:border-box;box-sizing:border-box}.vxe-table{border-collapse:collapse;text-align:left;border-spacing:0}.vxe-table:not(.is--print){table-layout:fixed}.vxe-table,.vxe-table th,.vxe-table td,.vxe-table td{border-color:#D0D0D0;border-style:solid;border-width:0}.vxe-table.is--print{width:100%}.border--default,.border--full,.border--outer{border-top-width:1px}.border--default,.border--full,.border--outer{border-left-width:1px}.border--outer,.border--default th,.border--default td,.border--full th,.border--full td,.border--outer th,.border--inner th,.border--inner td{border-bottom-width:1px}.border--default,.border--outer,.border--full th,.border--full td{border-right-width:1px}.border--default th,.border--full th,.border--outer th{background-color:#f8f8f9}.vxe-table td>div,.vxe-table th>div{padding:.5em .4em}.col--center{text-align:center}.col--right{text-align:right}.vxe-table:not(.is--print) .col--ellipsis>div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all}.vxe-table--tree-node{text-align:left}.vxe-table--tree-node-wrapper{position:relative}.vxe-table--tree-icon-wrapper{position:absolute;top:50%;width:1em;height:1em;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.vxe-table--tree-unfold-icon,.vxe-table--tree-fold-icon{position:absolute;width:0;height:0;border-style:solid;border-width:.5em;border-right-color:transparent;border-bottom-color:transparent}.vxe-table--tree-unfold-icon{left:.3em;top:0;border-left-color:#939599;border-top-color:transparent}.vxe-table--tree-fold-icon{left:0;top:.3em;border-left-color:transparent;border-top-color:#939599}.vxe-table--tree-cell{display:block;padding-left:1.5em}.vxe-table input[type="checkbox"]{margin:0}.vxe-table input[type="checkbox"],.vxe-table input[type="radio"],.vxe-table input[type="checkbox"]+span,.vxe-table input[type="radio"]+span{vertical-align:middle;padding-left:0.4em}';function ua(e,l){return new Blob([e],{type:`text/${l.type};charset=utf-8;`})}function fa(e,l){const{style:s}=e;return["<!DOCTYPE html><html>","<head>",'<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">',`<title>${e.sheetName}</title>`,'<style media="print">.vxe-page-break-before{page-break-before:always;}.vxe-page-break-after{page-break-after:always;}</style>',`<style>${da}</style>`,s?`<style>${s}</style>`:"","</head>",`<body>${l}</body>`,"</html>"].join("")}const{getI18n:yo,hooks:ha,renderer:ts}=he;let Ol;const pa="\uFEFF",gl=`\r
`;function er(e){return e.property||["seq","checkbox","radio"].indexOf(e.type)>-1}const Mr=e=>{const l=[];return e.forEach(s=>{s.childNodes&&s.childNodes.length?(l.push(s),l.push(...Mr(s.childNodes))):l.push(s)}),l},ga=e=>{let l=1;const s=(v,I)=>{if(I&&(v._level=I._level+1,l<v._level&&(l=v._level)),v.childNodes&&v.childNodes.length){let S=0;v.childNodes.forEach(X=>{s(X,v),S+=X._colSpan}),v._colSpan=S}else v._colSpan=1};e.forEach(v=>{v._level=1,s(v)});const c=[];for(let v=0;v<l;v++)c.push([]);return Mr(e).forEach(v=>{v.childNodes&&v.childNodes.length?v._rowSpan=1:v._rowSpan=l-v._level+1,c[v._level-1].push(v)}),c};function ma(e){return e===!0?"full":e||"default"}function Ml(e){return e==="TRUE"||e==="true"||e===!0}function pn(e,l){const{footerFilterMethod:s}=e;return s?l.filter((c,C)=>s({items:c,$rowIndex:C})):l}function ba(e,l){if(l){if(e.type==="seq")return`	${l}`;switch(e.cellType){case"string":if(!isNaN(l))return`	${l}`;break;case"number":break;default:if(l.length>=12&&!isNaN(l))return`	${l}`;break}}return l}function Fl(e){return/[",\s\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function oo(e,l){return e.getElementsByTagName(l)}function tr(e){return`#${e}@${i.uniqueId()}`}function Fr(e,l){return e.replace(/#\d+@\d+/g,s=>i.hasOwnProp(l,s)?l[s]:s)}function or(e,l){return Fr(e,l).replace(/^"+$/g,c=>'"'.repeat(Math.ceil(c.length/2)))}function kr(e,l,s){const c=l.split(gl),C=[];let v=[];if(c.length){const I={},S=Date.now();c.forEach(X=>{if(X){const u={};X=X.replace(/("")|(\n)/g,(x,B)=>{const N=tr(S);return I[N]=B?'"':`
`,N}).replace(/"(.*?)"/g,(x,B)=>{const N=tr(S);return I[N]=Fr(B,I),N});const g=X.split(s);v.length?(g.forEach((x,B)=>{B<v.length&&(u[v[B]]=or(x.trim(),I))}),C.push(u)):v=g.map(x=>or(x.trim(),I))}})}return{fields:v,rows:C}}function va(e,l){return kr(e,l,",")}function xa(e,l){return kr(e,l,"	")}function Ca(e,l){const c=new DOMParser().parseFromString(l,"text/html"),C=oo(c,"body"),v=[],I=[];if(C.length){const S=oo(C[0],"table");if(S.length){const X=oo(S[0],"thead");if(X.length){i.arrayEach(oo(X[0],"tr"),g=>{i.arrayEach(oo(g,"th"),x=>{I.push(x.textContent)})});const u=oo(S[0],"tbody");u.length&&i.arrayEach(oo(u[0],"tr"),g=>{const x={};i.arrayEach(oo(g,"td"),(B,N)=>{I[N]&&(x[I[N]]=B.textContent||"")}),v.push(x)})}}}return{fields:I,rows:v}}function wa(e,l){const c=new DOMParser().parseFromString(l,"application/xml"),C=oo(c,"Worksheet"),v=[],I=[];if(C.length){const S=oo(C[0],"Table");if(S.length){const X=oo(S[0],"Row");X.length&&(i.arrayEach(oo(X[0],"Cell"),u=>{I.push(u.textContent)}),i.arrayEach(X,(u,g)=>{if(g){const x={},B=oo(u,"Cell");i.arrayEach(B,(N,z)=>{I[z]&&(x[I[z]]=N.textContent)}),v.push(x)}}))}}return{fields:I,rows:v}}function lr(e){i.eachTree(e,l=>{delete l._level,delete l._colSpan,delete l._rowSpan,delete l._children,delete l.childNodes},{children:"children"})}function Ea(e,l){const s=[];return e.forEach(c=>{const C=c.property;C&&s.push(C)}),l.some(c=>s.indexOf(c)>-1)}const ya=["exportData","importByFile","importData","saveFile","readFile","print","getPrintHtml","openImport","closeImport","openExport","closeExport","openPrint","closePrint"];ha.add("tableExportModule",{setupTable(e){const{props:l,reactData:s,internalData:c}=e,{computeTreeOpts:C,computePrintOpts:v,computeExportOpts:I,computeImportOpts:S,computeCustomOpts:X,computeSeqOpts:u,computeRadioOpts:g,computeCheckboxOpts:x,computeColumnOpts:B}=e.getComputeMaps(),N=_t("$xeGrid",null),z=A=>{const G=C.value,_=G.children||G.childrenField;return A[_]&&A[_].length},T=(A,G,_,U,ne)=>{const K=u.value.seqMethod||U.seqMethod;return K?K({row:G,rowIndex:e.getRowIndex(G),$rowIndex:_,column:U,columnIndex:e.getColumnIndex(U),$columnIndex:ne}):A};function M(A,G){const _=B.value,U=G.headerExportMethod||_.headerExportMethod;return U?U({column:G,options:A,$table:e}):(A.original?G.property:G.getTitle())||""}const k=A=>i.isBoolean(A)?A?"TRUE":"FALSE":A,b=(A,G,_)=>{const{isAllExpand:U,mode:ne}=A,{treeConfig:j}=l,K=g.value,J=x.value,ee=C.value,be=B.value;if(Ol||(Ol=document.createElement("div")),j){const pe=ee.children||ee.childrenField,Ie=[],Re=new Map;return i.eachTree(_,(xe,Ye,ge,Oe,_e,de)=>{const ie=xe._row||xe,Se=_e&&_e._row?_e._row:_e;if(U||!Se||Re.has(Se)&&e.isTreeExpandByRow(Se)){const Ze=z(ie),Be={_row:ie,_level:de.length-1,_hasChild:Ze,_expand:Ze&&e.isTreeExpandByRow(ie)};G.forEach((ye,Ae)=>{let Ne="";const Ce=ye.editRender||ye.cellRender;let le=ye.exportMethod;if(!le&&Ce&&Ce.name){const Fe=ts.get(Ce.name);Fe&&(le=Fe.tableExportMethod||Fe.exportMethod)}if(le||(le=be.exportMethod),le)Ne=le({$table:e,row:ie,column:ye,options:A});else switch(ye.type){case"seq":{const Fe=Oe.map((Ee,ke)=>ke%2===0?Number(Ee)+1:".").join("");Ne=ne==="all"?Fe:T(Fe,ie,Ye,ye,Ae);break}case"checkbox":Ne=k(e.isCheckedByCheckboxRow(ie)),Be._checkboxLabel=J.labelField?i.get(ie,J.labelField):"",Be._checkboxDisabled=J.checkMethod&&!J.checkMethod({row:ie});break;case"radio":Ne=k(e.isCheckedByRadioRow(ie)),Be._radioLabel=K.labelField?i.get(ie,K.labelField):"",Be._radioDisabled=K.checkMethod&&!K.checkMethod({row:ie});break;default:if(A.original)Ne=Bt(ie,ye);else if(Ne=`${e.getCellLabel(ie,ye)}`,ye.type==="html")Ol.innerHTML=Ne,Ne=Ol.innerText.trim();else{const Fe=e.getCellElement(ie,ye);Fe&&(Ne=Fe.innerText.trim())}}Be[ye.id]=i.toValueString(Ne)}),Re.set(ie,1),Ie.push(Object.assign(Be,ie))}},{children:pe}),Ie}return _.map((pe,Ie)=>{const Re={_row:pe};return G.forEach((xe,Ye)=>{let ge="";const Oe=xe.editRender||xe.cellRender;let _e=xe.exportMethod;if(!_e&&Oe&&Oe.name){const de=ts.get(Oe.name);de&&(_e=de.exportMethod)}if(_e)ge=_e({$table:e,row:pe,column:xe,options:A});else switch(xe.type){case"seq":{const de=Ie+1;ge=ne==="all"?de:T(de,pe,Ie,xe,Ye);break}case"checkbox":ge=k(e.isCheckedByCheckboxRow(pe)),Re._checkboxLabel=J.labelField?i.get(pe,J.labelField):"",Re._checkboxDisabled=J.checkMethod&&!J.checkMethod({row:pe});break;case"radio":ge=k(e.isCheckedByRadioRow(pe)),Re._radioLabel=K.labelField?i.get(pe,K.labelField):"",Re._radioDisabled=K.checkMethod&&!K.checkMethod({row:pe});break;default:if(A.original)ge=Bt(pe,xe);else if(ge=`${e.getCellLabel(pe,xe)}`,xe.type==="html")Ol.innerHTML=ge,ge=Ol.innerText.trim();else{const de=e.getCellElement(pe,xe);de&&(ge=de.innerText.trim())}}Re[xe.id]=i.toValueString(ge)}),Re})},p=A=>{const{columns:G,dataFilterMethod:_}=A;let U=A.data;return _&&(U=U.filter((ne,j)=>_({row:ne,$rowIndex:j}))),b(A,G,U)},y=(A,G,_)=>{const U=B.value,ne=_.editRender||_.cellRender;let j=_.footerExportMethod;if(!j&&ne&&ne.name){const J=ts.get(ne.name);J&&(j=J.tableFooterExportMethod||J.footerExportMethod)}j||(j=U.footerExportMethod);const K=e.getVTColumnIndex(_);return j?j({$table:e,items:G,itemIndex:K,row:G,_columnIndex:K,column:_,options:A}):i.isArray(G)?i.toValueString(G[K]):i.get(G,_.field)},O=(A,G,_)=>{let U=pa;if(A.isHeader&&(U+=G.map(ne=>Fl(M(A,ne))).join(",")+gl),_.forEach(ne=>{U+=G.map(j=>Fl(ba(j,ne[j.id]))).join(",")+gl}),A.isFooter){const{footerTableData:ne}=s;pn(A,ne).forEach(K=>{U+=G.map(J=>Fl(y(A,K,J))).join(",")+gl})}return U},R=(A,G,_)=>{let U="";if(A.isHeader&&(U+=G.map(ne=>Fl(M(A,ne))).join("	")+gl),_.forEach(ne=>{U+=G.map(j=>Fl(ne[j.id])).join("	")+gl}),A.isFooter){const{footerTableData:ne}=s;pn(A,ne).forEach(K=>{U+=G.map(J=>Fl(y(A,K,J))).join("	")+gl})}return U},H=(A,G,_)=>{const U=A[G],ne=i.isUndefined(U)||i.isNull(U)?_:U;let ee=ne==="title"||(ne===!0||ne==="tooltip")||ne==="ellipsis";const{scrollXLoad:be,scrollYLoad:pe}=s;return(be||pe)&&!ee&&(ee=!0),ee},W=(A,G,_)=>{const{id:U,border:ne,treeConfig:j,headerAlign:K,align:J,footerAlign:ee,showOverflow:be,showHeaderOverflow:pe}=l,{isAllSelected:Ie,isIndeterminate:Re,mergeList:xe}=s,Ye=C.value,{print:ge,isHeader:Oe,isFooter:_e,isColgroup:de,isMerge:ie,colgroups:Se,original:Ze}=A,Be="check-all",Ae=[`<table class="${["vxe-table",`border--${ma(ne)}`,ge?"is--print":"",Oe?"is--header":""].filter(Ce=>Ce).join(" ")}" border="0" cellspacing="0" cellpadding="0">`,`<colgroup>${G.map(Ce=>`<col style="width:${Ce.renderWidth}px">`).join("")}</colgroup>`];if(Oe&&(Ae.push("<thead>"),de&&!Ze?Se.forEach(Ce=>{Ae.push(`<tr>${Ce.map(le=>{const Fe=le.headerAlign||le.align||K||J,Ee=H(le,"showHeaderOverflow",pe)?["col--ellipsis"]:[],ke=M(A,le);let Pe=0,Ue=0;i.eachTree([le],Je=>{(!Je.childNodes||!le.childNodes.length)&&Ue++,Pe+=Je.renderWidth},{children:"childNodes"});const ze=Pe-Ue;return Fe&&Ee.push(`col--${Fe}`),le.type==="checkbox"?`<th class="${Ee.join(" ")}" colspan="${le._colSpan}" rowspan="${le._rowSpan}"><div ${ge?"":`style="width: ${ze}px"`}><input type="checkbox" class="${Be}" ${Ie?"checked":""}><span>${ke}</span></div></th>`:`<th class="${Ee.join(" ")}" colspan="${le._colSpan}" rowspan="${le._rowSpan}" title="${ke}"><div ${ge?"":`style="width: ${ze}px"`}><span>${It(ke,!0)}</span></div></th>`}).join("")}</tr>`)}):Ae.push(`<tr>${G.map(Ce=>{const le=Ce.headerAlign||Ce.align||K||J,Fe=H(Ce,"showHeaderOverflow",pe)?["col--ellipsis"]:[],Ee=M(A,Ce);return le&&Fe.push(`col--${le}`),Ce.type==="checkbox"?`<th class="${Fe.join(" ")}"><div ${ge?"":`style="width: ${Ce.renderWidth}px"`}><input type="checkbox" class="${Be}" ${Ie?"checked":""}><span>${Ee}</span></div></th>`:`<th class="${Fe.join(" ")}" title="${Ee}"><div ${ge?"":`style="width: ${Ce.renderWidth}px"`}><span>${It(Ee,!0)}</span></div></th>`}).join("")}</tr>`),Ae.push("</thead>")),_.length&&(Ae.push("<tbody>"),j?_.forEach(Ce=>{Ae.push("<tr>"+G.map(le=>{const Fe=le.align||J,Ee=H(le,"showOverflow",be)?["col--ellipsis"]:[],ke=Ce[le.id];if(Fe&&Ee.push(`col--${Fe}`),le.treeNode){let Pe="";return Ce._hasChild&&(Pe=`<i class="${Ce._expand?"vxe-table--tree-fold-icon":"vxe-table--tree-unfold-icon"}"></i>`),Ee.push("vxe-table--tree-node"),le.type==="radio"?`<td class="${Ee.join(" ")}" title="${ke}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ce._level*Ye.indent}px"><div class="vxe-table--tree-icon-wrapper">${Pe}</div><div class="vxe-table--tree-cell"><input type="radio" name="radio_${U}" ${Ce._radioDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._radioLabel}</span></div></div></div></td>`:le.type==="checkbox"?`<td class="${Ee.join(" ")}" title="${ke}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ce._level*Ye.indent}px"><div class="vxe-table--tree-icon-wrapper">${Pe}</div><div class="vxe-table--tree-cell"><input type="checkbox" ${Ce._checkboxDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._checkboxLabel}</span></div></div></div></td>`:`<td class="${Ee.join(" ")}" title="${ke}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><div class="vxe-table--tree-node-wrapper" style="padding-left: ${Ce._level*Ye.indent}px"><div class="vxe-table--tree-icon-wrapper">${Pe}</div><div class="vxe-table--tree-cell">${ke}</div></div></div></td>`}return le.type==="radio"?`<td class="${Ee.join(" ")}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><input type="radio" name="radio_${U}" ${Ce._radioDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._radioLabel}</span></div></td>`:le.type==="checkbox"?`<td class="${Ee.join(" ")}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><input type="checkbox" ${Ce._checkboxDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._checkboxLabel}</span></div></td>`:`<td class="${Ee.join(" ")}" title="${ke}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}>${It(ke,!0)}</div></td>`}).join("")+"</tr>")}):_.forEach(Ce=>{Ae.push("<tr>"+G.map(le=>{const Fe=le.align||J,Ee=H(le,"showOverflow",be)?["col--ellipsis"]:[],ke=Ce[le.id];let Pe=1,Ue=1;if(ie&&xe.length){const ze=e.getVTRowIndex(Ce._row),Je=e.getVTColumnIndex(le),We=Rr(xe,ze,Je);if(We){const{rowspan:Ge,colspan:lt}=We;if(!Ge||!lt)return"";Ge>1&&(Pe=Ge),lt>1&&(Ue=lt)}}return Fe&&Ee.push(`col--${Fe}`),le.type==="radio"?`<td class="${Ee.join(" ")}" rowspan="${Pe}" colspan="${Ue}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><input type="radio" name="radio_${U}" ${Ce._radioDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._radioLabel}</span></div></td>`:le.type==="checkbox"?`<td class="${Ee.join(" ")}" rowspan="${Pe}" colspan="${Ue}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}><input type="checkbox" ${Ce._checkboxDisabled?"disabled ":""}${Ml(ke)?"checked":""}><span>${Ce._checkboxLabel}</span></div></td>`:`<td class="${Ee.join(" ")}" rowspan="${Pe}" colspan="${Ue}" title="${ke}"><div ${ge?"":`style="width: ${le.renderWidth}px"`}>${It(ke,!0)}</div></td>`}).join("")+"</tr>")}),Ae.push("</tbody>")),_e){const{footerTableData:Ce}=s,le=pn(A,Ce);le.length&&(Ae.push("<tfoot>"),le.forEach(Fe=>{Ae.push(`<tr>${G.map(Ee=>{const ke=Ee.footerAlign||Ee.align||ee||J,Pe=H(Ee,"showOverflow",be)?["col--ellipsis"]:[],Ue=y(A,Fe,Ee);return ke&&Pe.push(`col--${ke}`),`<td class="${Pe.join(" ")}" title="${Ue}"><div ${ge?"":`style="width: ${Ee.renderWidth}px"`}>${It(Ue,!0)}</div></td>`}).join("")}</tr>`)}),Ae.push("</tfoot>"))}const Ne=!Ie&&Re?`<script>(function(){var a=document.querySelector(".${Be}");if(a){a.indeterminate=true}})()<\/script>`:"";return Ae.push("</table>",Ne),ge?Ae.join(""):fa(A,Ae.join(""))},q=(A,G,_)=>{let U=['<?xml version="1.0"?>','<?mso-application progid="Excel.Sheet"?>','<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">','<DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">',"<Version>16.00</Version>","</DocumentProperties>",'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">',"<WindowHeight>7920</WindowHeight>","<WindowWidth>21570</WindowWidth>","<WindowTopX>32767</WindowTopX>","<WindowTopY>32767</WindowTopY>","<ProtectStructure>False</ProtectStructure>","<ProtectWindows>False</ProtectWindows>","</ExcelWorkbook>",`<Worksheet ss:Name="${A.sheetName}">`,"<Table>",G.map(ne=>`<Column ss:Width="${ne.renderWidth}"/>`).join("")].join("");if(A.isHeader&&(U+=`<Row>${G.map(ne=>`<Cell><Data ss:Type="String">${M(A,ne)}</Data></Cell>`).join("")}</Row>`),_.forEach(ne=>{U+="<Row>"+G.map(j=>`<Cell><Data ss:Type="String">${ne[j.id]}</Data></Cell>`).join("")+"</Row>"}),A.isFooter){const{footerTableData:ne}=s;pn(A,ne).forEach(K=>{U+=`<Row>${G.map(J=>`<Cell><Data ss:Type="String">${y(A,K,J)}</Data></Cell>`).join("")}</Row>`})}return`${U}</Table></Worksheet></Workbook>`},ae=(A,G,_)=>{if(G.length)switch(A.type){case"csv":return O(A,G,_);case"txt":return R(A,G,_);case"html":return W(A,G,_);case"xml":return q(A,G,_)}return""},ce=(A,G)=>{const{filename:_,type:U,download:ne}=A;if(!ne){const j=ua(G,A);return Promise.resolve({type:U,content:G,blob:j})}he.saveFile&&he.saveFile({filename:_,type:U,content:G}).then(()=>{A.message!==!1&&he.modal&&he.modal.message({content:yo("vxe.table.expSuccess"),status:"success"})})},$=A=>{const{remote:G,columns:_,colgroups:U,exportMethod:ne,afterExportMethod:j}=A;return new Promise(K=>{if(G){const J={options:A,$table:e,$grid:N};K(ne?ne(J):J)}else{const J=p(A);K(e.preventEvent(null,"event.export",{options:A,columns:_,colgroups:U,datas:J},()=>ce(A,ae(A,_,J))))}}).then(K=>(lr(_),A.print||j&&j({status:!0,options:A,$table:e,$grid:N}),Object.assign({status:!0},K))).catch(()=>{lr(_),A.print||j&&j({status:!1,options:A,$table:e,$grid:N});const K={status:!1};return Promise.reject(K)})},Q=(A,G)=>{const{tableFullColumn:_,_importResolve:U,_importReject:ne}=c;let j={fields:[],rows:[]};switch(G.type){case"csv":j=va(_,A);break;case"txt":j=xa(_,A);break;case"html":j=Ca(_,A);break;case"xml":j=wa(_,A);break}const{fields:K,rows:J}=j;Ea(_,K)?e.createData(J).then(be=>{let pe;return(G.mode==="insert"||G.mode==="insertBottom")&&(pe=e.insertAt(be,-1)),G.mode==="insertTop"?pe=e.insert(be):pe=e.reloadData(be),G.message!==!1&&he.modal&&he.modal.message({content:yo("vxe.table.impSuccess",[J.length]),status:"success"}),pe.then(()=>{U&&U({status:!0})})}):G.message!==!1&&(he.modal&&he.modal.message({content:yo("vxe.error.impFields"),status:"error"}),ne&&ne({status:!1}))},ue=(A,G)=>{const{importMethod:_,afterImportMethod:U}=G,{type:ne,filename:j}=hr(A),K=S.value;if(!_&&!i.includes(i.keys(K._typeMaps),ne)){G.message!==!1&&he.modal&&he.modal.message({content:yo("vxe.error.notType",[ne]),status:"error"});const ee={status:!1};return Promise.reject(ee)}return new Promise((ee,be)=>{const pe=Re=>{ee(Re),c._importResolve=null,c._importReject=null},Ie=Re=>{be(Re),c._importResolve=null,c._importReject=null};if(c._importResolve=pe,c._importReject=Ie,window.FileReader){const Re=Object.assign({mode:"insertTop"},G,{type:ne,filename:j});if(Re.remote)_?Promise.resolve(_({file:A,options:Re,$table:e})).then(()=>{pe({status:!0})}).catch(()=>{pe({status:!0})}):pe({status:!0});else{const{tableFullColumn:xe}=c;e.preventEvent(null,"event.import",{file:A,options:Re,columns:xe},()=>{const Ye=new FileReader;Ye.onerror=()=>{Gt("vxe.error.notType",[ne]),Ie({status:!1})},Ye.onload=ge=>{Q(ge.target.result,Re)},Ye.readAsText(A,Re.encoding||"UTF-8")})}}else pe({status:!0})}).then(()=>{U&&U({status:!0,options:G,$table:e})}).catch(ee=>(U&&U({status:!1,options:G,$table:e}),Promise.reject(ee)))},we=(A,G)=>{const{treeConfig:_,showHeader:U,showFooter:ne}=l,{initStore:j,mergeList:K,isGroup:J,footerTableData:ee,exportStore:be,exportParams:pe}=s,{collectColumn:Ie}=c,Re=I.value,xe=_,Ye=X.value,ge=e.getCheckboxRecords(),Oe=N?N.getComputeMaps().computeProxyOpts.value:{},_e=!!ee.length,de=!xe&&K.length,ie=Object.assign({message:!0,isHeader:U,isFooter:ne,current:"current",modes:["current","selected"].concat(Oe.ajax&&Oe.ajax.queryAll?["all"]:[])},A),Se=ie.types||i.keys(Re._typeMaps),Ze=ie.modes||[],Be=Ye.checkMethod,ye=Ie.slice(0),{columns:Ae}=ie,Ne=Se.map(le=>({value:le,label:yo(`vxe.export.types.${le}`)})),Ce=Ze.map(le=>le&&le.value?{value:le.value,label:le.label||le.value}:{value:le,label:yo(`vxe.export.modes.${le}`)});return i.eachTree(ye,(le,Fe,Ee,ke,Pe)=>{(le.children&&le.children.length||er(le))&&(le.checked=Ae?Ae.some(ze=>{if(xn(ze))return le===ze;if(i.isString(ze))return le.field===ze;{const Je=ze.id||ze.colId,We=ze.type,Ge=ze.property||ze.field;if(Je)return le.id===Je;if(Ge&&We)return le.property===Ge&&le.type===We;if(Ge)return le.property===Ge;if(We)return le.type===We}return!1}):le.visible,le.halfChecked=!1,le.disabled=Pe&&Pe.disabled||(Be?!Be({column:le}):!1))}),Object.assign(be,{columns:ye,typeList:Ne,modeList:Ce,hasFooter:_e,hasMerge:de,hasTree:xe,isPrint:G,hasColgroup:J,visible:!0}),Object.assign(pe,{mode:ge.length?"selected":"current"},ie),Ce.some(le=>le.value===pe.mode)||(pe.mode=Ce[0].value),Ne.some(le=>le.value===pe.type)||(pe.type=Ne[0].value),j.export=!0,oe()},me=()=>he.modal?he.modal.close("VXE_EXPORT_MODAL"):Promise.resolve(),Te={exportData(A){const{treeConfig:G}=l,{isGroup:_,tableGroupColumn:U}=s,{tableFullColumn:ne,afterFullData:j}=c,K=I.value,J=C.value,ee=Object.assign({isHeader:!0,isFooter:!0,isColgroup:!0,download:!0,type:"csv",mode:"current"},K,{print:!1},A),{type:be,mode:pe,columns:Ie,original:Re,beforeExportMethod:xe}=ee;let Ye=[];const ge=Ie&&Ie.length?Ie:null;let Oe=ee.columnFilterMethod;!ge&&!Oe&&(Oe=Re?({column:de})=>de.property:({column:de})=>er(de)),ge?(ee._isCustomColumn=!0,Ye=i.searchTree(i.mapTree(ge,de=>{let ie;if(de){if(xn(de))ie=de;else if(i.isString(de))ie=e.getColumnByField(de);else{const Se=de.id||de.colId,Ze=de.type,Be=de.property||de.field;Se?ie=e.getColumnById(Se):Be&&Ze?ie=ne.find(ye=>ye.property===Be&&ye.type===Ze):Be?ie=e.getColumnByField(Be):Ze&&(ie=ne.find(ye=>ye.type===Ze))}return ie||{}}},{children:"childNodes",mapChildren:"_children"}),(de,ie)=>xn(de)&&(!Oe||Oe({column:de,$columnIndex:ie})),{children:"_children",mapChildren:"childNodes",original:!0})):Ye=i.searchTree(_?U:ne,(de,ie)=>de.visible&&(!Oe||Oe({column:de,$columnIndex:ie})),{children:"children",mapChildren:"childNodes",original:!0});const _e=[];if(i.eachTree(Ye,de=>{de.children&&de.children.length||_e.push(de)},{children:"childNodes"}),ee.columns=_e,ee.colgroups=ga(Ye),ee.filename||(ee.filename=yo(ee.original?"vxe.table.expOriginFilename":"vxe.table.expFilename",[i.toDateString(Date.now(),"yyyyMMddHHmmss")])),ee.sheetName||(ee.sheetName=document.title),!ee.exportMethod&&!i.includes(i.keys(K._typeMaps),be)){const de={status:!1};return Promise.reject(de)}if(ee.print||xe&&xe({options:ee,$table:e,$grid:N}),!ee.data)if(ee.data=[],pe==="selected"){const de=e.getCheckboxRecords();["html","pdf"].indexOf(be)>-1&&G?ee.data=i.searchTree(e.getTableData().fullData,ie=>e.findRowIndexOf(de,ie)>-1,Object.assign({},J,{data:"_row"})):ee.data=de}else if(pe==="all"){if(N&&!ee.remote){const{reactData:de}=N,{computeProxyOpts:ie}=N.getComputeMaps(),{sortData:Se}=de,Ze=ie.value,{beforeQueryAll:Be,afterQueryAll:ye,ajax:Ae={},props:Ne={}}=Ze,Ce=Ae.queryAll,le=Ae.queryAllSuccess,Fe=Ae.queryAllError;if(Ce){const Ee={$table:e,$grid:N,sort:Se.length?Se[0]:{},sorts:Se,filters:de.filterData,form:de.formData,options:ee};return Promise.resolve((Be||Ce)(Ee)).then(ke=>(ee.data=(Ne.list?i.get(ke,Ne.list):ke)||[],ye&&ye(Ee),le&&le(Object.assign(Object.assign({},Ee),{response:ke})),$(ee))).catch(ke=>{Fe&&Fe(Object.assign(Object.assign({},Ee),{response:ke}))})}}}else pe==="current"&&(ee.data=j);return $(ee)},importByFile(A,G){const _=Object.assign({},G),{beforeImportMethod:U}=_;return U&&U({options:_,$table:e}),ue(A,_)},importData(A){const G=S.value,_=Object.assign({types:i.keys(G._typeMaps)},G,A),{beforeImportMethod:U,afterImportMethod:ne}=_;return U&&U({options:_,$table:e}),he.readFile(_).catch(j=>(ne&&ne({status:!1,options:_,$table:e}),Promise.reject(j))).then(j=>{const{file:K}=j;return ue(K,_)})},saveFile(A){return he.saveFile(A)},readFile(A){return he.readFile(A)},print(A){const G=v.value,_=Object.assign({original:!1},G,A,{type:"html",download:!1,remote:!1,print:!0});_.sheetName||(_.sheetName=document.title);const U=_.beforePrintMethod,ne=_.html||_.content;return new Promise((j,K)=>{he.print?j(ne?he.print({title:_.sheetName,html:ne,customStyle:_.style,beforeMethod:U?({html:J})=>U({html:J,content:J,options:_,$table:e}):void 0}):Te.exportData(_).then(({content:J})=>he.print({title:_.sheetName,html:J,customStyle:_.style,beforeMethod:U?({html:ee})=>U({html:ee,content:ee,options:_,$table:e}):void 0}))):K({status:!1})})},getPrintHtml(A){const G=v.value,_=Object.assign({original:!1},G,A,{type:"html",download:!1,remote:!1,print:!0});return Te.exportData(_).then(({content:U})=>({html:U}))},closeImport(){return he.modal?he.modal.close("VXE_IMPORT_MODAL"):Promise.resolve()},openImport(A){const{treeConfig:G,importConfig:_}=l,{initStore:U,importStore:ne,importParams:j}=s,K=S.value,J=Object.assign({mode:"insertTop",message:!0,types:i.keys(K._typeMaps),modes:["insertTop","covering"]},K,A),ee=J.types||[],be=J.modes||[];if(!!G){J.message&&he.modal&&he.modal.message({content:yo("vxe.error.treeNotImp"),status:"error"});return}_||Gt("vxe.error.reqProp",["import-config"]);const Ie=ee.map(xe=>({value:xe,label:yo(`vxe.export.types.${xe}`)})),Re=be.map(xe=>xe&&xe.value?{value:xe.value,label:xe.label||xe.value}:{value:xe,label:yo(`vxe.import.modes.${xe}`)});Object.assign(ne,{file:null,type:"",filename:"",modeList:Re,typeList:Ie,visible:!0}),Object.assign(j,J),Re.some(xe=>xe.value===j.mode)||(j.mode=Re[0].value),U.import=!0},closeExport:me,openExport(A){const G=I.value,_=Object.assign({message:!0,types:i.keys(G._typeMaps)},G,A);we(_)},closePrint:me,openPrint(A){const G=v.value,_=Object.assign({message:!0},G,A);we(_,!0)}};return Te},setupGrid(e){return e.extendTableMethods(ya)}});const{hooks:Ra}=he;function Sa(e,l){let s=0,c=0;const C=!Qo.firefox&&ml(e,"vxe-checkbox--label");if(C){const v=getComputedStyle(e);s-=i.toNumber(v.paddingTop),c-=i.toNumber(v.paddingLeft)}for(;e&&e!==l;)if(s+=e.offsetTop,c+=e.offsetLeft,e=e.offsetParent,C){const v=getComputedStyle(e);s-=i.toNumber(v.paddingTop),c-=i.toNumber(v.paddingLeft)}return{offsetTop:s,offsetLeft:c}}Ra.add("tableKeyboardModule",{setupTable(e){const{props:l,reactData:s,internalData:c}=e,{refElem:C}=e.getRefMaps(),{computeEditOpts:v,computeCheckboxOpts:I,computeMouseOpts:S,computeTreeOpts:X}=e.getComputeMaps();function u(N,z,T,M,k,b){let p=0,y=[],O=0;const R=b>0,{scrollYLoad:H}=s,{afterFullData:W,scrollYStore:q}=c;if(H){R?O=k+b:O=M.height-k+Math.abs(b);const ae=e.getVTRowIndex(z.row);R?y=W.slice(ae,ae+Math.ceil(O/q.rowHeight)):y=W.slice(ae-Math.floor(O/q.rowHeight),ae+1)}else{R?O=N.clientY-M.y:O=M.y-N.clientY+M.height;const ae=R?"next":"previous";for(;T&&p<O;){const ce=e.getRowNode(T);ce&&(y.push(ce.item),p+=T.offsetHeight,T=T[`${ae}ElementSibling`])}}return y}const g=(N,z)=>{const{column:T,cell:M}=z;if(T.type==="checkbox"){const k=C.value,{elemStore:b}=c,p=N.clientX,y=N.clientY,O=b[`${T.fixed||"main"}-body-wrapper`]||b["main-body-wrapper"],R=O?O.value:null;if(!R)return;const H=R.querySelector(".vxe-table--checkbox-range"),W=document.onmousemove,q=document.onmouseup,ae=M.parentElement,ce=e.getCheckboxRecords();let $=[];const Q=1,ue=Sa(N.target,R),we=ue.offsetTop+N.offsetY,me=ue.offsetLeft+N.offsetX,Te=R.scrollTop,A=ae.offsetHeight,G=ae.getBoundingClientRect(),_=y-G.y;let U=null,ne=!1,j=1;const K=(pe,Ie)=>{e.dispatchEvent(`checkbox-range-${pe}`,{records:e.getCheckboxRecords(),reserves:e.getCheckboxReserveRecords()},Ie)},J=pe=>{const{clientX:Ie,clientY:Re}=pe,xe=Ie-p,Ye=Re-y+(R.scrollTop-Te);let ge=Math.abs(Ye),Oe=Math.abs(xe),_e=we,de=me;Ye<Q?(_e+=Ye,_e<Q&&(_e=Q,ge=we)):ge=Math.min(ge,R.scrollHeight-we-Q),xe<Q?(de+=xe,Oe>me&&(de=Q,Oe=me)):Oe=Math.min(Oe,R.clientWidth-me-Q),H.style.height=`${ge}px`,H.style.width=`${Oe}px`,H.style.left=`${de}px`,H.style.top=`${_e}px`,H.style.display="block";const ie=u(pe,z,ae,G,_,Ye<Q?-ge:ge);ge>10&&ie.length!==$.length&&($=ie,pe.ctrlKey?ie.forEach(Se=>{e.handleSelectRow({row:Se},ce.indexOf(Se)===-1)}):(e.setAllCheckboxRow(!1),e.handleCheckedCheckboxRow(ie,!0,!1)),K("change",pe))},ee=()=>{clearTimeout(U),U=null},be=pe=>{ee(),U=setTimeout(()=>{if(U){const{scrollLeft:Ie,scrollTop:Re,clientHeight:xe,scrollHeight:Ye}=R,ge=Math.ceil(j*50/A);ne?Re+xe<Ye?(e.scrollTo(Ie,Re+ge),be(pe),J(pe)):ee():Re?(e.scrollTo(Ie,Re-ge),be(pe),J(pe)):ee()}},50)};po(k,"drag--range"),document.onmousemove=pe=>{pe.preventDefault(),pe.stopPropagation();const{clientY:Ie}=pe,{boundingTop:Re}=vn(R);Ie<Re?(ne=!1,j=Re-Ie,U||be(pe)):Ie>Re+R.clientHeight?(ne=!0,j=Ie-Re-R.clientHeight,U||be(pe)):U&&ee(),J(pe)},document.onmouseup=pe=>{ee(),Kt(k,"drag--range"),H.removeAttribute("style"),document.onmousemove=W,document.onmouseup=q,K("end",pe)},K("start",N)}},x=(N,z)=>{const{editConfig:T,checkboxConfig:M,mouseConfig:k}=l,b=I.value,p=S.value,y=v.value;if(k&&p.area&&e.handleCellAreaEvent)return e.handleCellAreaEvent(N,z);M&&b.range&&g(N,z),k&&p.selected&&(!T||y.mode==="cell")&&e.handleSelected(z,N)};return{moveTabSelected(N,z,T){const{editConfig:M}=l,{afterFullData:k,visibleColumn:b}=c,p=v.value;let y,O,R;const H=Object.assign({},N),W=e.getVTRowIndex(H.row),q=e.getVTColumnIndex(H.column);T.preventDefault(),z?q<=0?W>0&&(O=W-1,y=k[O],R=b.length-1):R=q-1:q>=b.length-1?W<k.length-1&&(O=W+1,y=k[O],R=0):R=q+1;const ae=b[R];ae&&(y?(H.rowIndex=O,H.row=y):H.rowIndex=W,H.columnIndex=R,H.column=ae,H.cell=e.getCellElement(H.row,H.column),M?(p.trigger==="click"||p.trigger==="dblclick")&&(p.mode==="row"?e.handleEdit(H,T):e.scrollToRow(H.row,H.column).then(()=>e.handleSelected(H,T))):e.scrollToRow(H.row,H.column).then(()=>e.handleSelected(H,T)))},moveCurrentRow(N,z,T){const{treeConfig:M}=l,{currentRow:k}=s,{afterFullData:b}=c,p=X.value,y=p.children||p.childrenField;let O;if(T.preventDefault(),k)if(M){const{index:R,items:H}=i.findTree(b,W=>W===k,{children:y});N&&R>0?O=H[R-1]:z&&R<H.length-1&&(O=H[R+1])}else{const R=e.getVTRowIndex(k);N&&R>0?O=b[R-1]:z&&R<b.length-1&&(O=b[R+1])}else O=b[0];if(O){const R={$table:e,row:O,rowIndex:e.getRowIndex(O),$rowIndex:e.getVMRowIndex(O)};e.scrollToRow(O).then(()=>e.triggerCurrentRowEvent(T,R))}},moveSelected(N,z,T,M,k,b){const{afterFullData:p,visibleColumn:y}=c,O=Object.assign({},N),R=e.getVTRowIndex(O.row),H=e.getVTColumnIndex(O.column);b.preventDefault(),T&&R>0?(O.rowIndex=R-1,O.row=p[O.rowIndex]):k&&R<p.length-1?(O.rowIndex=R+1,O.row=p[O.rowIndex]):z&&H?(O.columnIndex=H-1,O.column=y[O.columnIndex]):M&&H<y.length-1&&(O.columnIndex=H+1,O.column=y[O.columnIndex]),e.scrollToRow(O.row,O.column).then(()=>{O.cell=e.getCellElement(O.row,O.column),e.handleSelected(O,b)})},triggerHeaderCellMousedownEvent(N,z){const{mouseConfig:T}=l,M=S.value;if(T&&M.area&&e.handleHeaderCellAreaEvent){const k=N.currentTarget,b=rt(N,k,"vxe-cell--sort").flag,p=rt(N,k,"vxe-cell--filter").flag;e.handleHeaderCellAreaEvent(N,Object.assign({cell:k,triggerSort:b,triggerFilter:p},z))}e.focus(),e.closeMenu&&e.closeMenu()},triggerCellMousedownEvent(N,z){const T=N.currentTarget;z.cell=T,x(N,z),e.focus(),e.closeFilter(),e.closeMenu&&e.closeMenu()}}}});const{getConfig:Oa,validators:Ma,hooks:Fa}=he;class Yl{constructor(l){Object.assign(this,{$options:l,required:l.required,min:l.min,max:l.max,type:l.type,pattern:l.pattern,validator:l.validator,trigger:l.trigger,maxWidth:l.maxWidth})}get content(){return $o(this.$options.content||this.$options.message)}get message(){return this.content}}const ka=["fullValidate","validate","fullValidateField","validateField","clearValidate"];Fa.add("tableValidatorModule",{setupTable(e){const{props:l,reactData:s,internalData:c}=e,{refValidTooltip:C}=e.getRefMaps(),{computeValidOpts:v,computeTreeOpts:I,computeEditOpts:S}=e.getComputeMaps();let X={},u={},g;const x=T=>new Promise(M=>{v.value.autoPos===!1?(e.dispatchEvent("valid-error",T,null),M()):e.handleEdit(T,{type:"valid-error",trigger:"call"}).then(()=>{M(u.showValidTooltip(T))})}),B=T=>{if(v.value.msgMode==="single"){const k=Object.keys(T),b={};if(k.length){const p=k[0];b[p]=T[p]}return b}return T},N=(T,M,k,b)=>{const p={},{editRules:y,treeConfig:O}=l,{afterFullData:R,visibleColumn:H}=c,W=I.value,q=W.children||W.childrenField,ae=v.value;let ce;T===!0?ce=R:T&&(i.isFunction(T)?k=T:ce=i.isArray(T)?T:[T]),ce||(e.getInsertRecords?ce=e.getInsertRecords().concat(e.getUpdateRecords()):ce=[]);const $=[];c._lastCallTime=Date.now(),g=!1,X.clearValidate();const Q={};if(y){const ue=M&&M.length?M:e.getColumns(),we=me=>{if(b||!g){const Te=[];ue.forEach(A=>{const G=i.isString(A)?A:A.field;(b||!g)&&i.has(y,G)&&Te.push(u.validCellRules("all",me,A).catch(({rule:_,rules:U})=>{const ne={rule:_,rules:U,rowIndex:e.getRowIndex(me),row:me,columnIndex:e.getColumnIndex(A),column:A,field:G,$table:e};if(p[G]||(p[G]=[]),Q[`${re(e,me)}:${A.id}`]={column:A,row:me,rule:_,content:_.content},p[G].push(ne),!b)return g=!0,Promise.reject(ne)}))}),$.push(Promise.all(Te))}};return O?i.eachTree(ce,we,{children:q}):ce.forEach(we),Promise.all($).then(()=>{const me=Object.keys(p);return s.validErrorMaps=B(Q),oe().then(()=>{if(me.length)return Promise.reject(p[me[0]][0]);k&&k()})}).catch(me=>new Promise((Te,A)=>{const G=()=>{oe(()=>{k?(k(p),Te()):Oa().validToReject==="obsolete"?A(p):Te(p)})},_=()=>{me.cell=e.getCellElement(me.row,me.column),wi(me.cell),x(me).then(G)};if(ae.autoPos===!1)G();else{const U=me.row,ne=me.column,j=R.indexOf(U),K=H.indexOf(ne),J=j>0?R[j-1]:U,ee=K>0?H[K-1]:ne;e.scrollToRow(J,ee).then(_)}}))}else s.validErrorMaps={};return oe().then(()=>{k&&k()})};X={fullValidate(T,M){return N(T,null,M,!0)},validate(T,M){return N(T,null,M)},fullValidateField(T,M){const k=(i.isArray(M)?M:M?[M]:[]).map(b=>kt(e,b));return k.length?N(T,k,null,!0):oe()},validateField(T,M){const k=(i.isArray(M)?M:M?[M]:[]).map(b=>kt(e,b));return k.length?N(T,k,null):oe()},clearValidate(T,M){const{validErrorMaps:k}=s,b=C.value,p=v.value,y=i.isArray(T)?T:T?[T]:[],O=(i.isArray(M)?M:M?[M]:[]).map(H=>kt(e,H));let R={};if(b&&b.reactData.visible&&b.close(),p.msgMode==="single")return s.validErrorMaps={},oe();if(y.length&&O.length)R=Object.assign({},k),y.forEach(H=>{O.forEach(W=>{const q=`${re(e,H)}:${W.id}`;R[q]&&delete R[q]})});else if(y.length){const H=y.map(W=>`${re(e,W)}`);i.each(k,(W,q)=>{H.indexOf(q.split(":")[0])>-1&&(R[q]=W)})}else if(O.length){const H=O.map(W=>`${W.id}`);i.each(k,(W,q)=>{H.indexOf(q.split(":")[1])>-1&&(R[q]=W)})}return s.validErrorMaps=R,oe()}};const z=(T,M)=>{const{type:k,min:b,max:p,pattern:y}=T,O=k==="number",R=O?i.toNumber(M):i.getSize(M);return!!(O&&isNaN(M)||!i.eqNull(b)&&R<i.toNumber(b)||!i.eqNull(p)&&R>i.toNumber(p)||y&&!(i.isRegExp(y)?y:new RegExp(y)).test(M))};return u={validCellRules(T,M,k,b){const{editRules:p}=l,{field:y}=k,O=[],R=[];if(y&&p){const H=i.get(p,y);if(H){const W=i.isUndefined(b)?i.get(M,y):b;H.forEach(q=>{const{type:ae,trigger:ce,required:$,validator:Q}=q;if(T==="all"||!ce||T===ce)if(Q){const ue={cellValue:W,rule:q,rules:H,row:M,rowIndex:e.getRowIndex(M),column:k,columnIndex:e.getColumnIndex(k),field:k.field,$table:e,$grid:e.xegrid};let we;if(i.isString(Q)){const me=Ma.get(Q);if(me){const Te=me.tableCellValidatorMethod||me.cellValidatorMethod;Te&&(we=Te(ue))}}else we=Q(ue);we&&(i.isError(we)?(g=!0,O.push(new Yl({type:"custom",trigger:ce,content:we.message,rule:new Yl(q)}))):we.catch&&R.push(we.catch(me=>{g=!0,O.push(new Yl({type:"custom",trigger:ce,content:me&&me.message?me.message:q.content||q.message,rule:new Yl(q)}))})))}else{const ue=ae==="array",we=i.isArray(W);let me=!0;ue||we?me=!we||!W.length:i.isString(W)?me=Vo(W.trim()):me=Vo(W),($?me||z(q,W):!me&&z(q,W))&&(g=!0,O.push(new Yl(q)))}})}}return Promise.all(R).then(()=>{if(O.length){const H={rules:O,rule:O[0]};return Promise.reject(H)}})},hasCellRules(T,M,k){const{editRules:b}=l,{field:p}=k;if(p&&b){const y=i.get(b,p);return y&&!!i.find(y,O=>T==="all"||!O.trigger||T===O.trigger)}return!1},triggerValidate(T){const{editConfig:M,editRules:k}=l,{editStore:b}=s,{actived:p}=b,y=S.value,O=v.value;if(k&&O.msgMode==="single"&&(s.validErrorMaps={}),M&&k&&p.row){const{row:R,column:H,cell:W}=p.args;if(u.hasCellRules(T,R,H))return u.validCellRules(T,R,H).then(()=>{y.mode==="row"&&X.clearValidate(R,H)}).catch(({rule:q})=>{if(!q.trigger||T===q.trigger){const ae={rule:q,row:R,column:H,cell:W};return u.showValidTooltip(ae),Promise.reject(ae)}return Promise.resolve()})}return Promise.resolve()},showValidTooltip(T){const{height:M}=l,{tableData:k,validStore:b,validErrorMaps:p}=s,{rule:y,row:O,column:R,cell:H}=T,W=v.value,q=C.value,ae=y.content;return b.visible=!0,W.msgMode==="single"?s.validErrorMaps={[`${re(e,O)}:${R.id}`]:{column:R,row:O,rule:y,content:ae}}:s.validErrorMaps=Object.assign({},p,{[`${re(e,O)}:${R.id}`]:{column:R,row:O,rule:y,content:ae}}),e.dispatchEvent("valid-error",T,null),q&&q&&(W.message==="tooltip"||W.message==="default"&&!M&&k.length<2)?q.open(H,ae):oe()}},Object.assign(Object.assign({},X),u)},setupGrid(e){return e.extendTableMethods(ka)}});const Ia=["openCustom","closeCustom","saveCustom","cancelCustom","resetCustom","toggleCustomAllCheckbox","setCustomAllCheckbox"];he.hooks.add("tableCustomModule",{setupTable(e){const{reactData:l,internalData:s}=e,{computeCustomOpts:c}=e.getComputeMaps(),{refElem:C}=e.getRefMaps(),v=e.xegrid,I=()=>{const{customStore:M}=l,k=C.value;let b=0;k&&(b=k.clientHeight-28),M.maxHeight=Math.max(88,b)},S=()=>{const{initStore:M,customStore:k}=l,{collectColumn:b}=s,p={},y={},O={};return i.eachTree(b,R=>{const H=R.getKey();R.renderFixed=R.fixed,R.renderVisible=R.visible,R.renderResizeWidth=R.renderWidth,p[H]=R.renderSortNumber,y[H]=R.fixed,O[H]=R.visible},{children:"children"}),k.oldSortMaps=p,k.oldFixedMaps=y,k.oldVisibleMaps=O,l.customColumnList=b.slice(0),k.visible=!0,M.custom=!0,N(),I(),oe().then(()=>I())},X=()=>{const{customStore:M}=l,k=c.value;return M.visible&&(M.visible=!1,k.immediate||e.handleCustom()),oe()},u=()=>{const{customColumnList:M}=l,k=c.value,{allowVisible:b,allowSort:p,allowFixed:y,allowResizable:O}=k;return i.eachTree(M,(R,H,W,q,ae)=>{if(ae)R.fixed=ae.fixed;else{if(p){const ce=H+1;R.renderSortNumber=ce}y&&(R.fixed=R.renderFixed)}O&&R.renderVisible&&(!R.children||R.children.length)&&R.renderResizeWidth!==R.renderWidth&&(R.resizeWidth=R.renderResizeWidth,R.renderWidth=R.renderResizeWidth),b&&(R.visible=R.renderVisible)}),e.saveCustomStore("confirm")},g=()=>{const{customColumnList:M,customStore:k}=l,{oldSortMaps:b,oldFixedMaps:p,oldVisibleMaps:y}=k,O=c.value,{allowVisible:R,allowSort:H,allowFixed:W,allowResizable:q}=O;return i.eachTree(M,ae=>{const ce=ae.getKey(),$=!!y[ce],Q=p[ce]||"";R&&(ae.renderVisible=$,ae.visible=$),W&&(ae.renderFixed=Q,ae.fixed=Q),H&&(ae.renderSortNumber=b[ce]||0),q&&(ae.renderResizeWidth=ae.renderWidth)},{children:"children"}),oe()},x=M=>{const{customStore:k}=l,{customColumnList:b}=l,p=c.value,{checkMethod:y,visibleMethod:O}=p,R=!!M;return p.immediate?(i.eachTree(b,H=>{O&&!O({column:H})||y&&!y({column:H})||(H.visible=R,H.renderVisible=R,H.halfVisible=!1)}),k.isAll=R,e.handleCustom(),e.saveCustomStore("update:visible")):(i.eachTree(b,H=>{O&&!O({column:H})||y&&!y({column:H})||(H.renderVisible=R,H.halfVisible=!1)}),k.isAll=R),e.checkCustomStatus(),oe()},B={openCustom:S,closeCustom:X,saveCustom:u,cancelCustom:g,resetCustom(M){const{collectColumn:k}=s,b=c.value,{checkMethod:p}=b,y=Object.assign({visible:!0,resizable:M===!0,fixed:M===!0,sort:M===!0},M);return i.eachTree(k,O=>{y.resizable&&(O.resizeWidth=0),y.fixed&&(O.fixed=O.defaultFixed),y.sort&&(O.renderSortNumber=O.sortNumber),(!p||p({column:O}))&&(O.visible=O.defaultVisible),O.renderResizeWidth=O.renderWidth}),e.saveCustomStore("reset"),e.handleCustom()},toggleCustomAllCheckbox(){const{customStore:M}=l,k=!M.isAll;return x(k)},setCustomAllCheckbox:x},N=()=>{const{customStore:M}=l,{collectColumn:k}=s,b=c.value,{checkMethod:p}=b;M.isAll=k.every(y=>(p?!p({column:y}):!1)||y.renderVisible),M.isIndeterminate=!M.isAll&&k.some(y=>(!p||p({column:y}))&&(y.renderVisible||y.halfVisible))},z=(M,k)=>{(v||e).dispatchEvent("custom",{type:M},k)},T={checkCustomStatus:N,emitCustomEvent:z,triggerCustomEvent(M){const{customStore:k}=e.reactData;k.visible?(X(),z("close",M)):(k.btnEl=M.target,S(),z("open",M))},customOpenEvent(M){const{customStore:k}=l;k.visible||(k.activeBtn=!0,k.btnEl=M.target,e.openCustom(),e.emitCustomEvent("open",M))},customCloseEvent(M){const{customStore:k}=l;k.visible&&(k.activeBtn=!1,e.closeCustom(),e.emitCustomEvent("close",M))}};return Object.assign(Object.assign({},B),T)},setupGrid(e){return e.extendTableMethods(Ia)}});const{getConfig:os,renderer:Da,getI18n:Ta}=he,Ir="modelValue",Dr={};function Aa(e,l){return e&&l.valueFormat?i.toStringDate(e,l.valueFormat):e}function La(e,l,s){const{dateConfig:c={}}=l;return i.toDateString(Aa(e,l),c.labelFormat||s)}function ls(e,l){return La(e,l,Ta(`vxe.input.date.labelFormat.${l.type||"date"}`))}function Ha(e){return`vxe-${e.replace("$","")}`}function go({name:e}){return us(e)}function Rn({name:e}){return us(Ha(e))}function Tr(e,l,s){const{$panel:c}=e;c.changeOption({},l,s)}function Sn(e){let{name:l,attrs:s}=e;return l==="input"&&(s=Object.assign({type:"text"},s)),s}function Ar(e){const{name:l,immediate:s,props:c}=e;if(!s){if(l==="VxeInput"||l==="$input"){const{type:C}=c||{};return!(!C||C==="text"||C==="number"||C==="integer"||C==="float")}return!(l==="input"||l==="textarea"||l==="$textarea")}return s}function jo(e,l,s,c){return i.assign({immediate:Ar(e)},Dr,c,e.props,{[Ir]:s})}function wn(e,l,s,c){return i.assign({},Dr,c,e.props,{[Ir]:s})}function On(e,l){return l.$type==="cell"||Ar(e)}function Ro(e,l,s){const{placeholder:c}=e;return[f("span",{class:"vxe-cell--label"},c&&fr(s)?[f("span",{class:"vxe-cell--placeholder"},It($o(c),1))]:It(s,1))]}function Lr(e,l,s,c){const{events:C}=e,v=Sr(e),I=Or(e),S=I===v,X={};return C&&i.objectEach(C,(u,g)=>{X[Il(g)]=function(...x){u(l,...x)}}),s&&(X[Il(v)]=function(u){s(u),S&&c&&c(u),C&&C[v]&&C[v](l,u)}),!S&&c&&(X[Il(I)]=function(...u){c(...u),C&&C[I]&&C[I](l,...u)}),X}function Gl(e,l,s,c){const{events:C}=e,v=Sr(e),I=Or(e),S={};return i.objectEach(C,(X,u)=>{S[Il(u)]=function(...g){X(l,...g)}}),s&&(S[Il(v)]=function(X){s(X),C&&C[v]&&C[v](l,X)}),c&&(S[Il(I)]=function(...X){c(...X),C&&C[I]&&C[I](l,...X)}),S}function No(e,l){const{$table:s,row:c,column:C}=l,{name:v}=e,{model:I}=C,S=On(e,l);return Gl(e,l,X=>{I.update=!0,I.value=X,S&&So(c,C,X)},X=>{if(!S&&["VxeInput","VxeNumberInput","VxeTextarea","$input","$textarea"].includes(v)){const u=X.value;I.update=!0,I.value=u,s.updateStatus(l,u)}else s.updateStatus(l)})}function En(e,l,s){return Gl(e,l,c=>{s.data=c},()=>{Tr(l,!i.eqNull(s.data),s)})}function Hr(e,l){const{$table:s,row:c,column:C}=l,{model:v}=C;return Lr(e,l,I=>{const S=I.target.value;On(e,l)?So(c,C,S):(v.update=!0,v.value=S)},I=>{const S=I.target.value;s.updateStatus(l,S)})}function Br(e,l,s){return Lr(e,l,c=>{s.data=c.target.value},()=>{Tr(l,!i.eqNull(s.data),s)})}function ns(e,l){const{row:s,column:c}=l,{name:C}=e,v=On(e,l)?Bt(s,c):c.model.value;return[f(C,Object.assign(Object.assign(Object.assign({class:`vxe-default-${C}`},Sn(e)),{value:v}),Hr(e,l)))]}function Ba(e,l){return[f(go(e),Object.assign(Object.assign({},jo(e,l,null)),Gl(e,l)))]}function Xt(e,l){const{row:s,column:c}=l,C=Bt(s,c);return[f(go(e),Object.assign(Object.assign({},jo(e,l,C)),No(e,l)))]}function nr(e,l){const{options:s}=e,{row:c,column:C}=l,v=Bt(c,C);return[f(go(e),Object.assign(Object.assign({options:s},jo(e,l,v)),No(e,l)))]}function gn(e,l){const{row:s,column:c}=l,C=Bt(s,c);return[f(Rn(e),Object.assign(Object.assign({},jo(e,l,C)),No(e,l)))]}function Vr(e,l){return[f(us("vxe-button"),Object.assign(Object.assign({},jo(e,l,null)),Gl(e,l)))]}function Va(e,l){return e.children.map(s=>Vr(s,l)[0])}function Nr(e,l,s){const{optionGroups:c,optionGroupProps:C={}}=e,v=C.options||"options",I=C.label||"label";return c.map((S,X)=>f("optgroup",{key:X,label:S[I]},s(S[v],e,l)))}function yn(e,l,s){const{optionProps:c={}}=l,{row:C,column:v}=s,I=c.label||"label",S=c.value||"value",X=c.disabled||"disabled",u=On(l,s)?Bt(C,v):v.model.value;return e.map((g,x)=>f("option",{key:x,value:g[S],disabled:g[X],selected:g[S]==u},g[I]))}function Na(e,l){const{column:s}=l,{name:c}=e,C=Sn(e);return s.filters.map((v,I)=>f(c,Object.assign(Object.assign(Object.assign({key:I,class:`vxe-default-${c}`},C),{value:v.data}),Br(e,l,v))))}function ss(e,l){const{column:s}=l;return s.filters.map((c,C)=>{const v=c.data;return f(go(e),Object.assign(Object.assign({key:C},wn(e,e,v)),En(e,l,c)))})}function $a(e,l){const{column:s}=l;return s.filters.map((c,C)=>{const v=c.data;return f(Rn(e),Object.assign(Object.assign({key:C},wn(e,e,v)),En(e,l,c)))})}function mn({option:e,row:l,column:s}){const{data:c}=e;return i.get(l,s.field)==c}function bn({option:e,row:l,column:s}){const{data:c}=e,C=i.get(l,s.field);return i.toValueString(C).indexOf(c)>-1}function sr(e,l){return[f("select",Object.assign(Object.assign({class:"vxe-default-select"},Sn(e)),Hr(e,l)),e.optionGroups?Nr(e,l,yn):yn(e.options,e,l))]}function rr(e,l){const{row:s,column:c}=l,{options:C,optionProps:v,optionGroups:I,optionGroupProps:S}=e,X=Bt(s,c);return[f(go(e),Object.assign(Object.assign({},jo(e,l,X,{options:C,optionProps:v,optionGroups:I,optionGroupProps:S})),No(e,l)))]}function ir(e,l){const{row:s,column:c}=l,{options:C,optionProps:v}=e,I=Bt(s,c);return[f(go(e),Object.assign(Object.assign({},jo(e,l,I,{options:C,optionProps:v})),No(e,l)))]}function ar(e,l){const{row:s,column:c}=l,{options:C,optionProps:v,optionGroups:I,optionGroupProps:S}=e,X=Bt(s,c);return[f(Rn(e),Object.assign(Object.assign({},jo(e,l,X,{options:C,optionProps:v,optionGroups:I,optionGroupProps:S})),No(e,l)))]}function Cn(e,{row:l,column:s}){const{options:c,optionGroups:C,optionProps:v={},optionGroupProps:I={}}=e,S=i.get(l,s.field);let X;const u=v.label||"label",g=v.value||"value";return S!=null?i.map(i.isArray(S)?S:[S],C?x=>{const B=I.options||"options";for(let N=0;N<C.length&&(X=i.find(C[N][B],z=>z[g]==x),!X);N++);return X?X[u]:x}:x=>(X=i.find(c,B=>B[g]==x),X?X[u]:x)).join(", "):""}function rs(e){const{row:l,column:s,options:c}=e;return c.original?Bt(l,s):Cn(s.editRender||s.cellRender,e)}function ds(e,{row:l,column:s}){const{options:c,optionProps:C={}}=e,v=i.get(l,s.field),I=C.label||"label",S=C.value||"value",X=C.children||"children";if(v!=null){const u={};return i.eachTree(c,g=>{u[i.get(g,S)]=g},{children:X}),i.map(i.isArray(v)?v:[v],g=>{const x=u[g];return x&&i.get(x,I)}).join(", ")}return""}function cr(e){const{row:l,column:s,options:c}=e;return c.original?Bt(l,s):ds(s.editRender||s.cellRender,e)}Da.mixin({input:{tableAutoFocus:"input",renderTableEdit:ns,renderTableDefault:ns,renderTableFilter:Na,tableFilterDefaultMethod:bn},textarea:{tableAutoFocus:"textarea",renderTableEdit:ns},select:{renderTableEdit:sr,renderTableDefault:sr,renderTableCell(e,l){return Ro(e,l,Cn(e,l))},renderTableFilter(e,l){const{column:s}=l;return s.filters.map((c,C)=>f("select",Object.assign(Object.assign({key:C,class:"vxe-default-select"},Sn(e)),Br(e,l,c)),e.optionGroups?Nr(e,l,yn):yn(e.options,e,l)))},tableFilterDefaultMethod:mn,tableExportMethod:rs},VxeInput:{tableAutoFocus:"input",renderTableEdit:Xt,renderTableCell(e,l){var s;const{props:c={}}=e,{row:C,column:v}=l,I=c.digits||((s=os().input)===null||s===void 0?void 0:s.digits)||2;let S=i.get(C,v.field);if(S)switch(c.type){case"date":case"week":case"month":case"quarter":case"year":S=ls(S,c);break;case"float":S=i.toFixed(i.floor(S,I),I);break}return Ro(e,l,S)},renderTableDefault:Xt,renderTableFilter:ss,tableFilterDefaultMethod:bn},VxeNumberInput:{tableAutoFocus:"input",renderTableEdit:Xt,renderTableCell(e,l){var s;const{props:c={}}=e,{row:C,column:v}=l,I=c.digits||((s=os().numberInput)===null||s===void 0?void 0:s.digits)||2;let S=i.get(C,v.field);if(S)switch(c.type){case"float":S=i.toFixed(i.floor(S,I),I);break}return Ro(e,l,S)},renderTableDefault:Xt,renderTableFilter:ss,tableFilterDefaultMethod:bn},VxeDatePicker:{tableAutoFocus:"input",renderTableEdit:Xt,renderTableCell(e,l){const{props:s={}}=e,{row:c,column:C}=l;let v=i.get(c,C.field);return v&&(v=ls(v,s)),Ro(e,l,v)},renderTableDefault:Xt,renderTableFilter:ss,tableFilterDefaultMethod:mn},VxeTextarea:{tableAutoFocus:"textarea",renderTableEdit:Xt,renderTableCell(e,l){const{row:s,column:c}=l,C=i.get(s,c.field);return Ro(e,l,C)}},VxeButton:{renderTableDefault:Ba},VxeButtonGroup:{renderTableDefault(e,l){const{options:s}=e;return[f(go(e),Object.assign(Object.assign({options:s},jo(e,l,null)),Gl(e,l)))]}},VxeSelect:{tableAutoFocus:"input",renderTableEdit:rr,renderTableDefault:rr,renderTableCell(e,l){return Ro(e,l,Cn(e,l))},renderTableFilter(e,l){const{column:s}=l,{options:c,optionProps:C,optionGroups:v,optionGroupProps:I}=e;return s.filters.map((S,X)=>{const u=S.data;return f(go(e),Object.assign(Object.assign({key:X},wn(e,l,u,{options:c,optionProps:C,optionGroups:v,optionGroupProps:I})),En(e,l,S)))})},tableFilterDefaultMethod:mn,tableExportMethod:rs},VxeTreeSelect:{tableAutoFocus:"input",renderTableEdit:ir,renderTableCell(e,l){return Ro(e,l,ds(e,l))},tableExportMethod:cr},VxeTableSelect:{tableAutoFocus:"input",renderTableEdit:ir,renderTableCell(e,l){return Ro(e,l,ds(e,l))},tableExportMethod:cr},VxeIconPicker:{tableAutoFocus:"input",renderTableEdit:Xt,renderTableCell(e,l){const{row:s,column:c}=l,C=i.get(s,c.field);return f("i",{class:C})}},VxeRadioGroup:{renderTableDefault:nr},VxeCheckboxGroup:{renderTableDefault:nr},VxeSwitch:{tableAutoFocus:"button",renderTableEdit:Xt,renderTableDefault:Xt},VxeUpload:{renderTableEdit:Xt,renderTableCell:Xt,renderTableDefault:Xt},VxeImage:{renderTableDefault(e,l){const{row:s,column:c}=l,{props:C}=e,v=Bt(s,c);return[f(go(e),Object.assign(Object.assign(Object.assign({},C),{src:v}),No(e,l)))]}},VxeImageGroup:{renderTableDefault(e,l){const{row:s,column:c}=l,{props:C}=e,v=Bt(s,c);return[f(go(e),Object.assign(Object.assign(Object.assign({},C),{urlList:v}),No(e,l)))]}},VxeTextEllipsis:{renderTableDefault(e,l){const{row:s,column:c}=l,{props:C}=e,v=Bt(s,c);return[f(go(e),Object.assign(Object.assign(Object.assign({},C),{content:v}),No(e,l)))]}},VxeRate:{renderTableDefault:Xt},VxeSlider:{renderTableDefault:Xt},$input:{tableAutoFocus:".vxe-input--inner",renderTableEdit:gn,renderTableCell(e,l){var s;const{props:c={}}=e,{row:C,column:v}=l,I=c.digits||((s=os().input)===null||s===void 0?void 0:s.digits)||2;let S=i.get(C,v.field);if(S)switch(c.type){case"date":case"week":case"month":case"year":S=ls(S,c);break;case"float":S=i.toFixed(i.floor(S,I),I);break}return Ro(e,l,S)},renderTableDefault:gn,renderTableFilter:$a,tableFilterDefaultMethod:bn},$textarea:{tableAutoFocus:".vxe-textarea--inner"},$button:{renderTableDefault:Vr},$buttons:{renderTableDefault:Va},$select:{tableAutoFocus:".vxe-input--inner",renderTableEdit:ar,renderTableDefault:ar,renderTableCell(e,l){return Ro(e,l,Cn(e,l))},renderTableFilter(e,l){const{column:s}=l,{options:c,optionProps:C,optionGroups:v,optionGroupProps:I}=e;return s.filters.map((S,X)=>{const u=S.data;return f(Rn(e),Object.assign(Object.assign({key:X},wn(e,l,u,{options:c,optionProps:C,optionGroups:v,optionGroupProps:I})),En(e,l,S)))})},tableFilterDefaultMethod:mn,tableExportMethod:rs},$radio:{tableAutoFocus:".vxe-radio--input"},$checkbox:{tableAutoFocus:".vxe-checkbox--input"},$switch:{tableAutoFocus:".vxe-switch--button",renderTableEdit:gn,renderTableDefault:gn}});const qa=Object.assign({},Dl,{install(e){e.component(Dl.name,Dl)}}),ja={useCellView:ea};he.dynamicApp&&he.dynamicApp.component(Dl.name,Dl);he.component(Dl);he.tableHandle=ja;const $r={colId:[String,Number],type:String,field:String,title:String,width:[Number,String],minWidth:[Number,String],maxWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,footerAlign:String,showOverflow:{type:[Boolean,String],default:null},showHeaderOverflow:{type:[Boolean,String],default:null},showFooterOverflow:{type:[Boolean,String],default:null},className:[String,Function],headerClassName:[String,Function],footerClassName:[String,Function],formatter:[Function,Array,String],footerFormatter:[Function,Array,String],sortable:Boolean,sortBy:[String,Function],sortType:String,filters:{type:Array,default:null},filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filterResetMethod:Function,filterRecoverMethod:Function,filterRender:Object,treeNode:Boolean,dragSort:Boolean,visible:{type:Boolean,default:null},headerExportMethod:Function,exportMethod:Function,footerExportMethod:Function,titleHelp:Object,titlePrefix:Object,titleSuffix:Object,cellType:String,cellRender:Object,editRender:Object,contentRender:Object,params:Object},Jo=mo({name:"VxeColumn",props:$r,setup(e,{slots:l}){const s=He(),c=_t("$xeTable",null),C=_t("$xeColgroup",null);if(!c)return()=>Le();const v=Ve.createColumn(c,e);v.slots=l;const I=()=>f("div",{ref:s}),S={columnConfig:v,renderVN:I};return wr(c,e,v),Al(()=>{const X=s.value;X&&Er(c,X,v,C)}),Ll(()=>{yr(c,v)}),Tl("$xeColumn",S),Tl("$xeGrid",null),I}}),el=mo({name:"VxeColgroup",props:$r,setup(e,{slots:l}){const s=He(),c=_t("$xeTable",null),C=_t("$xeColgroup",null);if(!c)return()=>Le();const v=Ve.createColumn(c,e),I={};l.header&&(I.header=l.header),v.slots=I,v.children=[],wr(c,e,v),Al(()=>{const u=s.value;u&&Er(c,u,v,C)}),Ll(()=>{yr(c,v)});const S=()=>f("div",{ref:s},l.default?l.default():[]);return Tl("$xeColgroup",{columnConfig:v}),Tl("$xeGrid",null),S}}),Ua=Object.assign({},el,{install(e){e.component(el.name,el),e.component("VxeTableColgroup",el)}});he.dynamicApp&&(he.dynamicApp.component(el.name,el),he.dynamicApp.component("VxeTableColgroup",el));he.component(el);const Ga=Object.assign({},Jo,{install(e){e.component(Jo.name,Jo),e.component("VxeTableColumn",Jo)}});he.dynamicApp&&(he.dynamicApp.component(Jo.name,Jo),he.dynamicApp.component("VxeTableColumn",Jo));he.component(Jo);export{qa as V,Ga as a,Ua as b};
