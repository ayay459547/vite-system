import{Z as aa,v as Ft,A as na,y as oa,_ as sa}from"./vendor-element-plus.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{v as bt,w as $t,c as ia}from"./vendor-@vue/runtime-dom.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{_ as la,a as Ot,u as ra,b as ua,C as da}from"./CustomTable.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{g as et,h as qe,_ as it,f as pe,B as ca,D as pa,n as J,E as Ut,C as Ke,G as fa,d as Z,H as yt,I as Tt,J as Wt,K as va,c as Ht,L as ma,e as wt,M as ga,N as ba,O as ya,P as Dt,Q as jt,V as ha,R as gt,S as wa,T as ft,U as _a,W as ka,X as Ca,Y as Sa,a as Yt,m as Nt,u as xa,Z as $a}from"./index.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{b as Ta}from"./vendor-vxe-table.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{d as Ee,b as ae,aF as ut,O as he,o as m,R as lt,aN as r,r as O,c as S,a,g as _,F as re,T as Da,P as ye,i as Ne,n as ke,as as Va,ae as Re,aq as be,a1 as Qe,aP as Ze,f as Ia,s as rt,ag as La,U as Ue,ar as Ma}from"./vendor-@vue/runtime-core.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{x,y as e,l as Pa,j as Xe,u as Ra}from"./vendor-@vue/reactivity.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{F as Be,W as Je,X as W,G as st}from"./vendor-@vue/shared.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{_ as kt}from"./CustomPopover.vue_vue_type_script_setup_true_lang.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{_ as Oe}from"./vendor-vue-qr.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{_ as Vt}from"./CustomScrollbar.vue_vue_type_script_setup_true_lang.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-sweetalert2.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-crypto-js.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-js-cookie.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@fortawesome/vue-fontawesome.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-vuedraggable.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-exceljs.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{E as Fa}from"./vendor-jspdf.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{a as Aa}from"./vendor-jspdf-autotable.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{d as _t}from"./vendor-dayjs.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-vxe-pc-ui.v2025-11-12.1.production.2025-11-14_09.15.33.js";import za from"./CustomDraggable.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{d as Ea,s as qa}from"./vendor-pinia.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{u as Oa,F as Ua}from"./FormList.v2025-11-12.1.production.2025-11-14_09.15.33.js";import{t as Gt}from"./vendor-lodash-es.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@element-plus/icons-vue.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@ctrl/tinycolor.v2025-11-12.1.production.2025-11-14_09.15.33.js";/* empty css                                                                  */import"./vendor-async-validator.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-normalize-wheel-es.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-memoize-one.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@dagrejs/dagre.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@codemirror/language-data.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-idb.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-uuid.v2025-11-12.1.production.2025-11-14_09.15.33.js";/* empty css                                                                */import"./vendor-@vueuse/shared.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-vue-i18n.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@intlify/core-base.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@intlify/shared.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-vue.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@vue/compiler-dom.v2025-11-12.1.production.2025-11-14_09.15.33.js";/* empty css                                                                      */import"./vendor-axios.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-vue-router.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-ifvisible.js.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-interactjs.v2025-11-12.1.production.2025-11-14_09.15.33.js";/* empty css                                                                */import"./vendor-xe-utils.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-dom-zindex.v2025-11-12.1.production.2025-11-14_09.15.33.js";/* empty css                                                                *//* empty css                                                                  *//* empty css                                                                      *//* empty css                                                                     *//* empty css                                                                          *//* empty css                                                                                     */import"./vendor-@fortawesome/free-solid-svg-icons.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@fortawesome/free-regular-svg-icons.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@fortawesome/free-brands-svg-icons.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@vueuse/components.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-js-binary-schema-parser.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-sortablejs.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-@babel/runtime.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-fflate.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-fast-png.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-iobuffer.v2025-11-12.1.production.2025-11-14_09.15.33.js";import"./vendor-pako.v2025-11-12.1.production.2025-11-14_09.15.33.js";const Ba=Ea("CustomSearch",()=>{const g=x(new Set),b=v=>{g.value.clear(),g.value.add(v)},l=v=>g.value.delete(v);return setTimeout(()=>{g.value.clear()},0),{activeScopedIdSet:g,setActiveScopedId:b,removeActiveScopedId:l}}),Ka="__CustomSwitch_1.0.0__",Wa={modelValue:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:""},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,required:!1,default:!1,description:"無論圖示或文字是否顯示在點內，只會呈現文字的第一個字符"},activeIcon:{type:[String,Object],required:!1,default:void 0,description:"switch 狀態為 on 時所顯示圖標，設定此項目會忽略 active-text"},inactiveIcon:{type:[String,Object],required:!1,default:void 0,description:"switch 狀態為 off 時所顯示圖標，設定此項目會忽略 inactive-text"},activeActionIcon:{type:[String,Object],required:!1,default:void 0,description:"on狀態下顯示的圖示組件"},inactiveActionIcon:{type:[String,Object],required:!1,default:void 0,description:"off狀態下顯示的圖示組件"},activeText:{type:String,required:!1,default:"",description:"switch 狀態為 on 時的值的文字描述"},inactiveText:{type:String,required:!1,default:"",description:"switch 狀態為 off 時的值的文字描述"},activeValue:{type:[Boolean,String,Number],required:!1,default:!0,description:"switch 狀態為 on 時的值"},inactiveValue:{type:[Boolean,String,Number],required:!1,default:!1,description:"switch的狀態為 off 時的值"},name:{type:String,required:!1,default:"",description:"switch 對應的 name 屬性"},validateEvent:{type:Boolean,required:!1,default:!1,description:"輸入時是否觸發表單的驗證"},beforeChange:{type:[Boolean,Function],required:!1,default:void 0,description:"switch 狀態改變前的鉤子， 返回 false 或返回 Promise 且被 reject 則停止切換"},id:{type:String,required:!1,default:void 0,description:"input 的 id"},tabindex:{type:[String,Number],required:!1,default:void 0,description:"input 的 tabindex"},ariaLabel:{type:String,required:!1,default:void 0,description:"等價於原生 input aria-label 屬性 (a11y)"}},Ha=Ee({__name:"CustomSwitch",props:Wa,emits:["update:model-value","change"],setup(g,{emit:b}){const l=et(Ka),v=g,t=ae({get:()=>(v==null?void 0:v.modelValue)??!1,set:k=>o("update:model-value",k)}),o=b,i=k=>{o("change",k)},f=ut(),u=k=>qe(f,k);return(k,z)=>(m(),he(e(aa),{class:Be(e(l)),modelValue:t.value,"onUpdate:modelValue":z[0]||(z[0]=Y=>t.value=Y),disabled:v.disabled,loading:v.loading,size:v.size,width:v.width,"inline-prompt":v.inlinePrompt,"active-icon":v.activeIcon,"inactive-icon":v.inactiveIcon,"active-action-icon":v.activeActionIcon,"inactive-action-icon":v.inactiveActionIcon,"active-text":v.activeText,"inactive-text":v.inactiveText,"active-value":v.activeValue,"inactive-value":v.inactiveValue,name:v.name,"validate-event":v.validateEvent,"before-change":v.beforeChange,id:v.id,tabindex:v.tabindex,"aria-label":v.ariaLabel,onChange:i},lt({_:2},[u("active-action")?{name:"active-action",fn:r(()=>[O(k.$slots,"active-action",{},void 0,!0)]),key:"0"}:void 0,u("inactive-action")?{name:"inactive-action",fn:r(()=>[O(k.$slots,"inactive-action",{},void 0,!0)]),key:"1"}:void 0]),1032,["class","modelValue","disabled","loading","size","width","inline-prompt","active-icon","inactive-icon","active-action-icon","inactive-action-icon","active-text","inactive-text","active-value","inactive-value","name","validate-event","before-change","id","tabindex","aria-label"]))}}),ja=Oe(Ha,[["__scopeId","data-v-ef760037"]]),Ya={class:"__search-container"},Na={class:"__search-top"},Ga={key:1},Qa={class:"__search-detail"},Ja={class:"__search-top"},Xa=Ee({__name:"SearchContainer",props:{isDot:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1},isActiveConditions:{type:Boolean,default:!1},isCondition:{type:Boolean,required:!1,default:!1,description:"是否為條件搜尋"},width:{type:[String,Number],required:!1,default:300,description:"寬度"},placement:{type:String,required:!1,default:"bottom",description:"出現位置"},search:{type:Boolean,required:!1,default:!1,description:"是否只顯示搜尋按鈕"}},emits:["visible-change"],setup(g,{emit:b}){const l=g,v=b,t=i=>{v("visible-change",i)},o=ae(()=>l.isCondition?l.isActiveConditions?500:350:300);return(i,f)=>(m(),S("div",Ya,[a("div",Na,[_(it,{placement:"top",trigger:"hover",offset:6,"show-after":600},{content:r(()=>[O(i.$slots,"label",{},void 0,!0)]),default:r(()=>[O(i.$slots,"label",{},void 0,!0)]),_:3}),l.search?(m(),S("div",{key:0,onClick:f[0]||(f[0]=u=>t(!l.isVisible))},[l.isDot?(m(),he(la,{key:0,"is-dot":""},{default:r(()=>[_(pe,{"icon-name":"magnifying-glass",circle:"",text:""})]),_:1})):(m(),he(pe,{key:1,"icon-name":"magnifying-glass",circle:"",text:""}))])):(m(),S("div",Ga,[O(i.$slots,"switch",{},void 0,!0)]))]),l.search?(m(),S(re,{key:0},[_(kt,{visible:l.isVisible,width:o.value,placement:"bottom","popper-class":"__search-popover","popper-style":"max-width: 100vw;"},{reference:r(()=>[...f[2]||(f[2]=[a("div",null,null,-1)])]),default:r(()=>[a("div",Qa,[a("div",Ja,[O(i.$slots,"label",{},void 0,!0),O(i.$slots,"switch",{},void 0,!0)]),O(i.$slots,"input",{},void 0,!0)])]),_:3},8,["visible","width"]),(m(),he(Da,{to:"body"},[l.isVisible?(m(),S("div",{key:0,class:"__search-close",onClick:f[1]||(f[1]=u=>t(!1))})):ye("",!0)]))],64)):O(i.$slots,"input",{key:1},void 0,!0)]))}}),Za=Oe(Xa,[["__scopeId","data-v-87000250"]]),en={class:"__search-label"},tn={class:"__search-detail"},an={class:"__search-input"},nn={style:{width:"fit-content"}},on={class:"i-py-xs"},sn={key:1},ln={key:0,class:"__search-footer"},rn=Ee({__name:"CustomSearch",props:ca,emits:["update:model-value","update:active","update:active-conditions","update:conditions","open","close","focus","clear","blur","change","input","remove-tag","visible-change","select","submit"],setup(g,{expose:b,emit:l}){const v=et(pa),t=g,o=l,i=Ne("useHook"),{i18nTranslate:f,i18nTest:u}=i({i18nModule:t.i18nModule}),k=ae({get:()=>t.modelValue,set:R=>{o("update:model-value",R)}}),z=ae({get:()=>t.active,set(R){ge(!1),o("change",k.value),o("update:active",R)}}),Y=Ba(),{activeScopedIdSet:N}=qa(Y),D=()=>ge(!1),U=()=>{window.addEventListener("resize",D,{once:!0})},y=x(),X=ae({get:()=>{const R=N.value.has(v);return R?U():window.removeEventListener("resize",D),R},set:async R=>{var $;if(R){if(Y.setActiveScopedId(v),await ke(),fe.value)return;($=y.value)==null||$.focus()}else Y.removeActiveScopedId(v)}}),ge=async R=>{await ke(),setTimeout(()=>{o(R?"open":"close"),X.value=R},0)},fe=ae({get:()=>t.activeConditions&&z.value,set:async R=>{X.value=!1,R||o("change",k.value),o("update:active-conditions",R),await ke(),X.value=!0}}),we={conditionType:{label:"條件",i18nLabel:"select-condition",table:{width:150},filter:{type:"select",default:"",validate:[],required:!0,hiddenErrorMessage:!0,hiddenLabel:!0}},filterValue:{label:"查詢值",i18nLabel:"select-condition-value",table:{minWidth:180},filter:{default:"",validate:[],required:!0,hiddenErrorMessage:!0,hiddenLabel:!0}}},Fe=ae(()=>J(t.allowConditions)?Ut:Ut.filter(R=>t.allowConditions.includes(R.value))),G=["IsBlank","NotBlank","IsNull","NotNull"],Ce=ae(()=>{switch((t==null?void 0:t.type)??""){case"year":return"year";case"month":case"monthrange":return"month";case"week":return"week";case"date":case"dates":case"daterange":return"date";case"datetime":case"datetimerange":return"datetime";case"time":case"timerange":return"time";case"text":default:return"text"}}),{columns:ve,forms:ue,validate:Ie,reset:ie,add:ee,remove:Ae}=Oa(we,"filter",[]),T=Gt(()=>{const R=ue.value.reduce(($,Le)=>{const{conditionType:d,filterValue:C}=Le,A=G.includes(d??"");return!J(d)&&(A||!J(C))&&$.push({columnId:t.columnId,condition:d,value:A?"":C}),$},[]);o("update:conditions",yt(R))},200,{leading:!0,trailing:!0}),h=()=>{ue.value.splice(0),ee(),T(),fe.value=!1},L=R=>{ue.value.length>1?(Ae(R),T()):h()},H=()=>{Ie().then(()=>{ee(),T()}).catch(R=>{console.log("CustomSearch addItem: ",R)})},P=async()=>{ie(),Array.isArray(t.conditions)&&!J(t.conditions)&&t.conditions.forEach(R=>{const{condition:$,value:Le}=R;(!J($)||!J(Le))&&ee({conditionType:$,filterValue:Le})}),await ke(),J(ue.value)&&ee()},j=R=>{R&&P()},M=()=>{fe.value&&Ie().then(()=>{T(),o("submit"),ge(!X.value)}).catch(R=>{console.log("CustomSearch submit: ",R)})},de=ae(()=>{if(!z.value)return!1;let R=!1;switch(t.type){case"operator":R=!(Array.isArray(k.value)&&!J(k.value[0])&&!J(k.value[1]));break;default:R=J(k.value);break}return!R||fe.value&&!J(t.conditions)});b({async validate(){return await ke(),{valid:!0}},getDom(){return document.querySelector(`div[class*="${v}"]`)}});const ne=ut(),oe=ae(()=>["prepend","append","prefix","suffix","options","header","footer","label","tag","loading","empty","range","prev","next","prev","next","default"].filter($=>qe(ne,$)));return(R,$)=>{const Le=Va("element-visibility");return m(),he(Za,{isDot:de.value,isVisible:X.value,isActiveConditions:fe.value,isCondition:t.isCondition,width:t.width,placement:t.placement,search:t.search,class:Be(e(v)),onVisibleChange:ge},{label:r(()=>[a("label",en,W(e(u)(t==null?void 0:t.i18nLabel)?e(f)(t.i18nLabel):(t==null?void 0:t.label)??""),1)]),switch:r(()=>[_(ja,{modelValue:z.value,"onUpdate:modelValue":$[0]||($[0]=d=>z.value=d)},null,8,["modelValue"])]),input:r(()=>[a("div",tn,[a("div",an,[_(Ke,Re({ref_key:"CustomInputRef",ref:y},t,{"is-validate":!1,"hidden-error-message":!0,required:!1,label:"","hidden-label":"",onFocus:$[1]||($[1]=d=>o("focus",d)),onClear:$[2]||($[2]=()=>o("clear")),onBlur:$[3]||($[3]=d=>{o("blur",d),fe.value.value||ge(!1)}),onChange:$[4]||($[4]=d=>o("change",d)),onInput:$[5]||($[5]=d=>o("input",d)),onRemoveTag:$[6]||($[6]=d=>o("remove-tag",d)),onVisibleChange:$[7]||($[7]=d=>o("visible-change",d)),onSelect:$[8]||($[8]=d=>o("select",d)),modelValue:k.value,"onUpdate:modelValue":$[9]||($[9]=d=>k.value=d),disabled:!z.value}),lt({_:2},[be(oe.value,d=>({name:d,fn:r(C=>[O(R.$slots,d,Je(Qe(C)),void 0,!0)])}))]),1040,["modelValue","disabled"]),a("div",nn,[_(it,{placement:"top",teleported:!1,showAfter:300,offset:0},{content:r(()=>[a("div",null,W(e(f)("setting-advanced",e(Z))),1)]),default:r(()=>[Ze(_(fa,{modelValue:fe.value,"onUpdate:modelValue":$[10]||($[10]=d=>fe.value=d),disabled:!z.value},null,8,["modelValue","disabled"]),[[bt,t.isCondition]])]),_:1})])]),fe.value&&t.isCondition&&z.value?(m(),S(re,{key:0},[Ze((m(),S("div",on,[_(Ua,{modelValue:e(ue),"onUpdate:modelValue":$[13]||($[13]=d=>Pa(ue)?ue.value=d:null),label:e(f)("setting-advanced",e(Z)),"column-setting":we,"item-key":"__key__","is-create":"","is-remove":"",onAdd:H,onRemove:L},{"header-all":r(({column:d})=>[$[14]||($[14]=a("div",{class:"text-danger i-pr-xs"},"*",-1)),a("div",null,W(e(f)(d.i18nLabel,e(Z))),1)]),"column-conditionType":r(({rowIndex:d})=>[_(Ke,Re({modelValue:e(ue)[d].conditionType,"onUpdate:modelValue":C=>e(ue)[d].conditionType=C},e(ve).conditionType,{options:Fe.value,onChange:$[11]||($[11]=C=>e(T)())}),null,16,["modelValue","onUpdate:modelValue","options"])]),"column-filterValue":r(({rowIndex:d})=>[G.includes(e(ue)[d].conditionType)?(m(),S("div",sn)):(m(),he(Ke,Re({key:0,modelValue:e(ue)[d].filterValue,"onUpdate:modelValue":C=>e(ue)[d].filterValue=C},e(ve).filterValue,{type:Ce.value,onChange:$[12]||($[12]=C=>e(T)())}),null,16,["modelValue","onUpdate:modelValue","type"]))]),_:1},8,["modelValue","label"])])),[[Le,j]]),t.search?(m(),S("div",ln,[_(pe,{label:e(f)("reset",e(Z)),type:"info",plain:"","icon-name":"repeat",onClick:h},null,8,["label"]),_(pe,{label:e(f)("submit",e(Z)),type:"primary",plain:"","icon-name":"check","icon-move":"scale",onClick:M},null,8,["label"])])):ye("",!0)],64)):ye("",!0)])]),_:3},8,["isDot","isVisible","isActiveConditions","isCondition","width","placement","search","class"])}}}),Bt=Oe(rn,[["__scopeId","data-v-3d8e808d"]]),un=async(g,b)=>{const l=`PdfFont_${b}`,t=await(async()=>{const i=qe(Tt,b)?Tt[b]:Tt[Wt];return va(i)})(),o=async i=>{g.addFileToVFS(`${l}-${i}.ttf`,t[i]),g.addFont(`${l}-${i}.ttf`,l,i)};return await o("bold"),await o("normal"),g.setFont(l),l},dn={VITE_API_CUSTOMER:"DEMO"},cn=["id"],pn={class:"meta-info title"},fn={class:"meta-info time"},vn={class:"meta-info page"},mn={class:"meta-info customer"},gn={class:"table-main"},bn=["colspan","rowspan"],yn={class:"table-column-header"},hn={key:0},wn=["colspan","rowspan"],_n={class:"table-column-data"},kn=["colspan","rowspan"],Cn={class:"table-column-data"},Sn={class:"table-main"},xn=["colspan","rowspan"],$n={class:"table-column-header"},Tn=["colspan","rowspan"],Dn={class:"table-column-data"},Vn=Ee({__name:"DownloadPreview",props:{columns:{type:Array,default:()=>[]},title:{type:String},tableData:{type:Array,default:()=>[]},pdfSize:{type:String},orientation:{type:String},curPageIndex:{type:Number},headerRow:{type:Array,default:()=>[]},spanTableData:{type:Array,default:()=>[]},pageCutRowIndexs:{type:Array,default:()=>[]}},emits:["update:pageCutRowIndexs","update:curPageIndex"],setup(g,{expose:b,emit:l}){const t=dn.VITE_API_CUSTOMER,o=x(_t().format("YYYY-MM-DD HH:mm")),i=g,f=l,u=x(!1),k=ae(()=>{if(i.pdfSize==="response")return{width:"fit-content",height:"fit-content","white-space":"nowrap"};const h=(()=>{switch(i.pdfSize){case"A3":return[297,420];case"A4":return[210,297];case"A5":return[148,210];case"B3":return[353,500];case"B4":return[250,353];case"B5":return[176,250];default:throw new Error("Undefine PDF Size.")}})();if(!h)return{};const L=h.map(P=>{const j=X(y(P,"mm","pt"));return y(j,"pt","px")+"px"});return i.orientation==="p"?{width:L[0],height:L[1]}:{width:L[1],height:L[0]}}),z=ae(()=>i.pdfSize==="response"?["height: fit-content","width: fit-content"]:["word-break: break-all","word-wrap: break-word","width: 100%","height: fit-content","max-height: 100%"]),Y=async()=>{D.value=i.tableData.map((h,L)=>({...h,key:L})),U.value=i.tableData.map((h,L)=>({...h,key:L}))};Ia(()=>{Y()}),rt(async()=>{setTimeout(async()=>{await ve()},300)});const N=x(),D=x([]),U=x([]),y=(h,L,H)=>{const P=de=>{switch(de){case"px":return 96;case"pt":return 72;case"mm":return 25.4;default:return 0}},j=P(L),M=P(H);return h/j*M},X=h=>Math.round(h*100)/100,ge=x(),fe=x(),we=x(),Fe=x([]),G=x(),Ce=h=>Fe.value.length===0?{}:{width:`${Fe.value[h]-8}px`},ve=async()=>{console.log("INIT"),u.value=!0,await ke();const h=[0],L=we.value.children,H=Array.from(L),P=fe.value.offsetHeight,j=ge.value.offsetHeight;let M=j;const de=[{tableData:[]}];H.forEach((ne,oe)=>{const{offsetHeight:R,offsetTop:$}=ne,Le=$+R,d=i.spanTableData[oe];Le>M&&(h.push(oe),M=$+(j-P),de.push({tableData:[]})),de.at(-1).tableData.push(d)}),Ie.value=de,setTimeout(async()=>{if(f("update:pageCutRowIndexs",h),f("update:curPageIndex",1),G.value){const ne=G.value.children,oe=Array.from(ne),R=[];oe.forEach($=>{R.push($.offsetWidth)}),Fe.value=R}u.value=!1},500)},ue=async()=>{u.value=!0,await ke(),setTimeout(async()=>{const{offsetWidth:h,offsetHeight:L}=N.value,H=y(h,"px","pt"),P=y(L,"px","pt"),j=()=>i.pdfSize!=="response"?i.pdfSize:[H,P],M=()=>i.pdfSize!=="response"?i.orientation:H>=P?"l":"p",de=j(),ne=M(),oe=new Fa({format:de,orientation:ne,unit:"pt"}),R=await un(oe,Wt),$=i.headerRow.map(I=>I.map(E=>{const{name:Q,colSpan:le,rowSpan:Te}=E;return{content:Q,colSpan:le,rowSpan:Te}})),Le=i.spanTableData.map(I=>I.map(E=>{const{context:Q,colSpan:le,rowSpan:Te}=E;return{content:Q,colSpan:le,rowSpan:Te}}).filter(E=>E.rowSpan>0)),d=y(4,"px","pt"),C=Math.ceil(y(10,"px","pt")),A=y(1,"px","pt");Aa(oe,{margin:24,head:$,styles:{lineWidth:A,lineColor:"rgb(215,215,215)",font:R,textColor:"rgb(0,0,0)",cellPadding:d,fontSize:C},headStyles:{fillColor:"rgb(182, 209, 224)"},body:Le,tableLineWidth:A,tableLineColor:[20,0,0]});const K=`${i.title}.pdf`,q=oe.internal,s=q.pageSize,n=q.pages.length-1,V=s.getWidth(),se=s.getHeight();oe.setFontSize(8);for(let I=1;I<=n;I++){oe.setPage(I),oe.text(i.title??"",24,18),oe.text(o.value,V-24,18,{align:"right"});const E=I+" / "+n;oe.text(E,V/2,se-12,{align:"center"})}console.log("DOC",oe),oe.save(K),u.value=!1},300)},Ie=x([]),ie=x(),ee=x(),Ae=()=>{const{scrollHeight:h,scrollTop:L}=ee.value,H=!Array.isArray(i.pageCutRowIndexs)||i.pageCutRowIndexs.length===0?1:i.pageCutRowIndexs.length,P=h/H,j=Math.floor(L/P)+1;j!==i.curPageIndex&&f("update:curPageIndex",j)},B=h=>{const{scrollHeight:L}=ee.value,H=!Array.isArray(i.pageCutRowIndexs)||i.pageCutRowIndexs.length===0?1:i.pageCutRowIndexs.length,P=L/H;ee.value.scrollTop=P*(h-1)};rt(()=>{ee.value.addEventListener("scroll",Ae,!1)}),La(()=>{ee.value.removeEventListener("scroll",Ae)});const T=h=>{const{colSpan:L,rowSpan:H}=h;return!(L===0&&H===0)};return b({print:ue,initPage:ve,scrollToPage:B}),(h,L)=>{const H=Ft;return m(),S(re,null,[Ze((m(),S("div",{class:"preview-wrapper",ref_key:"previewPageWrapper",ref:ee},[a("div",{class:"preview-container",ref_key:"previewPageContainer",ref:ie},[(m(!0),S(re,null,be(Ie.value,(P,j)=>(m(),S("div",{key:P,class:"preview-page",style:st(k.value),id:`page-${j}`},[a("div",pn,W(g.title),1),a("div",fn,W(o.value),1),a("div",vn,W(`${j+1} / ${Ie.value.length}`),1),a("div",mn,W(e(t)),1),a("div",{class:"preview-table",style:st(z.value)},[a("table",gn,[a("thead",null,[(m(!0),S(re,null,be(g.headerRow,M=>(m(),S("tr",{key:M},[(m(!0),S(re,null,be(M,de=>(m(),S("th",{class:"table-cell header",key:de.key,colspan:de.colSpan,rowspan:de.rowSpan},[a("div",yn,W(de.name),1)],8,bn))),128))]))),128))]),e(J)(P.tableData)?ye("",!0):(m(),S("tbody",hn,[(m(!0),S(re,null,be(P.tableData,(M,de)=>(m(),S("tr",{key:M.key},[de===0?(m(!0),S(re,{key:0},be(M,(ne,oe)=>(m(),S(re,{key:ne.key},[T(ne)?(m(),S("td",{key:0,class:"table-cell",colspan:ne.colSpan,rowspan:ne.rowSpan,style:st(Ce(oe))},[a("div",_n,W(ne.context),1)],12,wn)):ye("",!0)],64))),128)):(m(!0),S(re,{key:1},be(M,ne=>(m(),S(re,{key:ne.key},[T(ne)?(m(),S("td",{key:0,class:"table-cell",colspan:ne.colSpan,rowspan:ne.rowSpan},[a("div",Cn,W(ne.context),1)],8,kn)):ye("",!0)],64))),128))]))),128))]))])],4)],12,cn))),128))],512)])),[[H,u.value]]),a("div",{class:"paper-container hidden",style:st(k.value),ref_key:"paperRef",ref:N},[a("div",{class:"paper-table",style:st(z.value),ref_key:"tableRef",ref:ge},[a("table",Sn,[a("thead",{ref_key:"tableHeaderRef",ref:fe},[(m(!0),S(re,null,be(g.headerRow,P=>(m(),S("tr",{key:P},[(m(!0),S(re,null,be(P,j=>(m(),S("th",{class:"table-cell header",key:j.key,colspan:j.colSpan,rowspan:j.rowSpan},[a("div",$n,W(j.name),1)],8,xn))),128))]))),128))],512),a("tbody",{ref_key:"tableBodyRef",ref:we},[(m(!0),S(re,null,be(g.spanTableData,(P,j)=>(m(),S("tr",{key:P.key,ref_for:!0,ref:M=>(j===0&&(G.value=M),M)},[(m(!0),S(re,null,be(P,M=>(m(),S(re,{key:M.key},[T(M)?(m(),S("td",{key:0,class:"table-cell",colspan:M.colSpan,rowspan:M.rowSpan},[a("div",Dn,W(M.context),1)],8,Tn)):ye("",!0)],64))),128))]))),128))],512)])],4)],4)],64)}}}),In=Oe(Vn,[["__scopeId","data-v-f688185a"]]),Ln={class:"pdf-wrapper"},Mn={class:"pdf-preview"},Pn={class:"pdf-preview-body"},Rn={class:"pdf-side"},Fn={class:"pdf-setting"},An={class:"pdf-setting-item"},zn={class:"item-row title"},En={class:"item-row between"},qn={class:"text-header"},On={class:"button-group"},Un={class:"item-row"},Bn={class:"text-header"},Kn={class:"item-row"},Wn={class:"item-row between"},Hn={class:"text-header"},jn={class:"item-row"},Yn={class:"pdf-setting-item"},Nn={class:"item-row title"},Gn={class:"column-active"},Qn={class:"column-name"},Jn={class:"modal-footer"},Xn={key:0,class:"page-controller"},Zn={class:"page-controller-icon"},eo={class:"page-controller-input"},to={class:"page-controller-icon"},ao=Ee({__name:"DownloadModal",props:{modelValue:{type:Boolean,require:!0},i18nModule:{type:String,required:!1,default:Z,description:"翻譯模組"}},emits:["update:model-value"],setup(g,{expose:b,emit:l}){const v=g,t=Ne("useHook"),{i18nTranslate:o,i18nTest:i}=t({i18nModule:v.i18nModule}),f=l,u=ae({get:()=>v.modelValue,set:d=>f("update:model-value",d)}),k=x([]),z=x(""),Y=x([]),N=x(),D=x(),U=d=>{if(J(d))return"";const{i18nLabel:C,label:A,value:c}=d??{};return i(C)?o(C):A??c},y=x([]),X=()=>{const d=Ae.value,C=D.value.topPropSubTableInfoMap,A=d.map(n=>{const{key:V}=n,se=C.get(V),I=se.columns,E=I.length>1,Q=se.depth;return{key:V,hasChildren:E,baseProps:I,depth:Q}});let c=1;A.forEach(n=>{const V=n.depth;V>c&&(c=V)}),Fe.value=[];for(let n=0;n<c;n++)Fe.value.push([]);const K=Fe.value,q=(n,V)=>{const se=K[V];return n.map(E=>{const{key:Q,children:le,name:Te}=E;if(le.length===0){const xe=c-V,me={name:Te,key:Q,colSpan:1,rowSpan:xe};return se.push(me),1}else{const Se=q(le,V+1),me={name:Te,key:Q,colSpan:Se,rowSpan:1};return se.push(me),Se}}).reduce((E,Q)=>E+Q,0)},s=Ae.value.map(n=>D.value.subTableTree.find(V=>n.key===V.key)).filter(n=>n!==null);q(s,0),y.value.splice(0),k.value.forEach(n=>{let V=1;A.forEach(I=>{if(I.hasChildren){const Q=(n[I.key]??[]).length;Q>V&&(V=Q)}});const se=[];for(let I=0;I<V;I++)se.push([]);se.forEach((I,E)=>{A.forEach(Q=>{const{key:le,hasChildren:Te,baseProps:Se}=Q;if(Te)Se.forEach(xe=>{const me=n[le];if(E>=me.length)I.push({key:le,context:"",colSpan:1,rowSpan:1});else{const ze=n[le][E],We=D.value.getSubDisplayData(n,ze,xe)??"";I.push({key:le,context:We,colSpan:1,rowSpan:1})}});else if(E===0){const xe=n[le]??"",me=1,ze=V;I.push({key:le,context:xe,colSpan:me,rowSpan:ze})}else I.push({key:le,context:"",colSpan:0,rowSpan:0})})}),se.forEach(I=>y.value.push(I))})},ge=d=>{Object.keys(d).forEach(A=>{switch(A){case"data":k.value=d[A];break;case"columns":Y.value=d[A];break;case"title":z.value=d[A];break;case"downloadExcel":N.value=d[A];break;case"spanInfo":D.value=d[A];break}}),X()},fe=()=>{switch(M.value){case"pdf":ie.value.print();break;case"xlsx":we();break}},we=()=>{const d=y.value.map(I=>I.map(E=>E.context??"")),C=z.value,A=ma(),c=A.addWorksheet(C,{properties:{tabColor:{argb:"FFFFFF"},defaultRowHeight:20,showGridLines:!0,outlineLevelCol:0,outlineLevelRow:0,dyDescent:55},views:[{state:"frozen",xSplit:0,ySplit:2}]}),K=D.value.subTableTree.filter(I=>Ae.value.some(E=>E.key===I.key)),q=2,s=[];let n=1;const V=(I,E,Q)=>{const{key:le,name:Te="",children:Se=[]}=I;if(c.getCell(E,n).value=Te,c.getCell(E,n).alignment={horizontal:"left",vertical:"top"},J(Se)){c.mergeCells(E,n,q,n),n=n+1;const xe="left",me=Q.join("-")+le;s.push({header:Te,key:me,hidden:!1,style:{alignment:{horizontal:xe,vertical:"top"}}})}else{const xe=n,me=Q.concat([le]);Se.forEach(ze=>{V(ze,E+1,me)}),c.mergeCells(E,xe,E,n-1)}},se=I=>{I.columns.forEach(E=>{const Q=E.values.map(Te=>{const Se=Te.toString(),xe=Se.match(/[\u4E00-\u9FA5]/g)??"";return Math.ceil(xe.length*1.3+Se.length*1.2)+2}),le=Math.max(...Q.filter(Te=>typeof Te=="number"));E.width=le})};K.forEach(I=>{V(I,1,[])}),c.columns=s,c.addRows(d),se(c),A.xlsx.writeBuffer().then(I=>{const E=document.createElement("a"),Q=new Blob([I],{type:"application/vnd.ms-excel;charset=utf-8;"});E.download=`${z.value}.xlsx`,E.href=URL.createObjectURL(Q),E.click()}),A.removeWorksheet(c.id)},Fe=x([]),G=x("A4"),Ce=[{label:"根據表格大小",value:"response"},{label:"A3",value:"A3"},{label:"A4",value:"A4"},{label:"A5",value:"A5"},{label:"B3",value:"B3"},{label:"B4",value:"B4"},{label:"B5",value:"B5"}],ve={"box-shadow":"0px 0px 1px 1px #dcdfe6","border-radius":"4px",border:"none"},ue={height:"32px",padding:"4px 0px 4px 4px","align-items":"center","border-bottom":"1px solid #dcdfe6"},Ie=async()=>{X(),await ke(),ie.value.initPage()},ie=x(),ee=x("p"),Ae=ae(()=>Y.value.filter(C=>C.active)),B=ae(()=>G.value!=="response"),T=()=>{const d=`orientation-${ee.value}`;return o(d,Z)},h=()=>{ee.value==="p"?ee.value="l":ee.value="p",ie.value.initPage()},L=()=>{ie.value.initPage()},H=x(1),P=x([]),j=async()=>{X(),await ke(),ie.value.initPage()},M=x("pdf"),de=d=>d===M.value?"primary":"info",ne=d=>d!==M.value,oe=d=>{switch(M.value=d,d){case"xlsx":{G.value="response",ie.value.initPage();break}case"pdf":{G.value="A4",ie.value.initPage();break}}},R=ae(()=>M.value==="pdf"),$=d=>{const C=H.value+d;C>P.value.length||C<1||Le(C)},Le=d=>{H.value=d,ie.value.scrollToPage(d)};return b({setPdfSetting:ge}),(d,C)=>(m(),he(Ht,{modelValue:u.value,"onUpdate:modelValue":C[10]||(C[10]=A=>u.value=A),widthSize:"large",heightSize:"large","hidden-collapse":!1},{header:r(()=>[Ue(W(e(o)("setting-download",e(Z))),1)]),footer:r(()=>[a("div",Jn,[_(pe,{type:"primary",label:e(o)("download",e(Z)),onClick:fe},null,8,["label"]),R.value?(m(),S("div",Xn,[a("div",Zn,[_(pe,{text:"","icon-name":"angle-left",disabled:H.value===1,onClick:C[7]||(C[7]=A=>$(-1))},null,8,["disabled"])]),a("div",eo,[_(Ke,{modelValue:H.value,"onUpdate:modelValue":C[8]||(C[8]=A=>H.value=A),type:"number",min:1,max:P.value.length,floor:0,hiddenLabel:"",onChange:Le},{append:r(()=>[Ue(W(`/ ${P.value.length}`),1)]),_:1},8,["modelValue","max"])]),a("div",to,[_(pe,{text:"","icon-name":"angle-right",disabled:H.value===P.value.length,onClick:C[9]||(C[9]=A=>$(1))},null,8,["disabled"])])])):ye("",!0)])]),default:r(()=>[a("div",Ln,[a("div",Mn,[a("div",Pn,[_(In,{ref_key:"PdfPreviewRef",ref:ie,title:z.value,columns:Ae.value,"table-data":k.value,orientation:ee.value,"pdf-size":G.value,headerRow:Fe.value,spanTableData:y.value,curPageIndex:H.value,"onUpdate:curPageIndex":C[0]||(C[0]=A=>H.value=A),pageCutRowIndexs:P.value,"onUpdate:pageCutRowIndexs":C[1]||(C[1]=A=>P.value=A)},null,8,["title","columns","table-data","orientation","pdf-size","headerRow","spanTableData","curPageIndex","pageCutRowIndexs"])])]),a("div",Rn,[a("div",Fn,[a("div",An,[a("div",zn,W(e(o)("setting-file",e(Z))),1),a("div",En,[a("div",qn,W(e(o)("type",e(Z))),1),a("div",On,[_(it,{placement:"top","show-after":300},{content:r(()=>[...C[11]||(C[11]=[Ue("Excel",-1)])]),default:r(()=>[_(pe,{"icon-name":"file-excel",type:de("xlsx"),text:ne("xlsx"),onClick:C[2]||(C[2]=A=>oe("xlsx"))},{icon:r(()=>[_(Ot,{name:"xlsx"})]),_:1},8,["type","text"])]),_:1}),_(it,{placement:"top","show-after":300},{content:r(()=>[...C[12]||(C[12]=[Ue("PDF",-1)])]),default:r(()=>[_(pe,{"icon-name":"file-pdf",type:de("pdf"),text:ne("pdf"),onClick:C[3]||(C[3]=A=>oe("pdf"))},{icon:r(()=>[_(Ot,{name:"pdf"})]),_:1},8,["type","text"])]),_:1})])]),a("div",Un,[a("div",Bn,W(e(o)("name",e(Z))),1)]),a("div",Kn,[_(Ke,{modelValue:z.value,"onUpdate:modelValue":C[4]||(C[4]=A=>z.value=A),type:"text",hiddenLabel:""},{append:r(()=>[Ue(W(`.${M.value}`),1)]),_:1},8,["modelValue"])]),M.value==="pdf"?(m(),S(re,{key:0},[a("div",Wn,[a("div",Hn,W(e(o)("format",e(Z))),1),B.value?(m(),he(pe,{key:0,label:T(),"icon-name":"rotate","icon-size":"small",onClick:h},null,8,["label"])):ye("",!0)]),a("div",jn,[_(Ke,{modelValue:G.value,"onUpdate:modelValue":C[5]||(C[5]=A=>G.value=A),type:"select",options:Ce,hiddenLabel:"",onChange:L},null,8,["modelValue"])])],64)):ye("",!0)]),a("div",Yn,[a("div",Nn,W(e(o)("columnSetting",e(Z))),1),a("div",null,[_(za,{modelValue:Y.value,"onUpdate:modelValue":C[6]||(C[6]=A=>Y.value=A),"item-key":"key",style:ve,"row-style":ue,onChange:Ie},{item:r(({element:A})=>[a("div",Gn,[_(Ke,{modelValue:A.active,"onUpdate:modelValue":c=>A.active=c,"hidden-label":"",type:"checkbox",onChange:j},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Qn,W(U(A)),1)]),_:1},8,["modelValue"])])])])])])]),_:1},8,["modelValue"]))}}),no=Oe(ao,[["__scopeId","data-v-ce12e818"]]),oo=Ee({__name:"SubTable",props:{rowData:{type:Object},columnKey:{type:String},spanInfo:{type:Object},columnsWidth:{type:Object}},setup(g){const b=g,l=x(),v=x([]),t=x([]),o=x();return rt(()=>{v.value=b.spanInfo.getSubTableData(b.rowData,b.columnKey),t.value=b.spanInfo.getSubColumns(b.columnKey),o.value=b.spanInfo.getSubDisplayData}),(i,f)=>(m(),S("div",{class:"sub-table hover-card-info",ref_key:"tableRef",ref:l},[(m(!0),S(re,null,be(v.value,u=>(m(),S("div",{key:u,class:"sub-row"},[(m(!0),S(re,null,be(t.value,k=>(m(),S("div",{key:k,class:"sub-ceil",style:st(`width: ${b.columnsWidth[k]}px`)},W(o.value(g.rowData,u,k)),5))),128))]))),128))],512))}}),so=Oe(oo,[["__scopeId","data-v-b8bcf64b"]]),io="__VxeColgroup_1.0.0__",lo={field:{type:String,required:!1,default:"",description:"資料key"},title:{type:String,required:!1,default:void 0,description:"欄位名稱"},label:{type:String,required:!1,default:"",description:"欄位名稱 配合 lib_columns 的格式"},headerClassName:{type:[Function,String],required:!1,default:void 0,description:"將表頭的行附加 className"}},Qt=Ee({__name:"VxeColgroup",props:lo,setup(g){const b=et(io),l=g,v=ut(),t=o=>qe(v,o);return(o,i)=>(m(),he(e(Ta),{field:l.field,title:(l==null?void 0:l.title)??(l==null?void 0:l.label),"header-class-name":l.headerClassName,class:Be(e(b))},lt({default:r(()=>[t("default")?O(o.$slots,"default",{key:0}):ye("",!0)]),_:2},[t("header")?{name:"header",fn:r(f=>[O(o.$slots,"header",Je(Qe(f)))]),key:"0"}:void 0]),1032,["field","title","header-class-name","class"]))}}),ro={options:{type:Array,require:!0,description:"可用的時間維度選項"},baseLevelIndex:{type:Number,required:!0,description:"用來當基準的時間維度"},activeLevelIndexs:{type:[Array,null],description:`
      現在使用中的時間維度
      如果有設置activeLevelIndexs的話
      則不會使用option中的active
    `},placement:{type:String,default:"left-start"},iconSize:{type:String,default:"small"},i18nModule:{type:String,required:!1,default:Z,description:"label, options 使用 i18nLabel 時套用的翻譯模組"}},uo={class:"option-container"},co=Ee({__name:"TimeLevelManagement",props:ro,emits:["activeChange","baseChange","update:baseLevelIndex"],setup(g,{emit:b}){const l=g,v=Ne("useHook"),{i18nTranslate:t,i18nTest:o}=v({i18nModule:l.i18nModule}),i=b,f=ae(()=>l.baseLevelIndex),u=ae(()=>l.activeLevelIndexs?l.options.map(y=>l.activeLevelIndexs.includes(y.index)):l.options.map(y=>y.active)),k=y=>{y.active=!y.active,i("activeChange")},z=y=>{i("update:baseLevelIndex",y.index),i("baseChange",y.index)},Y=y=>y.index===f.value,N=y=>y.index>=f.value,D=y=>Y(y)?"base-level":N(y)?"upper-level":"lower-level",U=y=>o((y==null?void 0:y.i18nLabel)??"")?t(y.i18nLabel):(y==null?void 0:y.label)??(y==null?void 0:y.name);return(y,X)=>(m(),he(kt,{offset:5,placement:l.placement,popperStyle:"padding: 2px"},{default:r(()=>[a("div",uo,[(m(!0),S(re,null,be(l.options,(ge,fe)=>(m(),S("div",{key:fe,class:Be(["option-item",D(ge)])},[_(Ke,{"model-value":u.value[fe],label:U(ge),"hidden-label":"",type:"checkbox",onChange:we=>k(ge)},null,8,["model-value","label","onChange"]),_(pe,{"icon-type":Y(ge)?"fas":"far",class:"star-btn","icon-name":"star","icon-size":"small",text:"",size:"small",onClick:we=>z(ge)},null,8,["icon-type","onClick"])],2))),128))])]),reference:r(()=>[_(wt,{class:"cursor-pointer",size:l.iconSize,icon:["far","clock"]},null,8,["size"])]),_:1},8,["placement"]))}}),po=Oe(co,[["__scopeId","data-v-501bc902"]]),fo={class:"_data-access-container"},vo={class:"loader-option-container"},mo={class:"loader-header"},go={class:"loader-header-default"},bo={class:"loader-header-name"},yo={class:"loader-header-date"},ho={class:"loader-header-remove"},wo={class:"loader-body"},_o=["onClick"],ko=["onClick"],Co={class:"loader-option-name"},So={class:"loader-option-date"},xo=["onClick"],$o={class:"loader-footer"},To={class:"_data-access-save-btn"},Do={class:"_data-access-save-input"},Vo={class:"_data-access-auto"},It=10,Io=`
  padding: 2px;
  width: 440px;
  height: fit-content;
  display: flex;
  flex-direction: column;
`,Lo=Ee({__name:"DataLoader",props:{dbKey:{type:String,required:!0,description:"IndexDB:DataOptions對應的key"},getCurData:{type:Function,required:!0,description:`
      () => value
      提供給DataLoader取得現有檔案的函式
      DataLoader會在儲存時使用getCurData取得value
      將value作為option儲存在db
    `},default:{}},emits:["load","save"],setup(g,{expose:b,emit:l}){const v=Ne("useHook"),{i18nTranslate:t}=v(),o=g,i=l,f=x([]),u=x(""),k=x(""),z=B=>f.value.find(T=>T.key===B),Y=B=>{const T=f.value.findIndex(L=>L.key===B);return T>0?Math.ceil(T/10):1},N=()=>_t(new Date).format("YYYY-MM-DD HH:mm:ss"),D=x(!1),U=async()=>{const B="prevSearch",T=N(),h=o.default??o.getCurData();await ke();const L={key:B,name:t("filter-last"),date:T,value:h};f.value.push(L),u.value="prevSearch",k.value="prevSearch",D.value=!1,await G()},y=async()=>{const B=await ga(o.dbKey);if(J(B))await U();else{const{options:H=[],defaultOptionKey:P=null,autoSave:j=!1}=B;f.value=H,u.value=P,k.value=P,D.value=j}await ke();const T=Y(u.value);Ie(T);const h=z("prevSearch");h.name=t("filter-last");const L=z(u.value);setTimeout(()=>{ge(L)},300)};rt(async()=>{await y()});const X=x(""),ge=B=>{B.key!=="prevSearch"&&(X.value=B.name),i("load",B.value),k.value=B.key},fe=async B=>{u.value===B.key&&(u.value="prevSearch"),k.value===B.key&&(k.value="prevSearch",X.value="");const T=f.value.findIndex(h=>h.key===B.key);f.value.splice(T,1),await G()},we=async B=>{u.value=B.key,await G()},Fe=async B=>{const T=J(B)?t("setting","system"):B,h=f.value.find(M=>M.name===T),L=h?h.key:et(),H=N(),P=o.getCurData();if(h)h.value=P,h.date=H;else{const M={key:L,name:T,date:H,value:P};f.value.push(M),k.value=L}await G(),X.value=T,k.value=L;const j=Y(L);Ie(j),i("save")},G=async()=>{const B={defaultOptionKey:u.value,autoSave:D.value,options:[...f.value]};await ba(o.dbKey,B)},Ce=x(1),ve=ae(()=>f.value.length),ue=ae(()=>{const B=(Ce.value-1)*It,T=B+It;return Array.from(f.value).slice(B,T)}),Ie=B=>Ce.value=B,ie=x(!1),ee=B=>k.value===B.key?"active":"";return b({autoSave:async()=>{const B=o.getCurData(),T=N();if(await ke(),D.value){const L=z(k.value);L.value=B,L.date=T}const h=z("prevSearch");h.value=B,h.date=T,await G()},init:y}),(B,T)=>(m(),S("div",fo,[_(kt,{offset:5,placement:"bottom-start",popperStyle:Io},{default:r(()=>[a("div",vo,[a("div",mo,[a("div",go,W(e(t)("default")),1),a("div",bo,W(e(t)("setting-name")),1),a("div",yo,W(e(t)("last-updateTime")),1),a("div",ho,W(e(t)("delete")),1)]),a("div",wo,[(m(!0),S(re,null,be(ue.value,h=>(m(),S("div",{key:h.key,class:Be(["loader-option-item",ee(h)]),onClick:$t(L=>ge(h),["stop"])},[a("div",{class:"loader-option-default",onClick:$t(L=>we(h),["stop"])},[_(e(na),{modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=L=>u.value=L)},{default:r(()=>[_(e(oa),{value:h.key},null,8,["value"])]),_:2},1032,["modelValue"])],8,ko),a("div",Co,W(h.name),1),a("div",So,W(h.date),1),a("div",{class:"loader-option-remove",onClick:$t(L=>fe(h),["stop"])},[_(pe,{type:"danger",text:"",size:"small",disabled:h.key==="prevSearch","icon-name":"trash"},null,8,["disabled"])],8,xo)],10,_o))),128)),ve.value<=0?(m(),he(ya,{key:0})):ye("",!0)]),a("div",$o,[ve.value>0?(m(),he(e(sa),{key:0,background:"",layout:"prev, pager, next",total:ve.value,"page-size":It,"current-page":Ce.value,"onUpdate:currentPage":Ie},null,8,["total","current-page"])):ye("",!0)])])]),reference:r(()=>[_(pe,{type:"primary",label:e(t)("setting-load"),"icon-name":"folder"},null,8,["label"])]),_:1}),a("div",{class:"_data-access-save-container",onMouseover:T[4]||(T[4]=h=>ie.value=!0),onMouseleave:T[5]||(T[5]=h=>ie.value=!1)},[a("div",To,[_(pe,{type:"success",label:e(t)("setting-save","system"),"icon-name":"save",onClick:T[1]||(T[1]=h=>Fe(X.value))},null,8,["label"])]),a("div",Do,[_(Ke,{modelValue:X.value,"onUpdate:modelValue":T[2]||(T[2]=h=>X.value=h),placeholder:`${e(t)("setting-placeholder","system")}`,hiddenLabel:"",direction:"row",clearable:"",onKeyup:T[3]||(T[3]=ia(h=>Fe(X.value),["enter"]))},null,8,["modelValue","placeholder"])])],32),a("div",Vo,[_(Ke,{modelValue:D.value,"onUpdate:modelValue":T[6]||(T[6]=h=>D.value=h),label:e(t)("filter-enable-autoSave"),hiddenLabel:"",type:"checkbox",onChange:T[7]||(T[7]=h=>G())},null,8,["modelValue","label"])])]))}}),Mo=Oe(Lo,[["__scopeId","data-v-8cff9198"]]),Po="__TimeLineTable_1.0.0__",Ro={i18nModule:{type:String,required:!1,default:Z,description:"i18nModule"},version:{type:String,required:!1,default:"",description:`
      欄位設定 版本
      如果版本更換 會重置欄位設定`},settingKey:{type:String,required:!1,default:"",description:`
      欄位設定 在 indexedDB 上的 key
      建議參考路由 避免重複使用 key`},tableColumns:{type:Array,required:!1,default:()=>[],description:"表格欄位顯示用設定"},tableData:{type:Array,required:!1,default:()=>[],description:"表格資料"}},Fo={class:"setting-wrapper"},Ao={class:"setting-container"},zo={class:"setting-list group"},Eo={class:"setting-list date"},qo={class:"setting-list other"},Oo={class:"setting-footer"},Uo=Ee({__name:"ColumnSetting",props:{i18nModule:{type:String,default:Z},groupColumns:{type:Array,default:()=>[]},dateColumns:{type:Array,default:()=>[]},otherColumns:{type:Array,default:()=>[]}},emits:["reset","submit"],setup(g,{emit:b}){const l=g,v=Ne("useHook"),{i18nTranslate:t}=v({i18nModule:l.i18nModule}),o=b,i=Xe([]),f=Xe([]),u=Xe([]),k=async()=>{i.value=l.groupColumns,f.value=l.dateColumns,u.value=l.otherColumns},z=()=>{o("reset")},Y=async()=>{const N=yt({groupValue:i.value,dateValue:f.value,otherValue:u.value});o("submit",N)};return rt(()=>{k()}),(N,D)=>(m(),S("div",Fo,[a("div",Ao,[a("div",zo,[a("label",null,W(e(t)("column-group",e(Z))),1),_(e(Vt),{always:"",class:"setting-draggable"},{default:r(()=>[_(e(Dt),{modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=U=>i.value=U),group:{name:"columns",pull:!0,put:!0},stripe:"",style:{height:"100%"}},{item:r(({element:U,index:y})=>[O(N.$slots,"DraggableItem",{element:U,index:y},void 0,!0)]),_:3},8,["modelValue"])]),_:3})]),a("div",Eo,[a("label",null,W(e(t)("column-dateLine",e(Z))),1),_(e(Vt),{always:"",class:"setting-draggable"},{default:r(()=>[_(e(Dt),{modelValue:f.value,"onUpdate:modelValue":D[1]||(D[1]=U=>f.value=U),group:{name:"columns",pull:!0,put:!0},stripe:"",style:{height:"100%"}},{item:r(({element:U,index:y})=>[O(N.$slots,"DraggableItem",{element:U,index:y},void 0,!0)]),_:3},8,["modelValue"])]),_:3})]),a("div",qo,[a("label",null,W(e(t)("column-unuse",e(Z))),1),_(e(Vt),{always:"",class:"setting-draggable"},{default:r(()=>[_(e(Dt),{modelValue:u.value,"onUpdate:modelValue":D[2]||(D[2]=U=>u.value=U),group:{name:"columns",pull:!0,put:!0},stripe:"",style:{height:"100%"}},{item:r(({element:U,index:y})=>[O(N.$slots,"DraggableItem",{element:U,index:y},void 0,!0)]),_:3},8,["modelValue"])]),_:3})])]),a("div",Oo,[_(e(pe),{label:e(t)("reset",e(Z)),type:"info",plain:"","icon-name":"repeat",onClick:z},null,8,["label"]),_(e(pe),{label:e(t)("submit",e(Z)),type:"primary",plain:"","icon-name":"check","icon-move":"scale",onClick:Y},null,8,["label"])])]))}}),Bo=Oe(Uo,[["__scopeId","data-v-ddd45dd3"]]),Ko=Ee({__name:"DraggableItem",props:{index:{type:Number,required:!1,default:0,description:"項次"},column:{type:Object,required:!1,default:()=>({}),description:"欄位資料"},timeLineDateKey:{type:String,required:!1,default:"",description:"當前使用 日期欄位的key"}},emits:["changeKey"],setup(g,{emit:b}){const l=g,v=ae(()=>l.column.key===l.timeLineDateKey),t=b,o=()=>{t("changeKey",l.column.key)};return(i,f)=>{var u;return m(),S("div",{class:Be(["draggable-item",{"is-active":v.value}])},[O(i.$slots,"default",{},()=>[a("label",null,W(`${l.index+1}. ${l.column.label}`),1)],!0),(u=l.column)!=null&&u.isTimeLineDate?(m(),he(e(pe),{key:0,class:Be({"btn-is-active":v.value}),"icon-type":v.value?"fas":"far","icon-name":"star","icon-size":"small",text:"",size:"small",onClick:o},null,8,["class","icon-type"])):ye("",!0)],2)}}}),Wo=Oe(Ko,[["__scopeId","data-v-7f8de6ac"]]),Ho=Ee({__name:"GroupDateColumn",props:{groupDateColumns:{type:Array,required:!1,default:()=>[],description:"日期欄位群組資料"},dateColumns:{type:Array,required:!1,default:()=>[],description:"日期線顯示欄位資料"},baseWidth:{type:Number,required:!1,default:80,description:"表格欄位基本寬度"},i18nModule:{type:String,required:!1,default:Z,description:"i18nModule"}},setup(g){const b=g,l=Ne("useHook"),{i18nTranslate:v}=l({i18nModule:b.i18nModule});return(t,o)=>{const i=Ma("GroupDateColumn",!0);return m(!0),S(re,null,be(b.groupDateColumns,f=>(m(),he(e(Qt),{key:f.key,title:f.title,"header-class-name":"time-line-group-date"},{default:r(()=>[Array.isArray(f.columns)&&f.columns.length>0?(m(),he(i,{key:0,"group-date-columns":f.columns,"date-columns":b.dateColumns,"base-width":b.baseWidth,"i18n-module":b.i18nModule},{header:r(u=>[O(t.$slots,"header",Re({ref_for:!0},u))]),column:r(u=>[O(t.$slots,"column",Re({ref_for:!0},u))]),_:3},8,["group-date-columns","date-columns","base-width","i18n-module"])):(m(!0),S(re,{key:1},be(b.dateColumns,u=>(m(),he(e(jt),{key:u.key,field:`${f.key}-${u.key}`,width:(u==null?void 0:u.width)??b.baseWidth,"min-width":(u==null?void 0:u.minWidth)??b.baseWidth,title:e(v)((u==null?void 0:u.i18nLabel)??u.label)},{header:r(k=>[O(t.$slots,"header",{scope:k,column:u,date:f.key})]),default:r(k=>[O(t.$slots,"column",{scope:k,column:u,date:f.key})]),_:2},1032,["field","width","min-width","title"]))),128))]),_:2},1032,["title"]))),128)}}}),jo={class:"flex-row-center i-ga-md"},Yo={class:"flex-row-center i-ga-md"},Lt=80,vt="Quarter-",mt="Week-",No=Ee({__name:"TimeLineTable",props:Ro,emits:["changeKey"],setup(g,{expose:b,emit:l}){const v=et(Po),t=g,o=Ne("useHook"),{i18nTranslate:i}=o({i18nModule:t.i18nModule}),f=x(1),u=x([{index:6,name:"年",active:!1,value:"year",i18nLabel:"datetime-year"},{index:4,name:"季",active:!1,value:"quarter",i18nLabel:"datetime-quarter"},{index:3,name:"月",active:!1,value:"month",i18nLabel:"datetime-month"},{index:2,name:"周",active:!1,value:"week",i18nLabel:"datetime-week"},{index:1,name:"日",active:!0,value:"day",i18nLabel:"datetime-day"}]),k=ae(()=>u.value.reduce((c,K)=>((K.index>=f.value&&K.active||K.index===f.value)&&c.push(K.value),c),[])),z=l,Y=x(""),N=async c=>{Y.value=c,await ke(),z("changeKey",c),ee()},D={},U=x(!1),y=()=>{setTimeout(()=>{var c;(c=Ie.value)==null||c.clearMergeCells()},0),setTimeout(()=>{U.value=!1},80)},X=[],ge=()=>{setTimeout(()=>{var c;(c=Ie.value)==null||c.setMergeCells(X)},80),setTimeout(()=>{U.value=!0},160)},fe=()=>{y(),X.splice(0);const c={};L.value.forEach((K,q)=>{let s="";we.value.forEach((n,V)=>{const se=K[n.key];s+=`__${n.key}-${se}__`,qe(c,s)||(c[s]={__row__:q,__col__:V,__rowspan__:0}),c[s].__rowspan__+=1})}),Object.values(c).forEach(K=>{const{__row__:q,__col__:s,__rowspan__:n}=K;n>1&&X.push({row:q,col:s,rowspan:n,colspan:1})}),ge()},we=Xe([]),Fe=ae(()=>we.value.reduce((c,K)=>(J(K.key)||c.push(K.key),c),[])),G=Xe([]),Ce=c=>J(c)?[]:Object.entries(c).sort((q,s)=>{const[n]=q,[V]=s;if(j.test(n)||j.test(V))return parseInt(n.replace(vt,""))-parseInt(V.replace(vt,""));if(M.test(n)||M.test(V))return parseInt(n.replace(mt,""))-parseInt(V.replace(mt,""));const se=ft(`${n}`,"YYYY-MM-DD HH:mm:ss"),I=ft(`${V}`,"YYYY-MM-DD HH:mm:ss");return _t(se).valueOf()-_t(I).valueOf()}).map(([q,s])=>{let n=q;return j.test(q)?n=`Q${q.replace(vt,"")}`:M.test(q)&&(n=`W${q.replace(mt,"")}`),{key:q,title:n,columns:Ce(s)}}),ve=Xe([]),ue=Xe([]),Ie=x(),ie=x(0),ee=async()=>{await ke(),de(),ie.value++},Ae=async()=>{const c=ne();await R(yt(c)),$(!1)},B=c=>{we.value=(c==null?void 0:c.groupValue)??[],ve.value=(c==null?void 0:c.dateValue)??[],ue.value=(c==null?void 0:c.otherValue)??[],R(c),ee()},T=x(!0),h=x(!1),L=Xe([]),H=new Map,P=c=>Fe.value.reduce((q,s)=>(J(c[s])||q.push(c[s]),q),[]).join("-"),j=new RegExp(vt),M=new RegExp(mt),de=async()=>{T.value=!0;for(const n in D)delete D[n];L.value=[],H.clear();const c={},K=gt([],t.tableData);let q=-1;const s=K.reduce((n,V,se)=>{if(!qe(V,Y.value)||J(V[Y.value]))return n;let I=c,E="";const Q={year:!1,month:!1,day:!1},le=_e=>{let Me="",De=[],He="";const je=V[Y.value];switch(_e){case"year":Q.year=!0,Me=ft(je,"YYYY");break;case"quarter":Me=`${vt}${ka(je)}`;break;case"month":De=[Q.year?"":"YYYY","MM"].filter(dt=>dt.length>0),Q.year=!0,Q.month=!0,He=De.join("-"),Me=ft(je,He);break;case"week":Me=`${mt}${_a(je)}`;break;case"day":De=[Q.year?"":"YYYY",Q.month?"":"MM","DD"].filter(dt=>dt.length>0),Q.year=!0,Q.month=!0,Q.day=!0,He=De.join("-"),Me=ft(je,He);break}qe(I,Me)||(I[Me]={}),Me.length>0&&(I=I[Me],E=Me)};k.value.forEach(_e=>{le(_e)});const Te=et("matrix-id");I=Te;const Se=P(V);H.has(Se)||H.set(Se,[]);const xe=H.get(Se);let me=xe.findIndex(_e=>!qe(_e,E));me===-1&&(me=xe.length,q++,xe.push({})),xe[me][E]=Te,H.set(Se,xe);const ze=`${Se}-${me}`;n.has(ze)||n.set(ze,{rowKey:ze,...V});const We=n.get(ze);return We[`${E}-sourceIndex`]=se,ve.value.forEach(_e=>{const Me=`${E}-${_e.key}`,De=V[_e.key];We[Me]=De}),we.value.forEach(_e=>{const Me=`${_e.key}-${V[_e.key]}`;qe(D,Me)||(D[Me]=q)}),n.set(ze,We),n},new Map);G.value=Ce(c),L.value=Array.from(s.values()).sort((n,V)=>{for(const se of we.value){const[I,E]=[`${se.key}-${n[se.key]}`,`${se.key}-${V[se.key]}`];if(D[I]!==D[E])return D[I]-D[E]}return 0}),await ke(),setTimeout(()=>{fe()},320),setTimeout(()=>{h.value=!0,T.value=!1},560)},ne=()=>{const c=[],K=[],q=[];t.tableColumns.forEach(n=>{switch((n==null?void 0:n.timeLineType)??"none"){case"group":c.push(n);break;case"date":K.push(n);break;case"none":default:q.push(n);break}});const s=(n,V)=>{const[se,I]=[(n==null?void 0:n.timeIndex)??-1,(V==null?void 0:V.timeIndex)??-1];return se-I};return{groupValue:c.sort(s),dateValue:K.sort(s),otherValue:q.sort(s)}},oe=async c=>{const K=ne();if(J(t.settingKey)||J(t.version))return K;try{const q=await Ca(`TimeLineTable_${t.settingKey}`),s=q.version!==t.version;return c&&s&&Ae(),(q==null?void 0:q.columnValue)??K}catch(q){return console.log(q),K}},R=async c=>{J(t.settingKey)||J(t.version)||await wa(`TimeLineTable_${t.settingKey}`,{settingKey:t.settingKey,version:t.version,columnValue:c})},$=async c=>{const K=await oe(c??!1);we.value=K.groupValue,ve.value=K.dateValue,ue.value=K.otherValue;const q=t.tableColumns.find(s=>s==null?void 0:s.isTimeLineDateActive);N((q==null?void 0:q.key)??""),await ke(),de()};rt(()=>{$(!0)}),b({init:$,initData:de,changeKey:N});const Le=ut(),d=c=>!!Le[c],C=(c,K)=>{if(K){if(d(`header-${c}`))return`header-${c}`;if(d("header-all"))return"header-all"}else{if(d(`column-${c}`))return`column-${c}`;if(d("column-all"))return"column-all"}return null},A=(c,K)=>{const q=K+"-sourceIndex",s=c[q];return s>=0?t.tableData[s]:null};return(c,K)=>{const q=Ft;return Ze((m(),S("div",{class:Be(["time-line",e(v)])},[Ze((m(),he(ha,{ref_key:"VxeTableRef",ref:Ie,key:ie.value,"show-overflow":"","show-header-overflow":"",border:!0,stripe:"",data:L.value,"row-config":{isCurrent:!0,isHover:!0},"column-config":{resizable:!0},"scroll-y":{enabled:!0,gt:0},"scroll-x":{enabled:!0,gt:0}},{default:r(()=>[_(Qt,{title:e(i)("setting",e(Z)),fixed:"left"},{header:r(()=>[a("div",jo,[a("h3",null,W(e(i)("setting",e(Z))),1),a("div",Yo,[_(kt,{offset:5,width:600,placement:"right-start"},{reference:r(()=>[_(wt,{class:"cursor-pointer",icon:["fas","sliders"]})]),default:r(()=>[_(Bo,{groupColumns:we.value,dateColumns:ve.value,otherColumns:ue.value,onReset:Ae,onSubmit:B},{DraggableItem:r(({element:s,index:n})=>[_(Wo,{index:n,column:s,timeLineDateKey:Y.value,onChangeKey:N},{default:r(()=>[a("label",null,W(`${n+1}. ${e(i)((s==null?void 0:s.i18nLabel)??s.label)}`),1)]),_:2},1032,["index","column","timeLineDateKey"])]),_:1},8,["groupColumns","dateColumns","otherColumns"])]),_:1}),_(po,{"base-level-index":f.value,"onUpdate:baseLevelIndex":K[0]||(K[0]=s=>f.value=s),options:u.value,"onUpdate:options":K[1]||(K[1]=s=>u.value=s),placement:"right-start","icon-size":"default",onActiveChange:ee,onBaseChange:ee},null,8,["base-level-index","options"]),Ze(_(pe,{"icon-x-type":"fluent","icon-name":"TableFreezeColumn28Regular",text:"",onClick:fe},null,512),[[bt,!U.value]]),Ze(_(pe,{"icon-x-type":"fluent","icon-name":"Table28Regular",text:"",onClick:y},null,512),[[bt,U.value]])])])]),default:r(()=>[(m(!0),S(re,null,be(we.value,s=>(m(),he(jt,{key:s.key,field:s.key,width:(s==null?void 0:s.width)??Lt,"min-width":(s==null?void 0:s.minWidth)??Lt,title:e(i)((s==null?void 0:s.i18nLabel)??s.label),"class-name":"time-line-group"},lt({_:2},[C((s==null?void 0:s.slotKey)??s.key,!0)?{name:"header",fn:r(n=>[O(c.$slots,C((s==null?void 0:s.slotKey)??s.key,!0),Re({ref_for:!0},n,{column:s,columnType:"group"}),()=>[Ue(W(e(i)((s==null?void 0:s.i18nLabel)??s.label)),1)],!0)]),key:"0"}:void 0,C((s==null?void 0:s.slotKey)??s.key,!1)?{name:"default",fn:r(n=>[O(c.$slots,C((s==null?void 0:s.slotKey)??s.key,!1),Re({ref_for:!0},n,{column:s,data:n.row[s.key],columnType:"group"}),()=>[Ue(W(n.row[s.key]),1)],!0)]),key:"1"}:void 0]),1032,["field","width","min-width","title"]))),128))]),_:3},8,["title"]),_(Ho,{"group-date-columns":G.value,"date-columns":ve.value,"base-width":Lt,"i18n-module":t.i18nModule},{header:r(({scope:s,column:n,date:V})=>[O(c.$slots,C((n==null?void 0:n.slotKey)??n.key,!0),Re(s,{column:n,rowKey:`${V}-${n.key}`,columnType:"date"}),()=>[Ue(W(e(i)(n.i18nLabel??n.label)),1)],!0)]),column:r(({scope:s,column:n,date:V})=>[O(c.$slots,C((n==null?void 0:n.slotKey)??n.key,!1),Re(s,{column:n,rowKey:`${V}-${n.key}`,data:s.row[`${V}-${n.key}`],columnType:"date",dateRow:A(s.row,V)}),()=>[Ue(W(s.row[`${V}-${n.key}`]??""),1)],!0)]),_:3},8,["group-date-columns","date-columns","i18n-module"])]),_:3},8,["data"])),[[bt,h.value]])],2)),[[q,T.value]])}}}),Go=Oe(No,[["__scopeId","data-v-7e851694"]]),Qo="__GroupSearch_1.0.0__",Jo={columns:{type:Object,default:()=>({}),required:!1},class:{type:String,default:""},size:{type:[String,Number],default:360}},Xo={class:"__group-header"},Zo={class:"__group-footer"},es={class:"__group-footer-left"},ts={class:"__group-footer-right"},as=Ee({__name:"GroupSearch",props:Jo,emits:["reset","submit"],setup(g,{expose:b,emit:l}){const v=et(Qo),t=g,o=x(!1),i=Ne("useHook"),{i18nTranslate:f}=i({i18nModule:Z}),u=l,k=()=>{u("reset")},z=()=>{u("submit"),o.value=!1},Y=ut(),N=D=>qe(Y,D);return b({setIsVisible:D=>{o.value=D}}),(D,U)=>(m(),S("div",{class:Be([e(v),"__group-search"])},[_(e(pe),{label:e(f)("filter"),"icon-name":"filter",type:"primary",onClick:U[0]||(U[0]=y=>o.value=!0),"hover-display":""},null,8,["label"]),_(e(Sa),{modelValue:o.value,"onUpdate:modelValue":U[2]||(U[2]=y=>o.value=y),size:t.size,direction:"ttb"},{header:r(()=>[a("div",Xo,[a("label",null,W(e(f)("search")),1)])]),default:r(()=>[a("div",{class:Be(t.class)},[(m(!0),S(re,null,be(t.columns,(y,X)=>(m(),S(re,{key:`group-search-${X}-${e(v)}`},[N(`search-${y.slotKey}`)?O(D.$slots,`search-${y.slotKey}`,{label:y.label,key:X,prop:X,column:y},void 0,!0):N("search-all")?O(D.$slots,"search-all",{label:y.label,key:X,prop:X,column:y},void 0,!0):ye("",!0)],64))),128))],2)]),footer:r(()=>[a("div",Zo,[a("div",es,[O(D.$slots,"footer",{},void 0,!0)]),a("div",ts,[_(e(pe),{"icon-name":"chevron-left","icon-move":"translate",label:e(f)("return"),onClick:U[1]||(U[1]=y=>o.value=!1)},null,8,["label"]),_(e(pe),{"icon-name":"arrow-rotate-left","icon-move":"rotate",type:"warning",label:e(f)("reset"),onClick:k},null,8,["label"]),_(e(pe),{"icon-name":"search","icon-move":"scale",type:"success",label:e(f)("search"),onClick:z},null,8,["label"])])])]),_:3},8,["modelValue","size"])],2))}}),ns=Oe(as,[["__scopeId","data-v-ef37bc1e"]]),os="__WebViewTable_1.0.0__",ss={baseurl:{type:String,required:!1,description:`api baseURL 參數
      baseURL: props.baseurl
    `},apiurl:{type:String,required:!1,description:`api url 參數
      apiurl 存在時
      url: props.apiurl
      webfuno, funoviewsuffix, designatedview無效

      apiurl 不存在時
      url: /api/ipaspTable/retrieveIpaspTableFromView
      webfuno, funoviewsuffix,  designatedview有效
    `},apiOperator:{type:String,required:!1,description:`api url 參數: 進階搜尋選項
      apiOperator 存在時
      url: props.apiurl
      webfuno, funoviewsuffix, designatedview無效

      apiOperator 不存在時
      url: /api/ipaspTable/retrieveIpaspTableFromView
      webfuno, funoviewsuffix,  designatedview有效
    `},webfuno:{type:String,required:!1,description:"api webfuno 參數"},funoviewsuffix:{type:String,required:!1,default:"",description:"api funoviewsuffix 參數"},designatedview:{type:String,required:!1,default:"",description:`api designatedview 參數
      designatedview 存在時 webfuno, funoviewsuffix 無效
    `},tableOptions:{type:Object,required:!0,description:`CustomTable 參數設定
      CustomTable Props 最後會加在 tableSetting 中
    `},columnSetting:{type:Object,required:!0,description:"欄位設定"},tableKey:{type:String,required:!1,default:"table",description:"useTableSetting 使用 columnSetting中對應的key"},filterKey:{type:String,required:!1,default:"filter",description:"useFormSetting 使用 columnSetting中對應的key"},formatParams:{type:Function,required:!1,default:g=>g,description:"自訂送出的api格式"},formatExcel:{type:Function,required:!1,description:"自訂Excel資料格式"},formatTable:{type:Function,required:!1,description:"自訂Table資料格式"},formatData:{type:Function,required:!1,default:g=>g,description:`
      自訂Data資料格式 適用於Excel, Table
      優先序低於formatExcel, formatTable
    `},formatSorting:{type:Function,required:!1,default:g=>g,description:"自訂SortingMap資料格式"},useFakeData:{type:Boolean,required:!1,default:!1,description:`
      是否使用fakeData假資料
      如果為true則不送出API responseData會使用fakeData
    `},fakeDataPath:{type:String,required:!1,default:void 0,description:"假資料get路徑"},isLog:{type:Boolean,required:!1,default:!1,description:"是否顯示 ajax 訊息"},fakeData:{type:Array,required:!1,default:()=>[],description:"替代實際API輸出資料的假資料"},isMountedInit:{type:Boolean,required:!1,default:!1,description:`
      是否在 onMounted 初始化
      預設 false, 因為由 DataLoader 來取資料
    `},downloadExcel:{type:Function,required:!1,default:null,description:`
      取代downloadExcel的特製表格下載方式
      ex: 子欄位、合併……
    `},isHiddenPrepend:{type:Boolean,required:!1,default:!1,description:"是否在 隱藏 slot #prepend"},isShowTimeLineTable:{type:Boolean,required:!1,default:!1,description:"是否顯示時間線表格"},beforeInitCallBack:{type:Function,required:!1,default:void 0,description:"初始化前執行"},afterInitCallBack:{type:Function,required:!1,default:void 0,description:"初始化後執行"}},Mt="/api/ipaspTable/retrieveIpaspTableFromView",Kt="/api/ipaspTable/retrieveColumnOperatorFromView",Pt=g=>{const{baseURL:b="",url:l=Mt}=g;return J(b)?{url:l}:{url:l,baseURL:b}},Rt=(g,b)=>{const{webfuno:l="",funoviewsuffix:v="",designatedview:t=""}=g;return b?J(l)&&J(t)?{}:J(t)?{webfuno:l,funoviewsuffix:v}:{designatedview:t}:{}},Jt=async(g,b,l,v)=>{const{isFakeData:t,fakeDataPath:o,fakeData:i,isLog:f}=v,u=await Yt({...g,method:"post",data:{...b}},{isFakeData:t,fakeDataPath:o,fakeData:{data:i,size:i.length,status:"success"},isLog:f,delay:300}),{data:k,size:z,status:Y,msg:N}=u;return Y==="success"?[k.map(l),z]:(Nt({type:"error",message:N??"WebView getData Error",duration:1e4}),[[],0])},is=async(g,b,l,v)=>{const[t]=await Jt(g,b,l,v);return t},ls=async(g,b,l,v)=>{const[t,o]=await Jt(g,b,l,v);return[t,o]},rs=async(g,b,l,v)=>{const t=await Yt({...v,method:"post",data:{...g}},{isFakeData:b,isLog:l,fakeData:{data:{},status:"success"},delay:300}),{data:o,status:i,msg:f}=t;return i==="success"?o:(Nt({type:"error",message:f??"WebView getColumnOperator Error",duration:1e4}),{})},us=g=>{const b=ae(()=>{const{version:D,settingKey:U,i18nModule:y}=g.tableOptions??{};return!J(D)&&!J(U)?{version:D,settingKey:U,i18nModule:y}:{}}),{columns:l,forms:v,activeForms:t,getActiveForms:o,reset:i,activeConditions:f,conditions:u,getConditionFilter:k,setConditionFilter:z,updateIDB:Y}=xa(g.columnSetting??{},g.filterKey,b.value);return{filterColumn:l,filter:v,activeFilter:t,getFilter:o,resetFilter:i,activeConditions:f,filterConditions:u,getConditionFilter:k,setConditionFilter:z,updateIDBFilter:Y,setFilter:D=>{if(i({}),typeof D=="object")for(const U in D)qe(v,U)&&(v[U]=D[U])}}},ds=g=>{const b={};return{filterConditionMap:b,initFilterConditionMap:async t=>{for(const k in b)delete b[k];const o=Pt({url:g.apiOperator??Kt,baseURL:g.baseurl}),i=Kt===o.url,f=Rt({webfuno:g.webfuno,funoviewsuffix:g.funoviewsuffix,designatedview:g.designatedview},i);let u={};i&&!J(f)&&(u=await rs(f,g.useFakeData,g.isLog,o));for(const k in t)Array.isArray(u[k])&&(b[k]=u[k])},getIsCondition:(t,o)=>{var i;return Array.isArray(b[t])?b[t].length>0:((i=o[t])==null?void 0:i.isCondition)??!1}}},cs=()=>{const g=x(null),b=x([]),l=x(!1),v=ae({get:()=>!J(b.value)||l,set:t=>{l.value=t}});return{selectionRow:g,selectionList:b,isShowSelectionInfo:v}},ps=(g,b)=>{const l=Ne("useHook"),{i18nTranslate:v,i18nTest:t}=l({i18nModule:b}),o=Xe([]),i=x(0),{tableSetting:f,downloadExcel:u,getParams:k,changePage:z,toggleSelection:Y,getSelectionRows:N,getDisplayData:D,spanInfo:U}=ra(g.columnSetting??{},g.tableKey,g.tableOptions??{},{i18nTranslate:v,i18nTest:t});return{tableData:o,tableDataCount:i,tableSetting:f,downloadExcel:u,getParams:k,changePage:z,toggleSelection:Y,getSelectionRows:N,getDisplayData:D,spanInfo:U}},fs={class:"flex-row content-between"},vs={class:"web-view-time-line"},ms={style:{width:"120px",overflow:"hidden"}},gs={class:"i-selection-operations-header"},bs={class:"i-selection-operations-column"},ys={class:"web-view-column"},hs={key:1},ws=Ee({__name:"WebViewTable",props:ss,emits:["row-click","columns-change","expand-change","select","select-all","selection-change","row-contextmenu","init","reset","mounted"],setup(g,{expose:b,emit:l}){var qt;const v=et(os),t=g,o=l,i=Ne("useHook"),f=((qt=t==null?void 0:t.tableOptions)==null?void 0:qt.i18nModule)??Z,{i18nTranslate:u,i18nTest:k}=i({i18nModule:f}),z=x(!1),{selectionRow:Y,selectionList:N,isShowSelectionInfo:D}=cs(),U=(w,F)=>{o("expand-change",w,F)},y=(w,F)=>{Y.value=F,N.value=Array.isArray(w)?w:[],o("select",w,F)},X=w=>{N.value=Array.isArray(w)?w:[],o("select-all",w)},ge=w=>{o("selection-change",w)},fe=(w,F,te)=>{o("row-click",w,F,te)},we=w=>{o("columns-change",w)},Fe=(w,F,te)=>{o("row-contextmenu",w,F,te)},{filterColumn:G,filter:Ce,activeFilter:ve,getFilter:ue,resetFilter:Ie,activeConditions:ie,filterConditions:ee,getConditionFilter:Ae,setConditionFilter:B,setFilter:T}=us(t),{filterConditionMap:h,initFilterConditionMap:L,getIsCondition:H}=ds(t),{tableData:P,tableDataCount:j,tableSetting:M,downloadExcel:de,getParams:ne,changePage:oe,toggleSelection:R,getSelectionRows:$,getDisplayData:Le,spanInfo:d}=ps(t,f),C=ae(()=>({isFakeData:t.useFakeData,fakeDataPath:t.fakeDataPath,fakeData:t.fakeData,isLog:t.isLog})),A=async w=>{const F=ne()??{},{page:te=1,size:p=100,sortingMap:ce={}}=F,Ve=Pt({baseURL:t.baseurl,url:t.apiurl}),Pe=Mt===Ve.url,Ye=Rt({webfuno:t.webfuno,funoviewsuffix:t.funoviewsuffix,designatedview:t.designatedview},Pe),$e=ue(!1),nt=t.formatParams({...$e}),ot=t.formatSorting(ce),ct=Ae();if(Pe&&J(Ye)){z.value=!1;return}const tt={advanced:ct,sortingMap:ot,paging:{page:te,size:p},...nt,...Ye};switch(w){case"all":tt.paging={page:1,size:-1};break;case"page":me.value&&(tt.paging.size=j.value);break}const pt=t.formatExcel??t.formatData,ht=await is(Ve,tt,pt,C.value),St=Object.keys(t.columnSetting??{});return ht.forEach(Ge=>{St.forEach(at=>{if(qe(Ge,at)){const xt=at;Ge[at]=Le(Ge,xt)}})}),ht},c=async({type:w})=>{z.value=!0;const F=await A(w);t.downloadExcel?t.downloadExcel(F):de(F??[]),z.value=!1},K=x(),q=x(!1),s=async w=>{q.value=!0,await ke();const{settingKey:F,i18nTitle:te,title:p}=M,ce=await A(w),Pe=(await $a(F)).columns.map($e=>{const{label:nt,i18nLabel:ot,isShow:ct,isOperations:tt}=$e;if(tt)return null;const pt=k(ot??"")?u(ot):nt;return{...$e,name:pt,active:ct}}).filter($e=>$e),Ye=k(te??"")?u(te??""):p;K.value.setPdfSetting({data:ce,columns:Pe,title:Ye,spanInfo:d}),setTimeout(()=>{_e.pdf=!0},300)},n=w=>d.basePropSubTableInfoMap.get(w).columnsWidth,V=async(w,F)=>{const te=d.basePropSubTableInfoMap.get(w);te&&(te.columnsWidth[w]=F)},se=async w=>{const{page:F=1,size:te=100,sortingMap:p={},emitType:ce=""}=w;let Ve=F;const Pe=["sorting-change","sort-change"].includes(ce);Pe&&(oe(1),Ve=1),me.value&&Ve===1&&(P.value=[]);const Ye=Pt({url:t.apiurl,baseURL:t.baseurl}),$e=Mt===Ye.url,nt=Rt({webfuno:t.webfuno,funoviewsuffix:t.funoviewsuffix,designatedview:t.designatedview},$e),ot=ue(!1),ct=t.formatParams({...ot}),tt=t.formatSorting(p),pt=Ae();$e&&J(nt)&&(z.value=!1);const ht={paging:{page:Ve,size:te},advanced:pt,sortingMap:tt,...ct,...nt},St=t.formatTable??t.formatData,[Ge,at]=await ls(Ye,ht,St,C.value);if(me.value){const xt=P.value,ta=Pe?Ge:[...xt,...Ge];P.value=ta,j.value=at,We.value=Ge.length>=te?"loadMore":"noMore"}else P.value=Ge,j.value=at;return Y.value=null,N.value=[],[Ge,at]},I=x(),E=ae(()=>t.isShowTimeLineTable&&M.tableColumns.some(w=>(w==null?void 0:w.isTimeLineDate)??!1)),Q=async(w,F)=>{z.value=!0,await ke(),typeof t.beforeInitCallBack=="function"&&t.beforeInitCallBack(),F==="input"&&(oe(1),w!=="DataLoader"&&je.value.autoSave()),me.value&&(We.value="loading"),await ke();const te=F==="table"?w:ne(),[p,ce]=await se(te);return await ke(),setTimeout(()=>{z.value=!1},240),typeof t.afterInitCallBack=="function"&&t.afterInitCallBack(),_e.timeLine&&I.value&&setTimeout(()=>{var Ve;(Ve=I.value)==null||Ve.init()},800),o("init",[p,ce]),[p,ce]},le=Gt(Q,300,{trailing:!1}),Te=async()=>{await ke(),o("mounted"),await L(G),je.value&&je.value.init(),t.isMountedInit&&le(null,"")},Se=x("pagination"),xe=[{label:"分頁顯示",value:"pagination",i18nLabel:"show-mode-page"},{label:"載入更多",value:"loadMore",i18nLabel:"show-mode-more"}],me=ae(()=>Se.value==="loadMore"),ze=async()=>{P.value=[],j.value=0,o("reset"),oe(1),await ke(),le(null,"input")},We=x("loadMore");b({setFilter:T,getConditions:()=>Ae(),setConditions:(w,F)=>{ie[w]=!J(F),B(w,F)},init:Q,getTableData:()=>yt(P.value),getTableDataCount:()=>yt(j.value),toggleSelection:R,getSelectionRows:$});const _e=Ra({timeLine:!1,pdf:!1}),Me=ut(),De=w=>!!Me[w],He=(w,F)=>{le(w,F)},je=x(),dt=()=>({activeFilter:gt({},ve),filter:gt({},Ce),activeConditions:gt({},ie),filterConditions:gt({},ee)}),Xt=w=>{Object.values(G).map(te=>te.prop).forEach(te=>{ve[te]=w.activeFilter[te]??!0,Ce[te]=w.filter[te]??null,ie[te]=w.activeConditions[te]??!1,ee[te]=w.filterConditions[te]??[]}),He("DataLoader","input")},Zt=()=>{He("DataLoader","input")},{slotKeyList:Ct,getSearchSlot:At,getHeaderSlot:zt,getColumnSlot:Et}=ua(M.tableColumns),ea=ae(()=>D&&N.value.length>0);return(w,F)=>{const te=Ft;return Ze((m(),S("div",{class:Be(["web-view",e(v)])},[_(da,Re({"table-data":e(P),"table-data-count":e(j),spanMethod:e(d).spanMethod},e(M),{"is-lazy-loading":me.value,"lazy-loading-status":We.value,"use-download-modal":"",onExcel:c,onPdf:s,onExpandChange:U,onSelect:y,onSelectAll:X,onSelectionChange:ge,onRowClick:fe,onColumnsChange:we,onRowContextmenu:Fe,onShowChange:F[5]||(F[5]=p=>e(le)(p,"table")),onLoad:F[6]||(F[6]=p=>e(le)(p,"table")),onMounted:Te,onColumnWidthChange:V}),lt({"setting-right":r(()=>[_(ns,{columns:e(G),class:"grid-row",size:480,onReset:e(Ie),onSubmit:F[0]||(F[0]=p=>He(null,"input"))},lt({"search-all":r(p=>[O(w.$slots,"search-all",Re({filterColumn:e(G)},p),()=>{var ce,Ve;return[e(qe)(e(Ce),p.prop)?(m(),he(Bt,Re({key:0,class:"grid-col-xs-24 grid-col-sm-12 grid-col-md-8 grid-col-lg-6",modelValue:e(Ce)[p.prop],"onUpdate:modelValue":Pe=>e(Ce)[p.prop]=Pe,active:e(ve)[p.prop],"onUpdate:active":Pe=>e(ve)[p.prop]=Pe,activeConditions:e(ie)[p.prop],"onUpdate:activeConditions":Pe=>e(ie)[p.prop]=Pe,conditions:e(ee)[p.prop],"onUpdate:conditions":Pe=>e(ee)[p.prop]=Pe},e(G)[p.prop],{"i18n-module":e(f),label:e(u)(((ce=p.column)==null?void 0:ce.i18nLabel)??((Ve=p.column)==null?void 0:Ve.label),e(f)),"column-id":p.prop,"allow-conditions":e(h)[p.prop],"is-condition":e(H)(p.prop,e(G))}),null,16,["modelValue","onUpdate:modelValue","active","onUpdate:active","activeConditions","onUpdate:activeConditions","conditions","onUpdate:conditions","i18n-module","label","column-id","allow-conditions","is-condition"])):ye("",!0)]},!0)]),footer:r(()=>[_(Mo,{ref_key:"dataLoaderRef",ref:je,"db-key":e(M).settingKey,getCurData:dt,onLoad:Xt,onSave:Zt},null,8,["db-key"])]),_:2},[be(e(Ct),p=>({name:e(At)(`${p}`),fn:r(ce=>[O(w.$slots,e(At)(`${p}`),Re({filterColumn:e(G)},ce),void 0,!0)])}))]),1032,["columns","onReset"]),_(pe,{label:e(u)("refresh",e(Z)),"icon-name":"rotate","icon-move":"rotate","hover-display":"",onClick:ze},null,8,["label"])]),append:r(()=>[Ze(a("div",vs,[_(it,{trigger:"hover",placement:"top"},{content:r(()=>[Ue(W(e(u)("timeLine-table",e(Z))),1)]),default:r(()=>[_(pe,{"icon-name":"calendar-day",plain:"",disabled:_e.timeLine,onClick:F[1]||(F[1]=p=>_e.timeLine=!0)},null,8,["disabled"])]),_:1})],512),[[bt,E.value]]),a("div",ms,[_(it,{placement:"top"},{content:r(()=>[a("div",null,W(e(u)("show-mode",e(Z))),1)]),default:r(()=>[_(Ke,{modelValue:Se.value,"onUpdate:modelValue":F[2]||(F[2]=p=>Se.value=p),"validate-key":"WebViewTable:viewType","i18n-module":e(Z),type:"select",options:xe,"hidden-label":"",onChange:ze},null,8,["modelValue","i18n-module"])]),_:1})])]),"row-operations-header":r(p=>[a("div",gs,[O(w.$slots,"row-operations-header",Re(p,{selectionRow:e(Y),selectionList:e(N),length:e(N).length}),()=>[_(wt,{name:"gear"})],!0)])]),"header-all":r(p=>[O(w.$slots,"header-all",Re({filterColumn:e(G)},p),()=>{var ce,Ve,Pe,Ye;return[a("div",ys,[e(qe)(e(Ce),p.prop)?(m(),he(Bt,Re({key:0,modelValue:e(Ce)[p.prop],"onUpdate:modelValue":$e=>e(Ce)[p.prop]=$e,active:e(ve)[p.prop],"onUpdate:active":$e=>e(ve)[p.prop]=$e,activeConditions:e(ie)[p.prop],"onUpdate:activeConditions":$e=>e(ie)[p.prop]=$e,conditions:e(ee)[p.prop],"onUpdate:conditions":$e=>e(ee)[p.prop]=$e},e(G)[p.prop],{"i18n-module":e(f),label:e(u)(((ce=p.column)==null?void 0:ce.i18nLabel)??((Ve=p.column)==null?void 0:Ve.label),e(f)),"column-id":p.prop,"allow-conditions":e(h)[p.prop],"is-condition":e(H)(p.prop,e(G)),search:"",onChange:F[3]||(F[3]=$e=>He($e,"input")),onSubmit:F[4]||(F[4]=$e=>He($e,"input"))}),null,16,["modelValue","onUpdate:modelValue","active","onUpdate:active","activeConditions","onUpdate:activeConditions","conditions","onUpdate:conditions","i18n-module","label","column-id","allow-conditions","is-condition"])):(m(),S("span",hs,W(e(u)(((Pe=p.column)==null?void 0:Pe.i18nLabel)??((Ye=p.column)==null?void 0:Ye.label))),1))])]},!0)]),"column-all":r(({row:p,prop:ce})=>[Ue(W(e(Le)(p,ce)),1)]),default:r(()=>[De("setting-left")?O(w.$slots,"setting-left",{key:0},void 0,!0):ye("",!0),De("setting-center")?O(w.$slots,"setting-center",{key:1},void 0,!0):ye("",!0),De("setting-right")?O(w.$slots,"setting-right",{key:2},void 0,!0):ye("",!0)]),_:2},[t.isHiddenPrepend?void 0:{name:"prepend",fn:r(()=>[a("div",fs,[De("selection-operations")?(m(),S("div",{key:0,class:Be(["batch-container",ea.value?"display":"hidden"])},[O(w.$slots,"selection-operations",{selectionRow:e(Y),selectionList:e(N),length:e(N).length},void 0,!0)],2)):ye("",!0),O(w.$slots,"prepend",{},()=>[F[9]||(F[9]=a("div",null,null,-1))],!0)])]),key:"0"},De("empty")?{name:"empty",fn:r(()=>[O(w.$slots,"empty",{},void 0,!0)]),key:"1"}:void 0,De("row-expand-header")?{name:"row-expand-header",fn:r(p=>[O(w.$slots,"row-expand-header",Je(Qe(p)),void 0,!0)]),key:"2"}:void 0,De("row-expand")?{name:"row-expand",fn:r(p=>[O(w.$slots,"row-expand",Je(Qe(p)),void 0,!0)]),key:"3"}:void 0,De("row-selection-header")?{name:"row-selection-header",fn:r(p=>[O(w.$slots,"row-selection-header",Je(Qe(p)),void 0,!0)]),key:"4"}:void 0,De("row-selection")?{name:"row-selection",fn:r(p=>[O(w.$slots,"row-selection",Je(Qe(p)),void 0,!0)]),key:"5"}:void 0,De("row-no-header")?{name:"row-no-header",fn:r(p=>[O(w.$slots,"row-no-header",Je(Qe(p)),void 0,!0)]),key:"6"}:void 0,De("row-no")?{name:"row-no",fn:r(p=>[O(w.$slots,"row-no",Je(Qe(p)),void 0,!0)]),key:"7"}:void 0,De("row-operations")?{name:"row-operations",fn:r(p=>[O(w.$slots,"row-operations",Je(Qe(p)),()=>[a("div",bs,[_(wt,{name:"ellipsis-vertical"})])],!0)]),key:"8"}:void 0,be(e(Ct),p=>({name:e(zt)(`${p}`),fn:r(ce=>[O(w.$slots,e(zt)(`${p}`),Re({filterColumn:e(G)},ce),void 0,!0)])})),be(e(d).leftProps,p=>({name:p,fn:r(({row:ce,prop:Ve})=>[z.value?ye("",!0):(m(),he(so,{key:0,columnKey:Ve,rowData:ce,spanInfo:e(d),columnsWidth:n(Ve)},null,8,["columnKey","rowData","spanInfo","columnsWidth"]))])})),be(e(Ct),p=>({name:e(Et)(`${p}`),fn:r(ce=>[O(w.$slots,e(Et)(`${p}`),Re({filterColumn:e(G)},ce),()=>[Ue(W(ce.data),1)],!0)])}))]),1040,["table-data","table-data-count","spanMethod","is-lazy-loading","lazy-loading-status"]),O(w.$slots,"chart",{tableColumns:e(M).tableColumns,i18nModule:e(M).i18nModule,tableData:e(P)},void 0,!0),E.value?(m(),he(Ht,{key:0,modelValue:_e.timeLine,"onUpdate:modelValue":F[7]||(F[7]=p=>_e.timeLine=p),title:e(u)("timeLine-table",e(Z)),modal:!1,draggable:"","hidden-footer":"","hidden-collapse":!1},{default:r(()=>[_(Go,{ref_key:"TimeLineTableRef",ref:I,"table-columns":e(M).tableColumns,"i18n-module":e(M).i18nModule,"table-data":e(P)},null,8,["table-columns","i18n-module","table-data"])]),_:1},8,["modelValue","title"])):ye("",!0),q.value?(m(),he(no,{key:1,modelValue:_e.pdf,"onUpdate:modelValue":F[8]||(F[8]=p=>_e.pdf=p),"i18n-module":e(f),ref_key:"DownloadModalRef",ref:K},null,8,["modelValue","i18n-module"])):ye("",!0)],2)),[[te,z.value]])}}}),Ri=Oe(ws,[["__scopeId","data-v-d604ecbc"]]);export{Ri as default};
